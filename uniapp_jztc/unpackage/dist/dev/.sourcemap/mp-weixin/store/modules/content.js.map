{"version":3,"file":"content.js","sources":["store/modules/content.js"],"sourcesContent":["import { \r\n  getCategories, \r\n  getCategoryList, \r\n  getContentDetail,\r\n  collectContent,\r\n  uncollectContent,\r\n  followUser,\r\n  unfollowUser,\r\n  commentContent,\r\n  reportContent\r\n} from '@/apis/content.js'\r\n\r\nconst state = {\r\n  categories: [],\r\n  contentList: [],\r\n  contentDetail: null,\r\n  currentCategory: null,\r\n  loading: false,\r\n  finished: false,\r\n  page: 1,\r\n  total: 0\r\n}\r\n\r\nconst mutations = {\r\n  SET_CATEGORIES(state, categories) {\r\n    state.categories = categories\r\n  },\r\n  SET_CONTENT_LIST(state, list) {\r\n    state.contentList = list\r\n  },\r\n  APPEND_CONTENT_LIST(state, list) {\r\n    state.contentList = [...state.contentList, ...list]\r\n  },\r\n  SET_CONTENT_DETAIL(state, detail) {\r\n    state.contentDetail = detail\r\n  },\r\n  SET_CURRENT_CATEGORY(state, category) {\r\n    state.currentCategory = category\r\n  },\r\n  SET_LOADING(state, loading) {\r\n    state.loading = loading\r\n  },\r\n  SET_FINISHED(state, finished) {\r\n    state.finished = finished\r\n  },\r\n  SET_PAGE(state, page) {\r\n    state.page = page\r\n  },\r\n  SET_TOTAL(state, total) {\r\n    state.total = total\r\n  },\r\n  RESET_STATE(state) {\r\n    state.contentList = []\r\n    state.contentDetail = null\r\n    state.currentCategory = null\r\n    state.loading = false\r\n    state.finished = false\r\n    state.page = 1\r\n    state.total = 0\r\n  }\r\n}\r\n\r\nconst actions = {\r\n  // 获取分类列表\r\n  async getCategories({ commit }, type = 1) {\r\n    try {\r\n      const res = await getCategories(type)\r\n      if (res.code === 0) {\r\n        commit('SET_CATEGORIES', res.data.list)\r\n        return res.data.list\r\n      }\r\n      throw new Error(res.message || '获取分类失败')\r\n    } catch (error) {\r\n      console.error('获取分类失败:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // 获取内容列表\r\n  async getContentList({ commit, state }, { isLoadMore = false, categoryId = null } = {}) {\r\n    if (state.loading || (state.finished && isLoadMore)) return\r\n\r\n    commit('SET_LOADING', true)\r\n    try {\r\n      const params = {\r\n        page: isLoadMore ? state.page + 1 : 1,\r\n        pageSize: 10,\r\n        categoryId: categoryId || state.currentCategory?.id\r\n      }\r\n      \r\n      const res = await getCategoryList(params)\r\n      if (res.code === 0) {\r\n        const list = res.data.list\r\n        if (isLoadMore) {\r\n          commit('APPEND_CONTENT_LIST', list)\r\n        } else {\r\n          commit('SET_CONTENT_LIST', list)\r\n        }\r\n        commit('SET_PAGE', params.page)\r\n        commit('SET_TOTAL', res.data.total)\r\n        commit('SET_FINISHED', list.length >= res.data.total)\r\n        return list\r\n      }\r\n      throw new Error(res.message)\r\n    } catch (error) {\r\n      console.error('获取内容列表失败:', error)\r\n      throw error\r\n    } finally {\r\n      commit('SET_LOADING', false)\r\n    }\r\n  },\r\n\r\n  // 获取内容详情\r\n  async getContentDetail({ commit }, id) {\r\n    try {\r\n      const res = await getContentDetail(id)\r\n      if (res.code === 0) {\r\n        commit('SET_CONTENT_DETAIL', res.data)\r\n        return res.data\r\n      }\r\n      throw new Error(res.message)\r\n    } catch (error) {\r\n      console.error('获取内容详情失败:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // 收藏内容\r\n  async collectContent({ commit }, id) {\r\n    try {\r\n      const res = await collectContent(id)\r\n      if (res.code === 0) {\r\n        return res.data\r\n      }\r\n      throw new Error(res.message)\r\n    } catch (error) {\r\n      console.error('收藏内容失败:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // 取消收藏\r\n  async uncollectContent({ commit }, id) {\r\n    try {\r\n      const res = await uncollectContent(id)\r\n      if (res.code === 0) {\r\n        return res.data\r\n      }\r\n      throw new Error(res.message)\r\n    } catch (error) {\r\n      console.error('取消收藏失败:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // 关注用户\r\n  async followUser({ commit }, id) {\r\n    try {\r\n      const res = await followUser(id)\r\n      if (res.code === 0) {\r\n        return res.data\r\n      }\r\n      throw new Error(res.message)\r\n    } catch (error) {\r\n      console.error('关注用户失败:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // 取消关注\r\n  async unfollowUser({ commit }, id) {\r\n    try {\r\n      const res = await unfollowUser(id)\r\n      if (res.code === 0) {\r\n        return res.data\r\n      }\r\n      throw new Error(res.message)\r\n    } catch (error) {\r\n      console.error('取消关注失败:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // 评论内容\r\n  async commentContent({ commit }, { id, data }) {\r\n    try {\r\n      const res = await commentContent(id, data)\r\n      if (res.code === 0) {\r\n        return res.data\r\n      }\r\n      throw new Error(res.message)\r\n    } catch (error) {\r\n      console.error('评论内容失败:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // 举报内容\r\n  async reportContent({ commit }, { id, data }) {\r\n    try {\r\n      const res = await reportContent(id, data)\r\n      if (res.code === 0) {\r\n        return res.data\r\n      }\r\n      throw new Error(res.message)\r\n    } catch (error) {\r\n      console.error('举报内容失败:', error)\r\n      throw error\r\n    }\r\n  },\r\n\r\n  // 重置状态\r\n  resetState({ commit }) {\r\n    commit('RESET_STATE')\r\n  }\r\n}\r\n\r\nconst getters = {\r\n  categories: state => state.categories,\r\n  contentList: state => state.contentList,\r\n  contentDetail: state => state.contentDetail,\r\n  currentCategory: state => state.currentCategory,\r\n  loading: state => state.loading,\r\n  finished: state => state.finished,\r\n  page: state => state.page,\r\n  total: state => state.total\r\n}\r\n\r\nexport default {\r\n  namespaced: true,\r\n  state,\r\n  mutations,\r\n  actions,\r\n  getters\r\n} "],"names":["state","getCategories","uni","getCategoryList","getContentDetail","collectContent","uncollectContent","followUser","unfollowUser","commentContent","reportContent"],"mappings":";;;AAYA,MAAM,QAAQ;AAAA,EACZ,YAAY,CAAE;AAAA,EACd,aAAa,CAAE;AAAA,EACf,eAAe;AAAA,EACf,iBAAiB;AAAA,EACjB,SAAS;AAAA,EACT,UAAU;AAAA,EACV,MAAM;AAAA,EACN,OAAO;AACT;AAEA,MAAM,YAAY;AAAA,EAChB,eAAeA,QAAO,YAAY;AAChC,IAAAA,OAAM,aAAa;AAAA,EACpB;AAAA,EACD,iBAAiBA,QAAO,MAAM;AAC5B,IAAAA,OAAM,cAAc;AAAA,EACrB;AAAA,EACD,oBAAoBA,QAAO,MAAM;AAC/B,IAAAA,OAAM,cAAc,CAAC,GAAGA,OAAM,aAAa,GAAG,IAAI;AAAA,EACnD;AAAA,EACD,mBAAmBA,QAAO,QAAQ;AAChC,IAAAA,OAAM,gBAAgB;AAAA,EACvB;AAAA,EACD,qBAAqBA,QAAO,UAAU;AACpC,IAAAA,OAAM,kBAAkB;AAAA,EACzB;AAAA,EACD,YAAYA,QAAO,SAAS;AAC1B,IAAAA,OAAM,UAAU;AAAA,EACjB;AAAA,EACD,aAAaA,QAAO,UAAU;AAC5B,IAAAA,OAAM,WAAW;AAAA,EAClB;AAAA,EACD,SAASA,QAAO,MAAM;AACpB,IAAAA,OAAM,OAAO;AAAA,EACd;AAAA,EACD,UAAUA,QAAO,OAAO;AACtB,IAAAA,OAAM,QAAQ;AAAA,EACf;AAAA,EACD,YAAYA,QAAO;AACjB,IAAAA,OAAM,cAAc,CAAE;AACtB,IAAAA,OAAM,gBAAgB;AACtB,IAAAA,OAAM,kBAAkB;AACxB,IAAAA,OAAM,UAAU;AAChB,IAAAA,OAAM,WAAW;AACjB,IAAAA,OAAM,OAAO;AACb,IAAAA,OAAM,QAAQ;AAAA,EACf;AACH;AAEA,MAAM,UAAU;AAAA;AAAA,EAEd,MAAM,cAAc,EAAE,UAAU,OAAO,GAAG;AACxC,QAAI;AACF,YAAM,MAAM,MAAMC,aAAa,cAAC,IAAI;AACpC,UAAI,IAAI,SAAS,GAAG;AAClB,eAAO,kBAAkB,IAAI,KAAK,IAAI;AACtC,eAAO,IAAI,KAAK;AAAA,MACjB;AACD,YAAM,IAAI,MAAM,IAAI,WAAW,QAAQ;AAAA,IACxC,SAAQ,OAAO;AACdC,oBAAAA,MAAc,MAAA,SAAA,kCAAA,WAAW,KAAK;AAC9B,YAAM;AAAA,IACP;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,eAAe,EAAE,QAAQ,OAAAF,UAAS,EAAE,aAAa,OAAO,aAAa,KAAM,IAAG,IAAI;;AACtF,QAAIA,OAAM,WAAYA,OAAM,YAAY;AAAa;AAErD,WAAO,eAAe,IAAI;AAC1B,QAAI;AACF,YAAM,SAAS;AAAA,QACb,MAAM,aAAaA,OAAM,OAAO,IAAI;AAAA,QACpC,UAAU;AAAA,QACV,YAAY,gBAAc,KAAAA,OAAM,oBAAN,mBAAuB;AAAA,MAClD;AAED,YAAM,MAAM,MAAMG,aAAe,gBAAC,MAAM;AACxC,UAAI,IAAI,SAAS,GAAG;AAClB,cAAM,OAAO,IAAI,KAAK;AACtB,YAAI,YAAY;AACd,iBAAO,uBAAuB,IAAI;AAAA,QAC5C,OAAe;AACL,iBAAO,oBAAoB,IAAI;AAAA,QAChC;AACD,eAAO,YAAY,OAAO,IAAI;AAC9B,eAAO,aAAa,IAAI,KAAK,KAAK;AAClC,eAAO,gBAAgB,KAAK,UAAU,IAAI,KAAK,KAAK;AACpD,eAAO;AAAA,MACR;AACD,YAAM,IAAI,MAAM,IAAI,OAAO;AAAA,IAC5B,SAAQ,OAAO;AACdD,oBAAAA,wDAAc,aAAa,KAAK;AAChC,YAAM;AAAA,IACZ,UAAc;AACR,aAAO,eAAe,KAAK;AAAA,IAC5B;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,iBAAiB,EAAE,OAAQ,GAAE,IAAI;AACrC,QAAI;AACF,YAAM,MAAM,MAAME,aAAgB,iBAAC,EAAE;AACrC,UAAI,IAAI,SAAS,GAAG;AAClB,eAAO,sBAAsB,IAAI,IAAI;AACrC,eAAO,IAAI;AAAA,MACZ;AACD,YAAM,IAAI,MAAM,IAAI,OAAO;AAAA,IAC5B,SAAQ,OAAO;AACdF,oBAAAA,wDAAc,aAAa,KAAK;AAChC,YAAM;AAAA,IACP;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,eAAe,EAAE,OAAQ,GAAE,IAAI;AACnC,QAAI;AACF,YAAM,MAAM,MAAMG,aAAc,eAAC,EAAE;AACnC,UAAI,IAAI,SAAS,GAAG;AAClB,eAAO,IAAI;AAAA,MACZ;AACD,YAAM,IAAI,MAAM,IAAI,OAAO;AAAA,IAC5B,SAAQ,OAAO;AACdH,oBAAAA,MAAc,MAAA,SAAA,mCAAA,WAAW,KAAK;AAC9B,YAAM;AAAA,IACP;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,iBAAiB,EAAE,OAAQ,GAAE,IAAI;AACrC,QAAI;AACF,YAAM,MAAM,MAAMI,aAAgB,iBAAC,EAAE;AACrC,UAAI,IAAI,SAAS,GAAG;AAClB,eAAO,IAAI;AAAA,MACZ;AACD,YAAM,IAAI,MAAM,IAAI,OAAO;AAAA,IAC5B,SAAQ,OAAO;AACdJ,oBAAAA,MAAc,MAAA,SAAA,mCAAA,WAAW,KAAK;AAC9B,YAAM;AAAA,IACP;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,WAAW,EAAE,OAAQ,GAAE,IAAI;AAC/B,QAAI;AACF,YAAM,MAAM,MAAMK,aAAU,WAAC,EAAE;AAC/B,UAAI,IAAI,SAAS,GAAG;AAClB,eAAO,IAAI;AAAA,MACZ;AACD,YAAM,IAAI,MAAM,IAAI,OAAO;AAAA,IAC5B,SAAQ,OAAO;AACdL,oBAAAA,MAAc,MAAA,SAAA,mCAAA,WAAW,KAAK;AAC9B,YAAM;AAAA,IACP;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,aAAa,EAAE,OAAQ,GAAE,IAAI;AACjC,QAAI;AACF,YAAM,MAAM,MAAMM,aAAY,aAAC,EAAE;AACjC,UAAI,IAAI,SAAS,GAAG;AAClB,eAAO,IAAI;AAAA,MACZ;AACD,YAAM,IAAI,MAAM,IAAI,OAAO;AAAA,IAC5B,SAAQ,OAAO;AACdN,oBAAAA,MAAc,MAAA,SAAA,mCAAA,WAAW,KAAK;AAC9B,YAAM;AAAA,IACP;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,eAAe,EAAE,OAAM,GAAI,EAAE,IAAI,KAAI,GAAI;AAC7C,QAAI;AACF,YAAM,MAAM,MAAMO,4BAAe,IAAI,IAAI;AACzC,UAAI,IAAI,SAAS,GAAG;AAClB,eAAO,IAAI;AAAA,MACZ;AACD,YAAM,IAAI,MAAM,IAAI,OAAO;AAAA,IAC5B,SAAQ,OAAO;AACdP,oBAAAA,MAAc,MAAA,SAAA,mCAAA,WAAW,KAAK;AAC9B,YAAM;AAAA,IACP;AAAA,EACF;AAAA;AAAA,EAGD,MAAM,cAAc,EAAE,OAAM,GAAI,EAAE,IAAI,KAAI,GAAI;AAC5C,QAAI;AACF,YAAM,MAAM,MAAMQ,2BAAc,IAAI,IAAI;AACxC,UAAI,IAAI,SAAS,GAAG;AAClB,eAAO,IAAI;AAAA,MACZ;AACD,YAAM,IAAI,MAAM,IAAI,OAAO;AAAA,IAC5B,SAAQ,OAAO;AACdR,oBAAAA,MAAc,MAAA,SAAA,mCAAA,WAAW,KAAK;AAC9B,YAAM;AAAA,IACP;AAAA,EACF;AAAA;AAAA,EAGD,WAAW,EAAE,UAAU;AACrB,WAAO,aAAa;AAAA,EACrB;AACH;AAEA,MAAM,UAAU;AAAA,EACd,YAAY,CAAAF,WAASA,OAAM;AAAA,EAC3B,aAAa,CAAAA,WAASA,OAAM;AAAA,EAC5B,eAAe,CAAAA,WAASA,OAAM;AAAA,EAC9B,iBAAiB,CAAAA,WAASA,OAAM;AAAA,EAChC,SAAS,CAAAA,WAASA,OAAM;AAAA,EACxB,UAAU,CAAAA,WAASA,OAAM;AAAA,EACzB,MAAM,CAAAA,WAASA,OAAM;AAAA,EACrB,OAAO,CAAAA,WAASA,OAAM;AACxB;AAEA,MAAe,UAAA;AAAA,EACb,YAAY;AAAA,EACZ;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;;"}