{"version":3,"file":"insurance-popup.js","sources":["components/insurance-popup/insurance-popup.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovTXl4aWFuZ211L2Nob25nZ291L2p1eml0b25nY2hlbmcvY29tcG9uZW50cy9pbnN1cmFuY2UtcG9wdXAvaW5zdXJhbmNlLXBvcHVwLnZ1ZQ"],"sourcesContent":["<template>\n\t<uni-popup ref=\"insurancePopup\" type=\"bottom\">\n\t\t<view class=\"popup-content\">\n\t\t\t<view class=\"popup-header\">\n\t\t\t\t<text class=\"popup-title\">保价</text>\n\t\t\t\t<view class=\"popup-close\" @tap=\"close\">\n\t\t\t\t\t<uni-icons type=\"closeempty\" size=\"22\" color=\"#666666\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"insurance-content\">\n\t\t\t\t<!-- 物品声明价值 -->\n\t\t\t\t<view class=\"insurance-item\">\n\t\t\t\t\t<text class=\"insurance-label\">物品声明价值</text>\n\t\t\t\t\t<view class=\"insurance-input-wrapper\">\n\t\t\t\t\t\t<text class=\"currency-symbol\">¥</text>\n\t\t\t\t\t\t<input \n\t\t\t\t\t\t\ttype=\"digit\" \n\t\t\t\t\t\t\tv-model=\"declaredValue\"\n\t\t\t\t\t\t\tclass=\"insurance-input\"\n\t\t\t\t\t\t\tplaceholder=\"最高保价30000元\"\n\t\t\t\t\t\t\tplaceholder-class=\"input-placeholder\"\n\t\t\t\t\t\t\t@input=\"handleInput\"\n\t\t\t\t\t\t\tmaxlength=\"5\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 保费 -->\n\t\t\t\t<view class=\"insurance-item\">\n\t\t\t\t\t<text class=\"insurance-label\">保费</text>\n\t\t\t\t\t<text class=\"insurance-fee\">¥{{ insuranceFee }}</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 保价协议 -->\n\t\t\t\t<view class=\"insurance-agreement\">\n\t\t\t\t\t<checkbox \n\t\t\t\t\t\tclass=\"insurance-checkbox\"\n\t\t\t\t\t\t:checked=\"agreeInsurance\" \n\t\t\t\t\t\t@tap=\"toggleInsuranceAgreement\" \n\t\t\t\t\t\tcolor=\"#007AFF\" \n\t\t\t\t\t/>\n\t\t\t\t\t<text class=\"agreement-text\">\n\t\t\t\t\t\t我已阅读并同意\n\t\t\t\t\t\t<text class=\"agreement-link\" @tap=\"showInsuranceAgreement\">《保价协议》</text>\n\t\t\t\t\t</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"popup-footer\">\n\t\t\t\t<button \n\t\t\t\t\tclass=\"insurance-button confirm-btn\" \n\t\t\t\t\t:class=\"{ 'confirm-btn-active': canConfirm }\"\n\t\t\t\t\t:disabled=\"!canConfirm\"\n\t\t\t\t\t@tap=\"confirm\"\n\t\t\t\t>确定</button>\n\t\t\t</view>\n\t\t</view>\n\t</uni-popup>\n</template>\n\n<script>\nexport default {\n\tname: 'insurance-popup',\n\tdata() {\n\t\treturn {\n\t\t\tdeclaredValue: '', // 声明价值\n\t\t\tinsuranceFee: '0.00', // 保费\n\t\t\tagreeInsurance: false, // 是否同意保价协议\n\t\t\tmaxValue: 30000 // 最大保价金额\n\t\t}\n\t},\n\tcomputed: {\n\t\tcanConfirm() {\n\t\t\treturn this.declaredValue && this.agreeInsurance\n\t\t}\n\t},\n\tmethods: {\n\t\topen() {\n\t\t\tthis.$refs.insurancePopup.open()\n\t\t},\n\t\tclose() {\n\t\t\tthis.$refs.insurancePopup.close()\n\t\t},\n\t\tcalculateFee() {\n\t\t\tif (!this.declaredValue) {\n\t\t\t\tthis.insuranceFee = '0.00'\n\t\t\t\treturn\n\t\t\t}\n\t\t\tconst fee = parseFloat(this.declaredValue) * 0.005\n\t\t\tthis.insuranceFee = fee.toFixed(2)\n\t\t},\n\t\ttoggleInsuranceAgreement() {\n\t\t\tthis.agreeInsurance = !this.agreeInsurance\n\t\t},\n\t\tshowInsuranceAgreement() {\n\t\t\t// 显示保价协议的逻辑\n\t\t},\n\t\tconfirm() {\n\t\t\tif (!this.canConfirm) return\n\t\t\tthis.$emit('confirm', {\n\t\t\t\tdeclaredValue: this.declaredValue,\n\t\t\t\tinsuranceFee: this.insuranceFee\n\t\t\t})\n\t\t\tthis.close()\n\t\t},\n\t\thandleInput(e) {\n\t\t\tlet value = e.detail.value\n\t\t\t\n\t\t\t// 移除非数字字符\n\t\t\tvalue = value.replace(/[^\\d]/g, '')\n\t\t\t\n\t\t\t// 限制最大长度为5位\n\t\t\tif (value.length > 5) {\n\t\t\t\tvalue = value.slice(0, 5)\n\t\t\t}\n\t\t\t\n\t\t\t// 转换为数字进行比较\n\t\t\tconst numValue = parseInt(value || '0')\n\t\t\tif (numValue > this.maxValue) {\n\t\t\t\tvalue = this.maxValue.toString()\n\t\t\t\t// 显示提示\n\t\t\t\tuni.showToast({\n\t\t\t\t\ttitle: '最高保价30000元',\n\t\t\t\t\ticon: 'none'\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t\t// 直接更新显示值\n\t\t\tthis.declaredValue = value\n\t\t\tthis.calculateFee()\n\t\t}\n\t}\n}\n</script>\n\n<style>\n.popup-content {\n\tbackground-color: #FFFFFF;\n\tborder-radius: 24rpx 24rpx 0 0;\n\tposition: relative;\n\tz-index: 999;\n\theight: 35vh;\n\tdisplay: flex;\n\tflex-direction: column;\n}\n\n.popup-header {\n\tpadding: 30rpx;\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tborder-bottom: 1rpx solid #F5F5F5;\n}\n\n.popup-title {\n\tfont-size: 34rpx;\n\tfont-weight: bold;\n\tcolor: #333333;\n}\n\n.popup-close {\n\tpadding: 10rpx;\n}\n\n.insurance-content {\n\tflex: 1;\n\tpadding: 30rpx;\n\toverflow-y: auto;\n\t-webkit-overflow-scrolling: touch;\n}\n\n.insurance-item {\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tmargin-bottom: 40rpx;\n}\n\n.insurance-label {\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\tfont-weight: bold;\n}\n\n.insurance-input-wrapper {\n\tdisplay: flex;\n\talign-items: center;\n\tbackground-color: #F8F8F8;\n\tpadding: 0 20rpx;\n\tborder-radius: 8rpx;\n\twidth: 245rpx;\n}\n\n.currency-symbol {\n\tfont-size: 28rpx;\n\tcolor: #333333;\n\tmargin-right: 6rpx;\n}\n\n.insurance-input {\n\tflex: 1;\n\theight: 80rpx;\n\tfont-size: 28rpx;\n\tcolor: #333333;\n}\n\n.input-placeholder {\n\tcolor: #999999;\n\tfont-size: 28rpx;\n\twhite-space: nowrap;\n}\n\n.insurance-fee {\n\tfont-size: 28rpx;\n\tcolor: #FF4D4F;\n\tfont-weight: bold;\n}\n\n.insurance-agreement {\n\tdisplay: flex;\n\talign-items: center;\n\tmargin-top: 60rpx;\n}\n\n.agreement-text {\n\tfont-size: 26rpx;\n\tcolor: #666666;\n}\n\n.agreement-link {\n\tcolor: #007AFF;\n}\n\n.popup-footer {\n\tpadding: 24rpx 30rpx calc(24rpx + env(safe-area-inset-bottom));\n\tborder-top: 1rpx solid #F5F5F5;\n\tbackground-color: #FFFFFF;\n}\n\n.insurance-button {\n\tbackground: linear-gradient(to right, #CCCCCC, #999999);\n\tcolor: #FFFFFF;\n\tfont-size: 32rpx;\n\tfont-weight: bold;\n\theight: 88rpx;\n\tline-height: 88rpx;\n\tborder-radius: 44rpx;\n\tborder: none;\n\topacity: 0.8;\n\ttransition: all 0.3s;\n}\n\n.confirm-btn-active {\n\tbackground: linear-gradient(to right, #FF9500, #FF5E3A);\n\topacity: 1;\n}\n\n.insurance-checkbox {\n\ttransform: scale(0.7);\n}\n</style> ","import Component from 'E:/Myxiangmu/chonggou/juzitongcheng/components/insurance-popup/insurance-popup.vue'\nwx.createComponent(Component)"],"names":["uni"],"mappings":";;AA8DA,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,OAAO;AACN,WAAO;AAAA,MACN,eAAe;AAAA;AAAA,MACf,cAAc;AAAA;AAAA,MACd,gBAAgB;AAAA;AAAA,MAChB,UAAU;AAAA;AAAA,IACX;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,aAAa;AACZ,aAAO,KAAK,iBAAiB,KAAK;AAAA,IACnC;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,OAAO;AACN,WAAK,MAAM,eAAe,KAAK;AAAA,IAC/B;AAAA,IACD,QAAQ;AACP,WAAK,MAAM,eAAe,MAAM;AAAA,IAChC;AAAA,IACD,eAAe;AACd,UAAI,CAAC,KAAK,eAAe;AACxB,aAAK,eAAe;AACpB;AAAA,MACD;AACA,YAAM,MAAM,WAAW,KAAK,aAAa,IAAI;AAC7C,WAAK,eAAe,IAAI,QAAQ,CAAC;AAAA,IACjC;AAAA,IACD,2BAA2B;AAC1B,WAAK,iBAAiB,CAAC,KAAK;AAAA,IAC5B;AAAA,IACD,yBAAyB;AAAA,IAExB;AAAA,IACD,UAAU;AACT,UAAI,CAAC,KAAK;AAAY;AACtB,WAAK,MAAM,WAAW;AAAA,QACrB,eAAe,KAAK;AAAA,QACpB,cAAc,KAAK;AAAA,OACnB;AACD,WAAK,MAAM;AAAA,IACX;AAAA,IACD,YAAY,GAAG;AACd,UAAI,QAAQ,EAAE,OAAO;AAGrB,cAAQ,MAAM,QAAQ,UAAU,EAAE;AAGlC,UAAI,MAAM,SAAS,GAAG;AACrB,gBAAQ,MAAM,MAAM,GAAG,CAAC;AAAA,MACzB;AAGA,YAAM,WAAW,SAAS,SAAS,GAAG;AACtC,UAAI,WAAW,KAAK,UAAU;AAC7B,gBAAQ,KAAK,SAAS,SAAS;AAE/BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF;AAGA,WAAK,gBAAgB;AACrB,WAAK,aAAa;AAAA,IACnB;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpIA,GAAG,gBAAgB,SAAS;"}