{"version":3,"file":"index.js","sources":["components/tab-bar/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovTXl4aWFuZ211L2Nob25nZ291L2p1eml0b25nY2hlbmcvY29tcG9uZW50cy90YWItYmFyL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\n\t<view class=\"tab-bar\" :style=\"{ paddingBottom: safeAreaInsets.bottom + 'px' }\">\n\t\t<!-- 统一的背景 -->\n\t\t<view class=\"tab-bg\" :style=\"{ paddingBottom: safeAreaInsets.bottom + 'px' }\"></view>\n\t\t\n\t\t<!-- 导航内容 -->\n\t\t<view class=\"tab-content\">\n\t\t\t<view class=\"tab-item\" @click=\"switchTab(0)\">\n\t\t\t\t<image class=\"tab-image\" :src=\"currentTab === 0 ? '/static/tabbar/sy-liang.png' : '/static/tabbar/sy.png'\" mode=\"aspectFit\"></image>\n\t\t\t\t<text class=\"tab-text\" :class=\"{ active: currentTab === 0 }\">首页</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"tab-item\" @click=\"switchTab(1)\">\n\t\t\t\t<image class=\"tab-image\" :src=\"currentTab === 1 ? '/static/tabbar/sq-liang.png' : '/static/tabbar/sq.png'\" mode=\"aspectFit\"></image>\n\t\t\t\t<text class=\"tab-text\" :class=\"{ active: currentTab === 1 }\">闲置</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 中间凹陷区域 -->\n\t\t\t<view class=\"center-area\">\n\t\t\t\t<view class=\"center-circle\"></view>\n\t\t\t\t<!-- 发布按钮 -->\n\t\t\t\t<view class=\"publish-button\" @click=\"switchTab(2)\">\n\t\t\t\t\t<image class=\"publish-icon\" src=\"/static/tabbar/fb.png\" mode=\"aspectFit\"></image>\n\t\t\t\t\t<text class=\"publish-text\">发布</text>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"tab-item\" @click=\"switchTab(3)\">\n\t\t\t\t<image class=\"tab-image\" :src=\"currentTab === 3 ? '/static/tabbar/xiaoxi-liang.png' : '/static/tabbar/xiaoxi.png'\" mode=\"aspectFit\"></image>\n\t\t\t\t<text class=\"tab-text\" :class=\"{ active: currentTab === 3 }\">消息</text>\n\t\t\t\t<view v-if=\"unreadCount > 0\" class=\"message-badge\">{{unreadCount > 99 ? '99+' : unreadCount}}</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<view class=\"tab-item\" @click=\"switchTab(4)\">\n\t\t\t\t<image class=\"tab-image\" :src=\"currentTab === 4 ? '/static/tabbar/my-liang.png' : '/static/tabbar/my.png'\" mode=\"aspectFit\"></image>\n\t\t\t\t<text class=\"tab-text\" :class=\"{ active: currentTab === 4 }\">我的</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport deviceMixin from '@/mixins/device.js'\n\timport messagePollingService from '@/utils/message-polling.js'\n\t\n\texport default {\n\t\tname: 'TabBar',\n\t\tmixins: [deviceMixin],\n\t\tprops: {\n\t\t\tcurrentTab: {\n\t\t\t\ttype: Number,\n\t\t\t\tdefault: 0\n\t\t\t}\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tunreadCount: 0,\n\t\t\t\tunreadCountUnsubscribe: null // 用于存储取消订阅函数\n\t\t\t}\n\t\t},\n\t\tcreated() {\n\t\t\t// 订阅未读消息数量变化\n\t\t\tthis.unreadCountUnsubscribe = messagePollingService.addUnreadCountListener(\n\t\t\t\tunreadCount => {\n\t\t\t\t\tthis.unreadCount = unreadCount;\n\t\t\t\t}\n\t\t\t);\n\t\t},\n\t\tbeforeDestroy() {\n\t\t\t// 组件销毁前取消订阅\n\t\t\tif (this.unreadCountUnsubscribe) {\n\t\t\t\tthis.unreadCountUnsubscribe();\n\t\t\t\tthis.unreadCountUnsubscribe = null;\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tswitchTab(index) {\n\t\t\t\tconst routes = [\n\t\t\t\t\t'/pages/index/index',\n\t\t\t\t\t'/pages/community/index',\n\t\t\t\t\t'/pages/publish/index',\n\t\t\t\t\t'/pages/message/index',\n\t\t\t\t\t'/pages/my/index'\n\t\t\t\t];\n\t\t\t\t\n\t\t\t\tif (index >= 0 && index < routes.length) {\n\t\t\t\t\tuni.switchTab({\n\t\t\t\t\t\turl: routes[index]\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.tab-bar {\n\t\tposition: fixed;\n\t\tbottom: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\theight: 100rpx;\n\t\tz-index: 999;\n\t}\n\t\n\t.tab-bg {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: #ffffff;\n\t\tbox-shadow: 0 -2rpx 6rpx rgba(0, 0, 0, 0.04);\n\t\tborder-top-left-radius: 30rpx;\n\t\tborder-top-right-radius: 30rpx;\n\t}\n\t\n\t.tab-content {\n\t\tposition: relative;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\theight: 100%;\n\t\tpadding: 0 20rpx;\n\t}\n\t\n\t.tab-item {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tposition: relative;\n\t}\n\t\n\t.tab-item .tab-image {\n\t\twidth: 48rpx;\n\t\theight: 48rpx;\n\t\tmargin-bottom: 4rpx;\n\t}\n\t\n\t.tab-item .tab-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #666666;\n\t}\n\t\n\t.tab-item .tab-text.active {\n\t\tcolor: #fa5e44;\n\t}\n\t\n\t/* 消息未读数角标 */\n\t.message-badge {\n\t\tposition: absolute;\n\t\ttop: -6rpx;\n\t\tright: 20rpx;\n\t\tmin-width: 32rpx;\n\t\theight: 32rpx;\n\t\tpadding: 0 6rpx;\n\t\tbackground-color: #fa5e44;\n\t\tcolor: #ffffff;\n\t\tborder-radius: 16rpx;\n\t\tfont-size: 20rpx;\n\t\tline-height: 32rpx;\n\t\ttext-align: center;\n\t\tz-index: 10;\n\t}\n\t\n\t/* 中间凹陷区域 */\n\t.center-area {\n\t\twidth: 120rpx;\n\t\theight: 120rpx;\n\t\tposition: relative;\n\t\tmargin-top: -40rpx;\n\t}\n\t\n\t/* 凹陷的圆形背景 */\n\t.center-circle {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground: #ffffff;\n\t\tborder-radius: 50%;\n\t\tbox-shadow: inset 0 4rpx 8rpx rgba(0, 0, 0, 0.1);\n\t}\n\t\n\t/* 发布按钮 */\n\t.publish-button {\n\t\tposition: absolute;\n\t\ttop: 10rpx;\n\t\tleft: 10rpx;\n\t\tright: 10rpx;\n\t\tbottom: 10rpx;\n\t\tbackground: linear-gradient(135deg, #fc3e2b 0%, #fa7154 100%);\n\t\tborder-radius: 50%;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tbox-shadow: 0 4rpx 16rpx rgba(250, 113, 84, 0.3);\n\t}\n\t\n\t.publish-button .publish-icon {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tmargin-bottom: 4rpx;\n\t}\n\t\n\t.publish-button .publish-text {\n\t\tfont-size: 24rpx;\n\t\tcolor: #ffffff;\n\t}\n</style>","import Component from 'E:/Myxiangmu/chonggou/juzitongcheng/components/tab-bar/index.vue'\nwx.createComponent(Component)"],"names":["deviceMixin","messagePollingService","uni"],"mappings":";;;;;AA6CC,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,QAAQ,CAACA,cAAAA,WAAW;AAAA,EACpB,OAAO;AAAA,IACN,YAAY;AAAA,MACX,MAAM;AAAA,MACN,SAAS;AAAA,IACV;AAAA,EACA;AAAA,EACD,OAAO;AACN,WAAO;AAAA,MACN,aAAa;AAAA,MACb,wBAAwB;AAAA;AAAA,IACzB;AAAA,EACA;AAAA,EACD,UAAU;AAET,SAAK,yBAAyBC,qBAAAA,sBAAsB;AAAA,MACnD,iBAAe;AACd,aAAK,cAAc;AAAA,MACpB;AAAA;EAED;AAAA,EACD,gBAAgB;AAEf,QAAI,KAAK,wBAAwB;AAChC,WAAK,uBAAsB;AAC3B,WAAK,yBAAyB;AAAA,IAC/B;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,UAAU,OAAO;AAChB,YAAM,SAAS;AAAA,QACd;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;AAGD,UAAI,SAAS,KAAK,QAAQ,OAAO,QAAQ;AACxCC,sBAAAA,MAAI,UAAU;AAAA,UACb,KAAK,OAAO,KAAK;AAAA,QAClB,CAAC;AAAA,MACF;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;AC3FD,GAAG,gBAAgB,SAAS;"}