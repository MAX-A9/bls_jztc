{"version":3,"file":"index.js","sources":["components/swiper-banner/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniComponent:/RTovTXl4aWFuZ211L2Nob25nZ291L2p1eml0b25nY2hlbmcvY29tcG9uZW50cy9zd2lwZXItYmFubmVyL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"swiper-banner\" v-if=\"isGlobalEnabled\">\r\n\t\t<swiper \r\n\t\t\tclass=\"swiper\" \r\n\t\t\t:circular=\"true\" \r\n\t\t\t:autoplay=\"true\" \r\n\t\t\t:interval=\"3000\" \r\n\t\t\t:duration=\"500\"\r\n\t\t\t@change=\"handleChange\"\r\n\t\t>\r\n\t\t\t<swiper-item v-for=\"(item, index) in bannerList\" :key=\"index\" @click=\"handleClick(item)\">\r\n\t\t\t\t<image :src=\"item.image\" mode=\"aspectFill\" class=\"banner-image\"></image>\r\n\t\t\t</swiper-item>\r\n\t\t</swiper>\r\n\t\t\r\n\t\t<!-- 指示点 -->\r\n\t\t<view class=\"dots\">\r\n\t\t\t<view \r\n\t\t\t\tclass=\"dot\" \r\n\t\t\t\tv-for=\"(item, index) in bannerList\" \r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\t:class=\"{ active: current === index }\"\r\n\t\t\t></view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { get } from '@/utils/request.js';\r\n\t\r\n\texport default {\r\n\t\tname: 'SwiperBanner',\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tcurrent: 0,\r\n\t\t\t\tbannerList: [],\r\n\t\t\t\tisGlobalEnabled: false\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\t// 移除自动加载，由父组件控制加载时机\r\n\t\t\t// this.fetchBannerData();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync fetchBannerData() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst result = await get('/wx/banner/list');\r\n\t\t\t\t\tif (result && result.code === 0) {\r\n\t\t\t\t\t\tthis.isGlobalEnabled = result.data.isGlobalEnabled;\r\n\t\t\t\t\t\tif (this.isGlobalEnabled && result.data.list) {\r\n\t\t\t\t\t\t\t// 按order排序\r\n\t\t\t\t\t\t\tthis.bannerList = result.data.list\r\n\t\t\t\t\t\t\t\t.filter(item => item.isEnabled)\r\n\t\t\t\t\t\t\t\t.sort((a, b) => a.order - b.order);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('获取轮播图数据失败', error);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\thandleChange(e) {\r\n\t\t\t\tthis.current = e.detail.current;\r\n\t\t\t},\r\n\t\t\thandleClick(item) {\r\n\t\t\t\tif (!item || !item.linkUrl) return;\r\n\t\t\t\t\r\n\t\t\t\tif (item.linkType === 'page') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/' + item.linkUrl,\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.error('页面跳转失败', item.linkUrl, err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (item.linkType === 'webview') {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/webview/index?url=' + encodeURIComponent(item.linkUrl),\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.error('网页跳转失败', item.linkUrl, err);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t} else if (item.linkType === 'miniprogram') {\r\n\t\t\t\t\t// 跳转到其他小程序\r\n\t\t\t\t\tuni.navigateToMiniProgram({\r\n\t\t\t\t\t\tappId: item.linkUrl,\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.error('小程序跳转失败', item.linkUrl, err);\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '跳转失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.swiper-banner {\r\n\t\tposition: relative;\r\n\t\tpadding: 0 20rpx;\r\n\t\tmargin-top: 20rpx;\r\n\t}\r\n\t\r\n\t.swiper {\r\n\t\theight: 160rpx;\r\n\t\tborder-radius: 20rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.banner-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tborder-radius: 20rpx;\r\n\t}\r\n\t\r\n\t/* 指示点样式 */\r\n\t.dots {\r\n\t\tposition: absolute;\r\n\t\tbottom: 20rpx;\r\n\t\tright: 30rpx;\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: flex-end;\r\n\t\tgap: 8rpx;\r\n\t}\r\n\t\r\n\t.dot {\r\n\t\twidth: 12rpx;\r\n\t\theight: 12rpx;\r\n\t\tbackground-color: rgba(255, 255, 255, 0.5);\r\n\t\tborder-radius: 50%;\r\n\t\ttransition: all 0.3s;\r\n\t}\r\n\t\r\n\t.dot.active {\r\n\t\twidth: 24rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tborder-radius: 6rpx;\r\n\t}\r\n</style> ","import Component from 'E:/Myxiangmu/chonggou/juzitongcheng/components/swiper-banner/index.vue'\nwx.createComponent(Component)"],"names":["get","uni"],"mappings":";;;AA8BC,MAAK,YAAU;AAAA,EACd,MAAM;AAAA,EACN,OAAO;AACN,WAAO;AAAA,MACN,SAAS;AAAA,MACT,YAAY,CAAE;AAAA,MACd,iBAAiB;AAAA,IAClB;AAAA,EACA;AAAA,EACD,UAAU;AAAA,EAGT;AAAA,EACD,SAAS;AAAA,IACR,MAAM,kBAAkB;AACvB,UAAI;AACH,cAAM,SAAS,MAAMA,kBAAI,iBAAiB;AAC1C,YAAI,UAAU,OAAO,SAAS,GAAG;AAChC,eAAK,kBAAkB,OAAO,KAAK;AACnC,cAAI,KAAK,mBAAmB,OAAO,KAAK,MAAM;AAE7C,iBAAK,aAAa,OAAO,KAAK,KAC5B,OAAO,UAAQ,KAAK,SAAS,EAC7B,KAAK,CAAC,GAAG,MAAM,EAAE,QAAQ,EAAE,KAAK;AAAA,UACnC;AAAA,QACD;AAAA,MACC,SAAO,OAAO;AACfC,sBAAA,MAAA,MAAA,SAAA,4CAAc,aAAa,KAAK;AAAA,MACjC;AAAA,IACA;AAAA,IACD,aAAa,GAAG;AACf,WAAK,UAAU,EAAE,OAAO;AAAA,IACxB;AAAA,IACD,YAAY,MAAM;AACjB,UAAI,CAAC,QAAQ,CAAC,KAAK;AAAS;AAE5B,UAAI,KAAK,aAAa,QAAQ;AAC7BA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK,MAAM,KAAK;AAAA,UAChB,MAAM,CAAC,QAAQ;AACdA,gCAAc,MAAA,SAAA,4CAAA,UAAU,KAAK,SAAS,GAAG;AAAA,UAC1C;AAAA,QACD,CAAC;AAAA,MACF,WAAW,KAAK,aAAa,WAAW;AACvCA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK,8BAA8B,mBAAmB,KAAK,OAAO;AAAA,UAClE,MAAM,CAAC,QAAQ;AACdA,gCAAc,MAAA,SAAA,4CAAA,UAAU,KAAK,SAAS,GAAG;AAAA,UAC1C;AAAA,QACD,CAAC;AAAA,MACF,WAAW,KAAK,aAAa,eAAe;AAE3CA,sBAAAA,MAAI,sBAAsB;AAAA,UACzB,OAAO,KAAK;AAAA,UACZ,MAAM,CAAC,QAAQ;AACdA,gCAAc,MAAA,SAAA,4CAAA,WAAW,KAAK,SAAS,GAAG;AAC1CA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,YACP,CAAC;AAAA,UACF;AAAA,QACD,CAAC;AAAA,MACF;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;AC9FD,GAAG,gBAAgB,SAAS;"}