{"version":3,"file":"interceptors.js","sources":["utils/interceptors.js"],"sourcesContent":["/**\r\n * 请求/响应拦截器配置\r\n * 用于添加全局请求和响应处理\r\n */\r\nimport request from './request';\r\n\r\n/**\r\n * 初始化请求拦截器\r\n */\r\nexport const setupInterceptors = () => {\r\n  // 请求拦截器 - 添加加载动画\r\n  request.interceptors.request.use(\r\n    config => {\r\n      // 显示加载动画\r\n      uni.showLoading({\r\n        title: '加载中',\r\n        mask: true\r\n      });\r\n      \r\n      // 可以在这里修改请求参数\r\n      return config;\r\n    },\r\n    error => {\r\n      // 隐藏加载动画\r\n      uni.hideLoading();\r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n\r\n  // 响应拦截器 - 处理通用响应\r\n  request.interceptors.response.use(\r\n    response => {\r\n      // 隐藏加载动画\r\n      uni.hideLoading();\r\n      \r\n      // 这里可以对响应数据做统一处理\r\n      // 例如，检查业务状态码、格式化数据等\r\n      \r\n      // 假设响应格式为 { code: 0, data: {}, message: '' }\r\n      if (response.data && response.data.code === 0) {\r\n        return response.data.data;\r\n      }\r\n      \r\n      // 处理业务错误\r\n      if (response.data && response.data.message) {\r\n        uni.showToast({\r\n          title: response.data.message,\r\n          icon: 'none'\r\n        });\r\n      }\r\n      \r\n      return response;\r\n    },\r\n    error => {\r\n      // 隐藏加载动画\r\n      uni.hideLoading();\r\n      \r\n      // 处理请求错误\r\n      if (error.errMsg) {\r\n        uni.showToast({\r\n          title: error.errMsg,\r\n          icon: 'none'\r\n        });\r\n      } else {\r\n        uni.showToast({\r\n          title: '请求失败，请检查网络',\r\n          icon: 'none'\r\n        });\r\n      }\r\n      \r\n      return Promise.reject(error);\r\n    }\r\n  );\r\n  \r\n  // 可以添加更多拦截器\r\n};\r\n\r\nexport default {\r\n  setupInterceptors\r\n}; "],"names":["request","uni"],"mappings":";;;AASY,MAAC,oBAAoB,MAAM;AAErCA,wBAAQ,aAAa,QAAQ;AAAA,IAC3B,YAAU;AAERC,oBAAAA,MAAI,YAAY;AAAA,QACd,OAAO;AAAA,QACP,MAAM;AAAA,MACd,CAAO;AAGD,aAAO;AAAA,IACR;AAAA,IACD,WAAS;AAEPA,oBAAG,MAAC,YAAW;AACf,aAAO,QAAQ,OAAO,KAAK;AAAA,IAC5B;AAAA,EACL;AAGED,wBAAQ,aAAa,SAAS;AAAA,IAC5B,cAAY;AAEVC,oBAAG,MAAC,YAAW;AAMf,UAAI,SAAS,QAAQ,SAAS,KAAK,SAAS,GAAG;AAC7C,eAAO,SAAS,KAAK;AAAA,MACtB;AAGD,UAAI,SAAS,QAAQ,SAAS,KAAK,SAAS;AAC1CA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,SAAS,KAAK;AAAA,UACrB,MAAM;AAAA,QAChB,CAAS;AAAA,MACF;AAED,aAAO;AAAA,IACR;AAAA,IACD,WAAS;AAEPA,oBAAG,MAAC,YAAW;AAGf,UAAI,MAAM,QAAQ;AAChBA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO,MAAM;AAAA,UACb,MAAM;AAAA,QAChB,CAAS;AAAA,MACT,OAAa;AACLA,sBAAAA,MAAI,UAAU;AAAA,UACZ,OAAO;AAAA,UACP,MAAM;AAAA,QAChB,CAAS;AAAA,MACF;AAED,aAAO,QAAQ,OAAO,KAAK;AAAA,IAC5B;AAAA,EACL;AAGA;;"}