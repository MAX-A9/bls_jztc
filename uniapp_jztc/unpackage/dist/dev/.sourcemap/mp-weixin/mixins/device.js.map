{"version":3,"file":"device.js","sources":["mixins/device.js"],"sourcesContent":["import { ref } from 'vue'\r\nimport deviceInfo from '@/utils/device-info.js'\r\n\r\nexport default {\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\t// 设备相关\r\n\t\t\tisIOS: false,\r\n\t\t\tisAndroid: false,\r\n\t\t\tstatusBarHeight: 20,\r\n\t\t\tnavBarHeight: 44,\r\n\t\t\t// 屏幕信息\r\n\t\t\tscreenWidth: 375,\r\n\t\t\tscreenHeight: 667,\r\n\t\t\t// 安全区域\r\n\t\t\tsafeAreaInsets: {\r\n\t\t\t\ttop: 0,\r\n\t\t\t\tright: 0,\r\n\t\t\t\tbottom: 0,\r\n\t\t\t\tleft: 0\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcreated() {\r\n\t\ttry {\r\n\t\t\t// 使用新的设备信息工具获取系统信息\r\n\t\t\tconst windowInfo = deviceInfo.getWindowInfo();\r\n\t\t\tconst appBaseInfo = deviceInfo.getAppBaseInfo();\r\n\t\t\tconst deviceData = deviceInfo.getDeviceInfo();\r\n\t\t\t\r\n\t\t\t// 判断系统类型\r\n\t\t\tthis.isIOS = (deviceData.platform === 'ios') || \r\n\t\t\t\t(/ios/i.test(deviceData.system || ''));\r\n\t\t\t\r\n\t\t\tthis.isAndroid = (deviceData.platform === 'android') || \r\n\t\t\t\t(/android/i.test(deviceData.system || ''));\r\n\t\t\t\r\n\t\t\t// 获取状态栏高度\r\n\t\t\tthis.statusBarHeight = windowInfo.statusBarHeight || 20;\r\n\t\t\t\r\n\t\t\t// 设置导航栏高度\r\n\t\t\tthis.navBarHeight = this.isIOS ? 44 : 48;\r\n\t\t\t\r\n\t\t\t// 获取屏幕信息\r\n\t\t\tthis.screenWidth = windowInfo.screenWidth || 375;\r\n\t\t\tthis.screenHeight = windowInfo.screenHeight || 667;\r\n\t\t\t\r\n\t\t\t// 获取安全区域\r\n\t\t\tconst safeAreaInsets = deviceInfo.getSafeAreaInsets();\r\n\t\t\tif (safeAreaInsets) {\r\n\t\t\t\tthis.safeAreaInsets = safeAreaInsets;\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tconsole.error('初始化设备信息失败:', error);\r\n\t\t\t// 使用默认值继续\r\n\t\t}\r\n\t},\r\n\tcomputed: {\r\n\t\t// 状态栏+导航栏的总高度\r\n\t\tnavigationBarHeight() {\r\n\t\t\treturn this.statusBarHeight + this.navBarHeight\r\n\t\t},\r\n\t\t// 获取安全区域高度\r\n\t\tsafeAreaHeight() {\r\n\t\t\treturn this.screenHeight - this.safeAreaInsets.top - this.safeAreaInsets.bottom\r\n\t\t},\r\n\t\t// 获取内容区域高度(去除导航栏和安全区域)\r\n\t\tcontentHeight() {\r\n\t\t\treturn this.safeAreaHeight - this.navigationBarHeight\r\n\t\t}\r\n\t},\r\n\tmethods: {\r\n\t\t// rpx 转 px\r\n\t\trpx2px(rpx) {\r\n\t\t\treturn deviceInfo.rpx2px(rpx);\r\n\t\t},\r\n\t\t// px 转 rpx\r\n\t\tpx2rpx(px) {\r\n\t\t\treturn deviceInfo.px2rpx(px);\r\n\t\t},\r\n\t\t// 判断是否为 iPhone X 系列\r\n\t\tisIphoneX() {\r\n\t\t\treturn deviceInfo.isIphoneX();\r\n\t\t},\r\n\t\t// 获取底部安全距离\r\n\t\tgetBottomSafeDistance() {\r\n\t\t\treturn this.isIphoneX() ? this.safeAreaInsets.bottom : 0\r\n\t\t},\r\n\t\t// 获取适配后的安全区域\r\n\t\tgetSafeAreaInsets() {\r\n\t\t\treturn {\r\n\t\t\t\ttop: `${this.safeAreaInsets.top}px`,\r\n\t\t\t\tright: `${this.safeAreaInsets.right}px`,\r\n\t\t\t\tbottom: `${this.safeAreaInsets.bottom}px`,\r\n\t\t\t\tleft: `${this.safeAreaInsets.left}px`\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n} "],"names":["deviceInfo","uni"],"mappings":";;;AAGA,MAAe,cAAA;AAAA,EACd,OAAO;AACN,WAAO;AAAA;AAAA,MAEN,OAAO;AAAA,MACP,WAAW;AAAA,MACX,iBAAiB;AAAA,MACjB,cAAc;AAAA;AAAA,MAEd,aAAa;AAAA,MACb,cAAc;AAAA;AAAA,MAEd,gBAAgB;AAAA,QACf,KAAK;AAAA,QACL,OAAO;AAAA,QACP,QAAQ;AAAA,QACR,MAAM;AAAA,MACN;AAAA,IACD;AAAA,EACD;AAAA,EACD,UAAU;AACT,QAAI;AAEH,YAAM,aAAaA,4BAAW;AAC9B,YAAM,cAAcA,4BAAW;AAC/B,YAAM,aAAaA,4BAAW;AAG9B,WAAK,QAAS,WAAW,aAAa,SACpC,OAAO,KAAK,WAAW,UAAU,EAAE;AAErC,WAAK,YAAa,WAAW,aAAa,aACxC,WAAW,KAAK,WAAW,UAAU,EAAE;AAGzC,WAAK,kBAAkB,WAAW,mBAAmB;AAGrD,WAAK,eAAe,KAAK,QAAQ,KAAK;AAGtC,WAAK,cAAc,WAAW,eAAe;AAC7C,WAAK,eAAe,WAAW,gBAAgB;AAG/C,YAAM,iBAAiBA,4BAAW;AAClC,UAAI,gBAAgB;AACnB,aAAK,iBAAiB;AAAA,MACtB;AAAA,IACD,SAAQ,OAAO;AACfC,oBAAA,MAAA,MAAA,SAAA,0BAAc,cAAc,KAAK;AAAA,IAEjC;AAAA,EACD;AAAA,EACD,UAAU;AAAA;AAAA,IAET,sBAAsB;AACrB,aAAO,KAAK,kBAAkB,KAAK;AAAA,IACnC;AAAA;AAAA,IAED,iBAAiB;AAChB,aAAO,KAAK,eAAe,KAAK,eAAe,MAAM,KAAK,eAAe;AAAA,IACzE;AAAA;AAAA,IAED,gBAAgB;AACf,aAAO,KAAK,iBAAiB,KAAK;AAAA,IAClC;AAAA,EACD;AAAA,EACD,SAAS;AAAA;AAAA,IAER,OAAO,KAAK;AACX,aAAOD,iBAAU,WAAC,OAAO,GAAG;AAAA,IAC5B;AAAA;AAAA,IAED,OAAO,IAAI;AACV,aAAOA,iBAAU,WAAC,OAAO,EAAE;AAAA,IAC3B;AAAA;AAAA,IAED,YAAY;AACX,aAAOA,iBAAAA,WAAW;IAClB;AAAA;AAAA,IAED,wBAAwB;AACvB,aAAO,KAAK,UAAW,IAAG,KAAK,eAAe,SAAS;AAAA,IACvD;AAAA;AAAA,IAED,oBAAoB;AACnB,aAAO;AAAA,QACN,KAAK,GAAG,KAAK,eAAe,GAAG;AAAA,QAC/B,OAAO,GAAG,KAAK,eAAe,KAAK;AAAA,QACnC,QAAQ,GAAG,KAAK,eAAe,MAAM;AAAA,QACrC,MAAM,GAAG,KAAK,eAAe,IAAI;AAAA,MACjC;AAAA,IACD;AAAA,EACD;AACF;;"}