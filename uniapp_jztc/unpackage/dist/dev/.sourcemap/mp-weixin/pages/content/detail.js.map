{"version":3,"file":"detail.js","sources":["pages/content/detail.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvY29udGVudC9kZXRhaWwudnVl"],"sourcesContent":["<template>\n\t<view class=\"container\" :style=\"pageStyle\">\n\t\t<!-- 自定义导航栏 -->\n\t\t<view class=\"nav-bar\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n\t\t\t<view class=\"nav-content\">\n\t\t\t\t<view class=\"back-btn\" @tap=\"handleBack\">\n\t\t\t\t\t<uni-icons type=\"left\" size=\"20\" color=\"#333333\"></uni-icons>\n\t\t\t\t</view>\n\t\t\t\t<text class=\"nav-title\">{{pageTitle}}</text>\n\t\t\t</view>\n\t\t</view>\n\n\t\t<!-- 内容区域 -->\n\t\t<scroll-view \n\t\t\tclass=\"content-scroll\" \n\t\t\tscroll-y \n\t\t\t:style=\"{ top: navigationBarHeight + 'px' }\"\n\t\t>\n\t\t\t<!-- 加载中 -->\n\t\t\t<view class=\"loading-container\" v-if=\"loading\">\n\t\t\t\t<view class=\"loading-indicator\"></view>\n\t\t\t\t<text class=\"loading-text\">内容加载中...</text>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 加载失败 -->\n\t\t\t<view class=\"error-container\" v-if=\"loadError\">\n\t\t\t\t<text class=\"error-text\">{{errorMsg}}</text>\n\t\t\t\t<view class=\"retry-btn\" @tap=\"loadDetail\">重新加载</view>\n\t\t\t</view>\n\t\t\t\n\t\t\t<!-- 内容展示 -->\n\t\t\t<view class=\"content-wrapper\" v-if=\"!loading && !loadError\">\n\t\t\t\t<!-- 标签区域 -->\n\t\t\t\t<view class=\"tag-row\">\n\t\t\t\t\t<view class=\"tag top-tag\" v-if=\"contentData.isTop\">置顶</view>\n\t\t\t\t\t<view class=\"tag category-tag\">{{contentData.category}}</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 标题 -->\n\t\t\t\t<view class=\"content-title\">{{contentData.title}}</view>\n\t\t\t\t\n\t\t\t\t<!-- 发布信息 -->\n\t\t\t\t<view class=\"publish-info\">\n\t\t\t\t\t<text class=\"publisher\">{{contentData.publisher}}</text>\n\t\t\t\t\t<text class=\"publish-time\">{{contentData.publishTime}}</text>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 内容区域 -->\n\t\t\t\t<view class=\"content-body\">\n\t\t\t\t\t<!-- 文字内容 -->\n\t\t\t\t\t<view class=\"content-text\" v-if=\"contentData.content\">\n\t\t\t\t\t\t<rich-text :nodes=\"contentData.content\"></rich-text>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 图片内容 -->\n\t\t\t\t\t<view class=\"image-list\" v-if=\"contentData.images && contentData.images.length\">\n\t\t\t\t\t\t<image \n\t\t\t\t\t\t\tv-for=\"(img, index) in contentData.images\" \n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t:src=\"img\"\n\t\t\t\t\t\t\tmode=\"widthFix\"\n\t\t\t\t\t\t\t@tap=\"previewImage(index)\"\n\t\t\t\t\t\t></image>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 发布人信息 -->\n\t\t\t\t<view class=\"publisher-card\">\n\t\t\t\t\t<view class=\"publisher-info\">\n\t\t\t\t\t\t<view class=\"publisher-left\">\n\t\t\t\t\t\t\t<image class=\"avatar\" :src=\"contentData.publisher_avatar\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"info-content\">\n\t\t\t\t\t\t\t\t<text class=\"name\">{{contentData.publisher_name}}</text>\n\t\t\t\t\t\t\t\t<text class=\"publish-count\">已发布 {{contentData.publish_count}} 条</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"follow-btn\" @tap=\"handleFollow\">\n\t\t\t\t\t\t\t<text>{{isFollowed ? '已关注' : '关注'}}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- Banner -->\n\t\t\t\t<view class=\"banner-container\" v-if=\"bannerList.length > 0\">\n\t\t\t\t\t<swiper \n\t\t\t\t\t\tclass=\"banner-swiper\" \n\t\t\t\t\t\t:circular=\"true\" \n\t\t\t\t\t\t:autoplay=\"true\" \n\t\t\t\t\t\t:interval=\"3000\" \n\t\t\t\t\t\t:duration=\"500\"\n\t\t\t\t\t\t@change=\"handleSwiperChange\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<swiper-item v-for=\"(item, index) in bannerList\" :key=\"index\" @tap=\"handleBannerClick(item)\">\n\t\t\t\t\t\t\t<image :src=\"item.image\" mode=\"aspectFill\" class=\"banner-image\"></image>\n\t\t\t\t\t\t</swiper-item>\n\t\t\t\t\t</swiper>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 指示点 -->\n\t\t\t\t\t<view class=\"dots\" v-if=\"bannerList.length > 1\">\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tclass=\"dot\" \n\t\t\t\t\t\t\tv-for=\"(item, index) in bannerList\" \n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t:class=\"{ active: currentBannerIndex === index }\"\n\t\t\t\t\t\t></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 留言区域 -->\n\t\t\t\t<view class=\"comment-section\">\n\t\t\t\t\t<view class=\"comment-header\">\n\t\t\t\t\t\t<text class=\"comment-title\">留言 {{contentData.comment_count}}</text>\n\t\t\t\t\t\t<view class=\"comment-btn\" @tap=\"handleComment\">\n\t\t\t\t\t\t\t<uni-icons type=\"chat\" size=\"14\" color=\"#007AFF\"></uni-icons>\n\t\t\t\t\t\t\t<text>我要留言</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t<!-- 留言列表 -->\n\t\t\t\t\t<view class=\"comment-list\" v-if=\"contentData.comments && contentData.comments.length\">\n\t\t\t\t\t\t<view class=\"comment-item\" v-for=\"(comment, index) in contentData.comments\" :key=\"index\">\n\t\t\t\t\t\t\t<image class=\"comment-avatar\" :src=\"comment.avatar\" mode=\"aspectFill\"></image>\n\t\t\t\t\t\t\t<view class=\"comment-content\">\n\t\t\t\t\t\t\t\t<text class=\"comment-name\">{{comment.name}}</text>\n\t\t\t\t\t\t\t\t<text class=\"comment-text\">{{comment.content}}</text>\n\t\t\t\t\t\t\t\t<text class=\"comment-time\">{{comment.time}}</text>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t\n\t\t<!-- 底部固定操作栏 -->\n\t\t<action-bar \n\t\t\t:is-collected=\"isCollected\"\n\t\t\t:publisher=\"{id: contentData.publisher_id, name: contentData.publisher_name}\"\n\t\t\t@comment=\"handleComment\"\n\t\t\t@collect=\"handleCollect\"\n\t\t\t@share=\"handleShare\"\n\t\t\t@message=\"handleMessage\"\n\t\t/>\n\t</view>\n</template>\n\n<script>\n\timport deviceAdapter from '@/mixins/device-adapter.js'\n\timport shareMixin from '@/mixins/share.js'\n\timport { getPublicContentDetail, getCommentList, addFavorite, cancelFavorite, getFavoriteStatus, addBrowseRecord, getPublisherInfo, followUser, unfollowUser, getPublisherFollowStatus } from '@/apis/content.js'\n\timport { createComment } from '@/apis/content.js'\n\timport { formatTimeAgo } from '@/utils/date.js'\n\timport ActionBar from '@/components/action-bar/index.vue'\n\timport { get } from '@/utils/request.js'\n\timport { createConversation } from '@/apis/message.js'\n\timport { getShareSettings } from '@/utils/share.js'\n\t\n\texport default {\n\t\tmixins: [deviceAdapter, shareMixin],\n\t\tcomponents: {\n\t\t\tActionBar\n\t\t},\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tcontentId: null,\n\t\t\t\tcontentData: {\n\t\t\t\t\tid: '',\n\t\t\t\t\ttitle: '',\n\t\t\t\t\tcontent: '',\n\t\t\t\t\tcategory: '',\n\t\t\t\t\tpublisher: '',\n\t\t\t\t\tpublishTime: '',\n\t\t\t\t\tpublisher_name: '',\n\t\t\t\t\tpublisher_id: '',\n\t\t\t\t\tpublisher_avatar: '',\n\t\t\t\t\timages: [],\n\t\t\t\t\tisTop: false,\n\t\t\t\t\tpublish_count: 0,\n\t\t\t\t\tcomment_count: 0,\n\t\t\t\t\tcomments: [],\n\t\t\t\t\tcover: '', // 添加封面图属性，用于分享\n\t\t\t\t},\n\t\t\t\tloading: false,\n\t\t\t\tloadError: false,\n\t\t\t\terrorMsg: '',\n\t\t\t\tisFollowed: false,\n\t\t\t\tisCollected: false,\n\t\t\t\tcommentLoading: false,\n\t\t\t\tbannerList: [],\n\t\t\t\tcurrentBannerIndex: 0,\n\t\t\t\tisContentPage: true, // 标记为内容页面，用于分享功能\n\t\t\t}\n\t\t},\n\t\tcomputed: {\n\t\t\tpageTitle() {\n\t\t\t\treturn this.contentData?.title || '内容详情'\n\t\t\t},\n\t\t\tpageStyle() {\n\t\t\t\treturn {\n\t\t\t\t\t'--nav-height': `${this.layoutSize.navHeight}px`,\n\t\t\t\t\t'--content-padding': `${this.layoutSize.contentPadding}rpx`\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonLoad(options) {\n\t\t\t// 获取内容ID\n\t\t\tif (options.id) {\n\t\t\t\tthis.contentId = options.id\n\t\t\t\t// 加载内容详情\n\t\t\t\tthis.loadDetail()\n\t\t\t\t// 加载轮播图数据\n\t\t\t\tthis.loadBannerData()\n\t\t\t} else {\n\t\t\t\tthis.loadError = true\n\t\t\t\tthis.errorMsg = '参数错误，缺少内容ID'\n\t\t\t}\n\t\t},\n\t\tonShow() {\n\t\t\t// 确保分享功能启用，使用最新配置\n\t\t\tthis.updateShareData();\n\t\t},\n\t\tmethods: {\n\t\t\t// 过滤HTML内容中的图片标签\n\t\t\tfilterImgTags(htmlContent) {\n\t\t\t\tif (!htmlContent) return '';\n\t\t\t\t// 使用正则表达式移除img标签\n\t\t\t\treturn htmlContent.replace(/<img[^>]*>/g, '');\n\t\t\t},\n\t\t\t\n\t\t\t// 格式化发布时间为\"多久前\"\n\t\t\tformatPublishTime(time) {\n\t\t\t\tif (!time) return '';\n\t\t\t\treturn formatTimeAgo(time);\n\t\t\t},\n\t\t\t\n\t\t\t// 加载内容详情\n\t\t\tasync loadDetail() {\n\t\t\t\tif (!this.contentId) {\n\t\t\t\t\tthis.loadError = true\n\t\t\t\t\tthis.errorMsg = '内容ID无效'\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.loading = true\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\t// 调用接口获取详情\n\t\t\t\t\tconst result = await getPublicContentDetail(this.contentId)\n\t\t\t\t\t\n\t\t\t\t\tif (result.code === 0 && result.data) {\n\t\t\t\t\t\t// 获取数据成功\n\t\t\t\t\t\tconst data = result.data\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 过滤content中的img标签\n\t\t\t\t\t\tconst filteredContent = this.filterImgTags(data.content)\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 格式化发布时间\n\t\t\t\t\t\tconst formattedTime = this.formatPublishTime(data.publishTime)\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 更新内容数据\n\t\t\t\t\t\tthis.contentData = {\n\t\t\t\t\t\t\tid: data.id,\n\t\t\t\t\t\t\ttitle: data.title || '',\n\t\t\t\t\t\t\tcontent: filteredContent,\n\t\t\t\t\t\t\tcategory: data.category || '',\n\t\t\t\t\t\t\tpublishTime: formattedTime,\n\t\t\t\t\t\t\tpublisher: data.publisher || '',\n\t\t\t\t\t\t\tpublisher_name: data.publisher || '',\n\t\t\t\t\t\t\tpublisher_id: data.publisher_id || '',\n\t\t\t\t\t\t\tpublisher_avatar: '',\n\t\t\t\t\t\t\tisTop: data.isTop || false,\n\t\t\t\t\t\t\timages: data.images || [],\n\t\t\t\t\t\t\tpublish_count: 0,\n\t\t\t\t\t\t\tcomment_count: 0,\n\t\t\t\t\t\t\tcomments: [],\n\t\t\t\t\t\t\tcover: data.cover || (data.images && data.images.length > 0 ? data.images[0] : ''), // 优先使用封面图，其次使用第一张图片\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 加载评论列表\n\t\t\t\t\t\tthis.loadComments()\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 加载收藏状态\n\t\t\t\t\t\tthis.loadFavoriteStatus()\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 加载发布者信息（确保有publisher_id才调用）\n\t\t\t\t\t\tif (this.contentData.publisher_id) {\n\t\t\t\t\t\t\tthis.loadPublisherInfo()\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 在内容成功加载后记录浏览历史\n\t\t\t\t\t\tthis.recordBrowseHistory()\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 更新分享数据\n\t\t\t\t\t\tthis.updateShareData()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(result.message || '获取内容详情失败')\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('加载内容详情失败:', error)\n\t\t\t\t\tthis.loadError = true\n\t\t\t\t\tthis.errorMsg = error.message || '加载失败，请重试'\n\t\t\t\t} finally {\n\t\t\t\t\tthis.loading = false\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 加载收藏状态\n\t\t\tasync loadFavoriteStatus() {\n\t\t\t\ttry {\n\t\t\t\t\tconst result = await getFavoriteStatus(this.contentId)\n\t\t\t\t\tif (result.code === 0 && result.data) {\n\t\t\t\t\t\tthis.isCollected = result.data.isFavorite\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('获取收藏状态失败:', error)\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 加载评论列表\n\t\t\tasync loadComments() {\n\t\t\t\tif (!this.contentData.id) return\n\t\t\t\t\n\t\t\t\tthis.commentLoading = true\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\tconst result = await getCommentList(this.contentData.id, {\n\t\t\t\t\t\tpage: 1,\n\t\t\t\t\t\tpageSize: 10\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tif (result.code === 0 && result.data) {\n\t\t\t\t\t\t// 格式化评论数据，适配实际API返回的字段名\n\t\t\t\t\t\tthis.contentData.comments = (result.data.list || []).map(item => ({\n\t\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\t\tavatar: item.avatarUrl || '',\n\t\t\t\t\t\t\tname: item.realName || '匿名用户',\n\t\t\t\t\t\t\tcontent: item.comment || '',\n\t\t\t\t\t\t\ttime: this.formatPublishTime(item.createdAt)\n\t\t\t\t\t\t}))\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 更新评论总数\n\t\t\t\t\t\tif (result.data.total !== undefined) {\n\t\t\t\t\t\t\tthis.contentData.comment_count = result.data.total\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('获取评论列表失败:', result.message)\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('加载评论失败:', error)\n\t\t\t\t} finally {\n\t\t\t\t\tthis.commentLoading = false\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleBack() {\n\t\t\t\tuni.navigateBack()\n\t\t\t},\n\t\t\tpreviewImage(index) {\n\t\t\t\tuni.previewImage({\n\t\t\t\t\tcurrent: index,\n\t\t\t\t\turls: this.contentData.images,\n\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\tconsole.log('图片预览成功')\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('图片预览失败:', err)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t},\n\t\t\tasync handleFollow() {\n\t\t\t\ttry {\n\t\t\t\t\t// 安全检查：确保publisher_id非空\n\t\t\t\t\tconst publisherId = this.contentData.publisher_id;\n\t\t\t\t\tif (!publisherId) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '无法获取发布者信息',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 显示加载提示\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: this.isFollowed ? '取消关注中...' : '关注中...',\n\t\t\t\t\t\tmask: true\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\t// 根据当前关注状态调用不同的API\n\t\t\t\t\tlet result;\n\t\t\t\t\tif (this.isFollowed) {\n\t\t\t\t\t\t// 已关注，执行取消关注\n\t\t\t\t\t\tresult = await unfollowUser({\n\t\t\t\t\t\t\tpublisher_id: publisherId\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 未关注，执行关注\n\t\t\t\t\t\tresult = await followUser({\n\t\t\t\t\t\t\tpublisher_id: publisherId\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 关闭加载提示\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\n\t\t\t\t\tif (result && result.code === 0) {\n\t\t\t\t\t\t// 切换关注状态\n\t\t\t\t\t\tthis.isFollowed = !this.isFollowed;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 显示操作成功提示\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: this.isFollowed ? '已关注' : '已取消关注',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(result?.message || '操作失败');\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\t// 确保加载提示已关闭\n\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\n\t\t\t\t\tconsole.error('关注操作失败:', error);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: error.message || '操作失败，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleComment() {\n\t\t\t\tuni.showModal({\n\t\t\t\t\ttitle: '留言',\n\t\t\t\t\teditable: true,\n\t\t\t\t\tplaceholderText: '请输入留言内容',\n\t\t\t\t\tsuccess: async (res) => {\n\t\t\t\t\t\tif (res.confirm && res.content) {\n\t\t\t\t\t\t\t// 先定义一个变量标记是否已显示loading\n\t\t\t\t\t\t\tlet loadingShown = false;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t// 调用创建评论接口\n\t\t\t\t\t\t\t\tconst commentData = {\n\t\t\t\t\t\t\t\t\tcomment: res.content,\n\t\t\t\t\t\t\t\t\tcontentId: this.contentId\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 显示加载提示\n\t\t\t\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\t\t\t\ttitle: '提交中...'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tloadingShown = true;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconst result = await createComment(commentData);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 操作完成，隐藏加载提示\n\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\tloadingShown = false;\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tif (result.code === 0) {\n\t\t\t\t\t\t\t\t\t// 评论成功\n\t\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\t\ttitle: '留言成功',\n\t\t\t\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 刷新评论列表，而不是直接添加到本地\n\t\t\t\t\t\t\t\t\tthis.loadComments();\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthrow new Error(result.message || '评论失败');\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\t\t// 确保发生异常时也会隐藏加载提示\n\t\t\t\t\t\t\t\tif (loadingShown) {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t\tloadingShown = false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconsole.error('提交评论失败:', error);\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: error.message || '留言失败，请重试',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t} finally {\n\t\t\t\t\t\t\t\t// 最后一道防线，确保无论如何都会隐藏加载提示\n\t\t\t\t\t\t\t\tif (loadingShown) {\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\thandleShare() {\n\t\t\t\t// 更新分享数据\n\t\t\t\tthis.updateShareData();\n\t\t\t\t// 显示分享菜单，包括分享朋友圈\n\t\t\t\tuni.showShareMenu({\n\t\t\t\t\twithShareTicket: true,\n\t\t\t\t\tmenus: ['shareAppMessage', 'shareTimeline']\n\t\t\t\t});\n\t\t\t},\n\t\t\tasync handleMessage() {\n\t\t\t\t// 获取发布者ID\n\t\t\t\tconst publisherId = this.contentData.publisher_id || '';\n\t\t\t\tif (!publisherId) {\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '无法获取发布者信息',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\ttry {\n\t\t\t\t\t// 调用创建会话接口\n\t\t\t\t\tconst result = await createConversation({\n\t\t\t\t\t\ttargetId: parseInt(publisherId)\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tif (result && result.code === 0) {\n\t\t\t\t\t\t// 会话创建成功后，跳转到聊天页面\n\t\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\t\turl: `/pages/chat/detail?id=${publisherId}&nickName=${encodeURIComponent(this.contentData.publisher_name || '用户')}`,\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tconsole.error('跳转到聊天页面失败:', err);\n\t\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\t\ttitle: '无法打开聊天页面',\n\t\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(result?.message || '创建会话失败');\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('私信功能错误:', error);\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: '无法发起私信，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 处理收藏\n\t\t\tasync handleCollect() {\n\t\t\t\ttry {\n\t\t\t\t\t// 显示加载提示\n\t\t\t\t\tuni.showLoading({\n\t\t\t\t\t\ttitle: this.isCollected ? '取消收藏中...' : '收藏中...',\n\t\t\t\t\t\tmask: true\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\t// 调用接口\n\t\t\t\t\tlet result\n\t\t\t\t\tif (this.isCollected) {\n\t\t\t\t\t\t// 已收藏，执行取消收藏\n\t\t\t\t\t\tresult = await cancelFavorite(this.contentId)\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 未收藏，执行添加收藏\n\t\t\t\t\t\tresult = await addFavorite(this.contentId)\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 关闭加载提示\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\t\n\t\t\t\t\tif (result.code === 0) {\n\t\t\t\t\t\t// 操作成功，更新状态\n\t\t\t\t\t\tthis.isCollected = !this.isCollected\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: this.isCollected ? '已收藏' : '已取消收藏',\n\t\t\t\t\t\t\ticon: 'success'\n\t\t\t\t\t\t})\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthrow new Error(result.message || '操作失败')\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tuni.hideLoading()\n\t\t\t\t\tconsole.error('收藏操作失败:', error)\n\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\ttitle: error.message || '操作失败，请重试',\n\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleBannerClick(item) {\n\t\t\t\t// 处理Banner点击事件\n\t\t\t\tif (!item || !item.linkUrl) return;\n\t\t\t\t\n\t\t\t\tif (item.linkType === 'page') {\n\t\t\t\t\tuni.navigateTo({\n\t\t\t\t\t\turl: '/' + item.linkUrl,\n\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\tconsole.error('页面跳转失败', item.linkUrl, err);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else if (item.linkType === 'webview') {\n\t\t\t\t\t// 检查URL是否有效\n\t\t\t\t\tif (!this.isValidUrl(item.linkUrl)) {\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '无效的URL',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 添加安全处理\n\t\t\t\t\tif (typeof wx !== 'undefined' && wx.setWebViewSecurity) {\n\t\t\t\t\t\t// 先设置WebView安全模式\n\t\t\t\t\t\twx.setWebViewSecurity({\n\t\t\t\t\t\t\tenable: true,\n\t\t\t\t\t\t\tsuccess: () => {\n\t\t\t\t\t\t\t\tconsole.log('成功设置WebView安全模式');\n\t\t\t\t\t\t\t\tthis.navigateToWebView(item.linkUrl);\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\t\tconsole.error('设置WebView安全模式失败:', err);\n\t\t\t\t\t\t\t\t// 失败也继续跳转，但可能会有警告\n\t\t\t\t\t\t\t\tthis.navigateToWebView(item.linkUrl);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 如果不支持setWebViewSecurity，直接跳转\n\t\t\t\t\t\tthis.navigateToWebView(item.linkUrl);\n\t\t\t\t\t}\n\t\t\t\t} else if (item.linkType === 'miniprogram') {\n\t\t\t\t\t// 跳转到其他小程序\n\t\t\t\t\tuni.navigateToMiniProgram({\n\t\t\t\t\t\tappId: item.linkUrl,\n\t\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\t\tconsole.error('小程序跳转失败', item.linkUrl, err);\n\t\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\t\ttitle: '跳转失败',\n\t\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 检查URL是否有效\n\t\t\tisValidUrl(url) {\n\t\t\t\tif (!url) return false;\n\t\t\t\ttry {\n\t\t\t\t\tnew URL(url);\n\t\t\t\t\treturn true;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 导航到WebView页面\n\t\t\tnavigateToWebView(url) {\n\t\t\t\t// 添加跨源隔离参数\n\t\t\t\tconst separator = url.includes('?') ? '&' : '?';\n\t\t\t\tconst secureParams = `${separator}coop=cross-origin&coep=require-corp`;\n\t\t\t\tlet secureUrl = url;\n\t\t\t\t\n\t\t\t\t// 只对http和https开头的URL添加参数\n\t\t\t\tif (url.startsWith('http://') || url.startsWith('https://')) {\n\t\t\t\t\t// 为了不修改原始URL太多，只添加必要的跨源隔离参数\n\t\t\t\t\tsecureUrl = url + secureParams;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 跳转到WebView页面\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/webview/index?url=' + encodeURIComponent(secureUrl),\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.error('网页跳转失败', url, err);\n\t\t\t\t\t\tuni.showToast({\n\t\t\t\t\t\t\ttitle: '网页打开失败',\n\t\t\t\t\t\t\ticon: 'none'\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\t// 记录浏览历史 - 简化错误处理\n\t\t\tasync recordBrowseHistory() {\n\t\t\t\ttry {\n\t\t\t\t\t// 使用服务器返回的内容ID，而不是路由参数中的ID\n\t\t\t\t\tconst contentId = this.contentData.id || this.contentId;\n\t\t\t\t\tif (!contentId) {\n\t\t\t\t\t\tconsole.error('记录浏览历史失败: 缺少有效的内容ID');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 使用article作为内容类型\n\t\t\t\t\tawait addBrowseRecord(contentId, 'article');\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('记录浏览历史失败:', error);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 加载发布者信息\n\t\t\tasync loadPublisherInfo() {\n\t\t\t\ttry {\n\t\t\t\t\t// 安全检查：确保publisher_id存在且有效\n\t\t\t\t\tconst publisherId = this.contentData.publisher_id;\n\t\t\t\t\tif (!publisherId) {\n\t\t\t\t\t\tconsole.error('无法加载发布者信息: publisher_id不存在');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t// 将publisherId转换为字符串\n\t\t\t\t\tconst publisherIdStr = String(publisherId);\n\t\t\t\t\t\n\t\t\t\t\t// 调用API获取发布者信息\n\t\t\t\t\tconst result = await getPublisherInfo(publisherIdStr);\n\t\t\t\t\t\n\t\t\t\t\t// 检查API返回结果\n\t\t\t\t\tif (result && result.code === 0 && result.data) {\n\t\t\t\t\t\t// 获取数据\n\t\t\t\t\t\tconst publisherData = result.data;\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 安全地更新UI数据，使用API返回的字段\n\t\t\t\t\t\tif (publisherData.real_name) {\n\t\t\t\t\t\t\tthis.contentData.publisher_name = publisherData.real_name;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (publisherData.avatar_url) {\n\t\t\t\t\t\t\tthis.contentData.publisher_avatar = publisherData.avatar_url;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (publisherData.publish_count !== undefined) {\n\t\t\t\t\t\t\tthis.contentData.publish_count = publisherData.publish_count;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 加载关注状态\n\t\t\t\t\t\tawait this.loadFollowStatus(publisherIdStr);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('获取发布者信息失败:', result?.message || '未知错误');\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('加载发布者信息异常:', error);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 加载关注状态\n\t\t\tasync loadFollowStatus(publisherId) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!publisherId) {\n\t\t\t\t\t\tconsole.error('无法获取关注状态: publisher_id不存在');\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tconst result = await getPublisherFollowStatus(publisherId);\n\t\t\t\t\t\n\t\t\t\t\tif (result && result.code === 0 && result.data) {\n\t\t\t\t\t\t// 更新关注状态\n\t\t\t\t\t\tthis.isFollowed = !!result.data.is_followed;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.error('获取关注状态失败:', result?.message || '未知错误');\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('加载关注状态异常:', error);\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 加载轮播图数据\n\t\t\tasync loadBannerData() {\n\t\t\t\ttry {\n\t\t\t\t\tconst result = await get('/wx/inner-banner/list', {\n\t\t\t\t\t\tbannerType: 'home'\n\t\t\t\t\t})\n\t\t\t\t\t\n\t\t\t\t\tif (result && result.code === 0 && result.data) {\n\t\t\t\t\t\t// 根据返回结果，更新轮播图数据\n\t\t\t\t\t\tif (result.data.isGlobalEnabled && result.data.list && result.data.list.length > 0) {\n\t\t\t\t\t\t\tthis.bannerList = result.data.list\n\t\t\t\t\t\t\t\t.filter(item => item.isEnabled)\n\t\t\t\t\t\t\t\t.sort((a, b) => a.order - b.order)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('获取轮播图数据失败', error)\n\t\t\t\t}\n\t\t\t},\n\t\t\thandleSwiperChange(e) {\n\t\t\t\tthis.currentBannerIndex = e.detail.current;\n\t\t\t},\n\t\t\t// 更新分享数据\n\t\t\tasync updateShareData() {\n\t\t\t\ttry {\n\t\t\t\t\t// 获取分享配置\n\t\t\t\t\tconst settings = await getShareSettings();\n\t\t\t\t\t\n\t\t\t\t\tif (settings && this.contentData) {\n\t\t\t\t\t\t// 分享标题处理\n\t\t\t\t\t\t// 1. 如果有内容标题，优先使用内容标题\n\t\t\t\t\t\t// 2. 否则使用后端配置的content_share_text\n\t\t\t\t\t\tconst shareTitle = this.contentData.title || settings.content_share_text || '查看内容详情';\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 分享图片处理：\n\t\t\t\t\t\t// 1. 优先使用内容页自带的封面图\n\t\t\t\t\t\t// 2. 如果没有封面图，使用内容的第一张图片\n\t\t\t\t\t\t// 3. 如果都没有，使用后端配置的content_share_image\n\t\t\t\t\t\tlet shareImage = '';\n\t\t\t\t\t\tif (this.contentData.cover) {\n\t\t\t\t\t\t\tshareImage = this.contentData.cover;\n\t\t\t\t\t\t} else if (this.contentData.images && this.contentData.images.length > 0) {\n\t\t\t\t\t\t\tshareImage = this.contentData.images[0];\n\t\t\t\t\t\t} else if (settings.content_share_image) {\n\t\t\t\t\t\t\tshareImage = settings.content_share_image;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 直接设置分享数据，避免再次调用initShareData从而获得更精确的控制\n\t\t\t\t\t\tthis.shareData = {\n\t\t\t\t\t\t\ttitle: shareTitle,\n\t\t\t\t\t\t\timageUrl: shareImage,\n\t\t\t\t\t\t\tpath: `/pages/content/detail?id=${this.contentId}`\n\t\t\t\t\t\t};\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log('内容分享数据已更新:', this.shareData);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// 配置获取失败，调用混入的默认初始化\n\t\t\t\t\t\tthis.initShareData();\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error('更新分享数据失败:', error);\n\t\t\t\t\t// 配置获取失败，调用混入的默认初始化\n\t\t\t\t\tthis.initShareData();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\t.container {\n\t\twidth: 100%;\n\t\tmin-height: 100vh;\n\t\tposition: relative;\n\t\tbackground-color: #FFFFFF;\n\t}\n\t\n\t/* 导航栏 */\n\t.nav-bar {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tz-index: 2;\n\t\tbackground-color: #FFFFFF;\n\t\tborder-bottom: 1rpx solid #EEEEEE;\n\t}\n\t\n\t.nav-content {\n\t\theight: 44px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tposition: relative;\n\t}\n\t\n\t.back-btn {\n\t\tposition: absolute;\n\t\tleft: 0;\n\t\twidth: 44px;\n\t\theight: 44px;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 2;\n\t}\n\t\n\t.nav-title {\n\t\tflex: 1;\n\t\ttext-align: center;\n\t\tfont-size: 32rpx;\n\t\tcolor: #262626;\n\t\tfont-weight: 600;\n\t\twhite-space: nowrap;\n\t\toverflow: hidden;\n\t\ttext-overflow: ellipsis;\n\t\tpadding: 0 88rpx;\n\t}\n\t\n\t/* 内容区域 */\n\t.content-scroll {\n\t\tflex: 1;\n\t\tposition: fixed;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 100rpx;\n\t\tz-index: 1;\n\t\toverflow-y: auto;\n\t\t-webkit-overflow-scrolling: touch;\n\t}\n\t\n\t.content-wrapper {\n\t\tposition: relative;\n\t\tpadding-bottom: calc(env(safe-area-inset-bottom) + 40rpx);\n\t}\n\t\n\t.tag-row {\n\t\tdisplay: flex;\n\t\tgap: 12rpx;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 30rpx 30rpx 0;\n\t}\n\t\n\t.tag {\n\t\tpadding: 4rpx 12rpx;\n\t\tborder-radius: 4rpx;\n\t\tfont-size: 22rpx;\n\t}\n\t\n\t.top-tag {\n\t\tbackground-color: #fc3e2b;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t.category-tag {\n\t\tbackground-color: #f5f5f5;\n\t\tcolor: #666666;\n\t}\n\t\n\t.content-title {\n\t\tfont-size: 36rpx;\n\t\tfont-weight: 600;\n\t\tcolor: #262626;\n\t\tmargin-bottom: 20rpx;\n\t\tpadding: 0 30rpx;\n\t}\n\t\n\t.publish-info {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 20rpx;\n\t\tmargin-bottom: 30rpx;\n\t\tpadding: 0 30rpx;\n\t}\n\t\n\t.publisher {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t}\n\t\n\t.publish-time {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999999;\n\t}\n\t\n\t.content-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tline-height: 1.6;\n\t\twhite-space: pre-wrap;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t\n\t/* 内容区域样式 */\n\t.content-body {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20rpx;\n\t\tpadding: 0 30rpx;\n\t}\n\t\n\t/* 图片列表样式 */\n\t.image-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.image-list image {\n\t\twidth: 100%;\n\t\tborder-radius: 12rpx;\n\t\tbackground-color: #f5f5f5;\n\t}\n\t\n\t/* 发布人信息卡片 */\n\t.publisher-card {\n\t\tbackground-color: #FFFFFF;\n\t\tpadding: 30rpx;\n\t}\n\t\n\t.publisher-info {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t}\n\t\n\t.publisher-left {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.avatar {\n\t\twidth: 80rpx;\n\t\theight: 80rpx;\n\t\tborder-radius: 50%;\n\t\tbackground-color: #f5f5f5;\n\t}\n\t\n\t.info-content {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t}\n\t\n\t.name {\n\t\tfont-size: 28rpx;\n\t\tcolor: #262626;\n\t\tfont-weight: 500;\n\t}\n\t\n\t.publish-count {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999999;\n\t}\n\t\n\t.follow-btn {\n\t\tpadding: 12rpx 32rpx;\n\t\tborder-radius: 32rpx;\n\t\tbackground-color: #fc3e2b;\n\t}\n\t\n\t.follow-btn text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #FFFFFF;\n\t}\n\t\n\t/* 留言区域样式 */\n\t.comment-section {\n\t\tbackground-color: #FFFFFF;\n\t\tpadding: 30rpx;\n\t\tmargin-bottom: 40rpx;\n\t}\n\t\n\t.comment-header {\n\t\tdisplay: flex;\n\t\tjustify-content: space-between;\n\t\talign-items: center;\n\t\tmargin-bottom: 30rpx;\n\t}\n\t\n\t.comment-title {\n\t\tfont-size: 30rpx;\n\t\tcolor: #262626;\n\t\tfont-weight: 600;\n\t}\n\t\n\t.comment-btn {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tgap: 8rpx;\n\t\tcolor: #007AFF;\n\t\tfont-size: 26rpx;\n\t}\n\t\n\t.comment-list {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 30rpx;\n\t}\n\t\n\t.comment-item {\n\t\tdisplay: flex;\n\t\tgap: 20rpx;\n\t}\n\t\n\t.comment-avatar {\n\t\twidth: 64rpx;\n\t\theight: 64rpx;\n\t\tborder-radius: 50%;\n\t\tbackground-color: #f5f5f5;\n\t}\n\t\n\t.comment-content {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tgap: 8rpx;\n\t}\n\t\n\t.comment-name {\n\t\tfont-size: 26rpx;\n\t\tcolor: #666666;\n\t}\n\t\n\t.comment-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #262626;\n\t\tline-height: 1.5;\n\t}\n\t\n\t.comment-time {\n\t\tfont-size: 24rpx;\n\t\tcolor: #999999;\n\t}\n\t\n\t/* Banner样式 */\n\t.banner-container {\n\t\twidth: 100%;\n\t\theight: 200rpx;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tposition: relative;\n\t}\n\t\n\t.banner-swiper {\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\t\n\t.banner-image {\n\t\twidth: 100%;\n\t\theight: calc(100% - 10rpx);\n\t}\n\t\n\t.dots {\n\t\tposition: absolute;\n\t\tbottom: 20rpx;\n\t\tright: 20rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: flex-end;\n\t\tgap: 8rpx;\n\t}\n\t\n\t.dot {\n\t\twidth: 12rpx;\n\t\theight: 12rpx;\n\t\tborder-radius: 50%;\n\t\tbackground-color: rgba(255, 255, 255, 0.6);\n\t}\n\t\n\t.dot.active {\n\t\tbackground-color: #fc3e2b;\n\t\twidth: 24rpx;\n\t\tborder-radius: 6rpx;\n\t}\n\t\n\t/* 加载中样式 */\n\t.loading-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\theight: 300rpx;\n\t\tmargin-top: 100rpx;\n\t}\n\t\n\t.loading-indicator {\n\t\twidth: 40rpx;\n\t\theight: 40rpx;\n\t\tborder: 4rpx solid #f0f0f0;\n\t\tborder-radius: 50%;\n\t\tborder-top-color: #fc3e2b;\n\t\tanimation: spin 1s linear infinite;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t@keyframes spin {\n\t\t0% {\n\t\t\ttransform: rotate(0deg);\n\t\t}\n\t\t100% {\n\t\t\ttransform: rotate(360deg);\n\t\t}\n\t}\n\t\n\t.loading-text {\n\t\tfont-size: 26rpx;\n\t\tcolor: #999999;\n\t}\n\t\n\t/* 错误状态样式 */\n\t.error-container {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\theight: 300rpx;\n\t\tmargin-top: 100rpx;\n\t}\n\t\n\t.error-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #999999;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.retry-btn {\n\t\tpadding: 16rpx 40rpx;\n\t\tbackground-color: #fc3e2b;\n\t\tcolor: #FFFFFF;\n\t\tfont-size: 28rpx;\n\t\tborder-radius: 40rpx;\n\t}\n</style> ","import MiniProgramPage from 'E:/Myxiangmu/chonggou/juzitongcheng/pages/content/detail.vue'\nwx.createPage(MiniProgramPage)"],"names":["deviceAdapter","shareMixin","formatTimeAgo","getPublicContentDetail","uni","getFavoriteStatus","getCommentList","unfollowUser","followUser","createComment","createConversation","cancelFavorite","addFavorite","wx","addBrowseRecord","getPublisherInfo","getPublisherFollowStatus","get","getShareSettings"],"mappings":"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"}