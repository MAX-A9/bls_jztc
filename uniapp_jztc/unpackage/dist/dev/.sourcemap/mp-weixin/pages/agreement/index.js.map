{"version":3,"file":"index.js","sources":["pages/agreement/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvYWdyZWVtZW50L2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"container\">\r\n\t\t<!-- 自定义导航栏 -->\r\n\t\t<view class=\"nav-bar\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\r\n\t\t\t<view class=\"nav-content\" :style=\"{ height: navBarHeight + 'px' }\">\r\n\t\t\t\t<view class=\"back-btn\" @tap=\"handleBack\">\r\n\t\t\t\t\t<uni-icons type=\"left\" size=\"20\" color=\"#333333\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"nav-title\">{{ title }}</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 协议内容 -->\r\n\t\t<scroll-view \r\n\t\t\tclass=\"content-scroll\" \r\n\t\t\tscroll-y\r\n\t\t\t:style=\"{ top: `calc(${statusBarHeight}px + ${navBarHeight}px)` }\"\r\n\t\t>\r\n\t\t\t<view class=\"agreement-content\" v-if=\"!loading\">\r\n\t\t\t\t<rich-text :nodes=\"content\"></rich-text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 加载提示 -->\r\n\t\t\t<view class=\"loading-container\" v-if=\"loading\">\r\n\t\t\t\t<uni-icons type=\"spinner-cycle\" size=\"30\" color=\"#fc3e2b\"></uni-icons>\r\n\t\t\t\t<text class=\"loading-text\">加载中...</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 错误提示 -->\r\n\t\t\t<view class=\"error-container\" v-if=\"errorMsg\">\r\n\t\t\t\t<uni-icons type=\"info\" size=\"50\" color=\"#cccccc\"></uni-icons>\r\n\t\t\t\t<text class=\"error-text\">{{ errorMsg }}</text>\r\n\t\t\t\t<button class=\"retry-btn\" @tap=\"loadAgreementContent\">重新加载</button>\r\n\t\t\t</view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport { agreement } from '@/apis/index.js';\r\n\timport deviceInfo from '@/utils/device-info.js';\r\n\t\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstatusBarHeight: 0,\r\n\t\t\t\tnavBarHeight: 44,\r\n\t\t\t\ttitle: '协议详情',\r\n\t\t\t\tcontent: '',\r\n\t\t\t\ttype: '',\r\n\t\t\t\tloading: true,\r\n\t\t\t\terrorMsg: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tthis.type = options.type || 'privacy';\r\n\t\t\t\r\n\t\t\t// 获取状态栏高度\r\n\t\t\tthis.statusBarHeight = deviceInfo.getStatusBarHeight();\r\n\t\t\t\r\n\t\t\t// 获取协议内容\r\n\t\t\tthis.loadAgreementContent();\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t// 处理返回按钮点击\r\n\t\t\thandleBack() {\r\n\t\t\t\tuni.navigateBack();\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 加载协议内容\r\n\t\t\tasync loadAgreementContent() {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tthis.errorMsg = '';\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 调用协议接口获取内容\r\n\t\t\t\t\tconst res = await agreement.getAgreement({ type: this.type });\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (res.code === 0 && res.data) {\r\n\t\t\t\t\t\t// 处理协议内容，支持富文本显示\r\n\t\t\t\t\t\t// 如果后端返回的是HTML格式，则直接使用\r\n\t\t\t\t\t\tthis.content = res.data.content || `暂无${this.title}内容`;\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(res.message || '获取协议内容失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('获取协议内容失败:', error);\r\n\t\t\t\t\tthis.errorMsg = error.message || '获取协议内容失败，请重试';\r\n\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.container {\r\n\t\tmin-height: 100vh;\r\n\t\tbackground-color: #ffffff;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.nav-bar {\r\n\t\tbackground-color: #ffffff;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 99;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);\r\n\t}\r\n\t\r\n\t.nav-content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.back-btn {\r\n\t\twidth: 88rpx;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tmargin-left: 7px;\r\n\t}\r\n\t\r\n\t.nav-title {\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tfont-size: 34rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333333;\r\n\t\tmax-width: 350rpx;\r\n\t\ttext-align: center;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t}\r\n\t\r\n\t.content-scroll {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tbackground-color: #ffffff;\r\n\t\tz-index: 1;\r\n\t\toverflow-y: auto;\r\n\t\t-webkit-overflow-scrolling: touch;\r\n\t}\r\n\t\r\n\t.agreement-content {\r\n\t\tpadding: 30rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 1.8;\r\n\t}\r\n\t\r\n\t.loading-container, .error-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding-top: 200rpx;\r\n\t}\r\n\t\r\n\t.loading-text, .error-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #999999;\r\n\t\tmargin-top: 20rpx;\r\n\t\ttext-align: center;\r\n\t}\r\n\t\r\n\t.error-text {\r\n\t\tmargin-bottom: 40rpx;\r\n\t}\r\n\t\r\n\t.retry-btn {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #ffffff;\r\n\t\tbackground-color: #fc3e2b;\r\n\t\tpadding: 16rpx 60rpx;\r\n\t\tborder-radius: 40rpx;\r\n\t}\r\n</style> ","import MiniProgramPage from 'E:/Myxiangmu/chonggou/juzitongcheng/pages/agreement/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["deviceInfo","uni","agreement"],"mappings":";;;;AA0CC,MAAK,YAAU;AAAA,EACd,OAAO;AACN,WAAO;AAAA,MACN,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,OAAO;AAAA,MACP,SAAS;AAAA,MACT,MAAM;AAAA,MACN,SAAS;AAAA,MACT,UAAU;AAAA,IACX;AAAA,EACA;AAAA,EACD,OAAO,SAAS;AACf,SAAK,OAAO,QAAQ,QAAQ;AAG5B,SAAK,kBAAkBA,4BAAW;AAGlC,SAAK,qBAAoB;AAAA,EACzB;AAAA,EACD,SAAS;AAAA;AAAA,IAER,aAAa;AACZC,oBAAG,MAAC,aAAY;AAAA,IAChB;AAAA;AAAA,IAGD,MAAM,uBAAuB;AAC5B,WAAK,UAAU;AACf,WAAK,WAAW;AAEhB,UAAI;AAEH,cAAM,MAAM,MAAMC,WAAAA,UAAU,aAAa,EAAE,MAAM,KAAK,KAAK,CAAC;AAE5D,YAAI,IAAI,SAAS,KAAK,IAAI,MAAM;AAG/B,eAAK,UAAU,IAAI,KAAK,WAAW,KAAK,KAAK,KAAK;AAClD,eAAK,UAAU;AAAA,eACT;AACN,gBAAM,IAAI,MAAM,IAAI,WAAW,UAAU;AAAA,QAC1C;AAAA,MACC,SAAO,OAAO;AACfD,sBAAA,MAAA,MAAA,SAAA,mCAAc,aAAa,KAAK;AAChC,aAAK,WAAW,MAAM,WAAW;AACjC,aAAK,UAAU;AAAA,MAChB;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC5FD,GAAG,WAAW,eAAe;"}