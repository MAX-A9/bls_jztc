{"version":3,"file":"index.js","sources":["pages/notification/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvbm90aWZpY2F0aW9uL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"notification-container\">\r\n\t\t<!-- 顶部导航栏 -->\r\n\t\t<view class=\"header\">\r\n\t\t\t<view class=\"title-area\">\r\n\t\t\t\t<text class=\"title\">系统通知</text>\r\n\t\t\t\t<view class=\"clear-btn\" @click=\"handleClearAll\">\r\n\t\t\t\t\t<uni-icons type=\"trash\" size=\"16\" color=\"#666666\"></uni-icons>\r\n\t\t\t\t\t<text class=\"clear-text\">清除全部</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 占位元素 -->\r\n\t\t<view class=\"header-placeholder\"></view>\r\n\t\t\r\n\t\t<!-- 通知列表 -->\r\n\t\t<scroll-view \r\n\t\t\tclass=\"notification-content\" \r\n\t\t\tscroll-y \r\n\t\t\t:show-scrollbar=\"false\"\r\n\t\t\t:enhanced=\"true\"\r\n\t\t\t:bounces=\"true\"\r\n\t\t\t:refresher-enabled=\"true\"\r\n\t\t\t:refresher-triggered=\"isRefreshing\"\r\n\t\t\trefresher-background=\"#f5f5f5\"\r\n\t\t\t@refresherrefresh=\"onRefresh\"\r\n\t\t\t@refresherrestore=\"onRestore\"\r\n\t\t>\r\n\t\t\t<view v-if=\"notificationList.length === 0\" class=\"empty-container\">\r\n\t\t\t\t<image class=\"empty-image\" src=\"/static/images/empty-notification.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t<text class=\"empty-text\">暂无系统通知</text>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view \r\n\t\t\t\tv-else\r\n\t\t\t\tclass=\"notification-item\"\r\n\t\t\t\tv-for=\"(item, index) in notificationList\"\r\n\t\t\t\t:key=\"index\"\r\n\t\t\t\t@tap=\"handleNotificationClick(item)\"\r\n\t\t\t>\r\n\t\t\t\t<view class=\"notification-icon\" :class=\"[item.type]\">\r\n\t\t\t\t\t<uni-icons :type=\"getIconByType(item.type)\" size=\"24\" color=\"#ffffff\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"notification-content\">\r\n\t\t\t\t\t<view class=\"notification-top\">\r\n\t\t\t\t\t\t<text class=\"title\">{{ item.title }}</text>\r\n\t\t\t\t\t\t<text class=\"time\">{{ item.time }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<text class=\"content\">{{ item.content }}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"unread-dot\" v-if=\"!item.isRead\"></view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 底部安全区域 -->\r\n\t\t\t<view class=\"safe-area-bottom\"></view>\r\n\t\t</scroll-view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tisRefreshing: false,\r\n\t\t\t\tnotificationList: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 1,\r\n\t\t\t\t\t\ttype: 'system',\r\n\t\t\t\t\t\ttitle: '系统更新通知',\r\n\t\t\t\t\t\tcontent: '亲爱的用户，我们的应用已更新到最新版本，新增了多项实用功能，欢迎体验！',\r\n\t\t\t\t\t\ttime: '今天 12:30',\r\n\t\t\t\t\t\tisRead: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 2,\r\n\t\t\t\t\t\ttype: 'comment',\r\n\t\t\t\t\t\ttitle: '评论通知',\r\n\t\t\t\t\t\tcontent: '用户\"张先生\"评论了您的闲置物品：\"这个价格很合理，我很感兴趣\"',\r\n\t\t\t\t\t\ttime: '今天 10:15',\r\n\t\t\t\t\t\tisRead: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\ttype: 'like',\r\n\t\t\t\t\t\ttitle: '点赞通知',\r\n\t\t\t\t\t\tcontent: '您的闲置物品\"iPhone 12 128G 蓝色\"收到了3个新的点赞',\r\n\t\t\t\t\t\ttime: '昨天 15:40',\r\n\t\t\t\t\t\tisRead: false\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 4,\r\n\t\t\t\t\t\ttype: 'order',\r\n\t\t\t\t\t\ttitle: '订单通知',\r\n\t\t\t\t\t\tcontent: '您的订单#20230615001已发货，预计3天内送达',\r\n\t\t\t\t\t\ttime: '昨天 09:20',\r\n\t\t\t\t\t\tisRead: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 5,\r\n\t\t\t\t\t\ttype: 'system',\r\n\t\t\t\t\t\ttitle: '账号安全提醒',\r\n\t\t\t\t\t\tcontent: '您的账号于6月10日在新设备上登录，如非本人操作，请及时修改密码',\r\n\t\t\t\t\t\ttime: '3天前',\r\n\t\t\t\t\t\tisRead: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 6,\r\n\t\t\t\t\t\ttype: 'comment',\r\n\t\t\t\t\t\ttitle: '评论通知',\r\n\t\t\t\t\t\tcontent: '用户\"李女士\"回复了您的评论：\"好的，那就这个价格成交\"',\r\n\t\t\t\t\t\ttime: '4天前',\r\n\t\t\t\t\t\tisRead: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 7,\r\n\t\t\t\t\t\ttype: 'like',\r\n\t\t\t\t\t\ttitle: '点赞通知',\r\n\t\t\t\t\t\tcontent: '您的闲置物品\"九成新小米平板5 Pro\"收到了5个新的点赞',\r\n\t\t\t\t\t\ttime: '5天前',\r\n\t\t\t\t\t\tisRead: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tid: 8,\r\n\t\t\t\t\t\ttype: 'order',\r\n\t\t\t\t\t\ttitle: '订单通知',\r\n\t\t\t\t\t\tcontent: '您的订单#20230608002已完成，感谢您的使用',\r\n\t\t\t\t\t\ttime: '一周前',\r\n\t\t\t\t\t\tisRead: true\r\n\t\t\t\t\t}\r\n\t\t\t\t]\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tgetIconByType(type) {\r\n\t\t\t\tconst iconMap = {\r\n\t\t\t\t\t'system': 'notification-filled',\r\n\t\t\t\t\t'comment': 'chat-filled',\r\n\t\t\t\t\t'like': 'heart-filled',\r\n\t\t\t\t\t'order': 'cart-filled'\r\n\t\t\t\t}\r\n\t\t\t\treturn iconMap[type] || 'notification-filled'\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\thandleClearAll() {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确定要清空所有通知吗？',\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tthis.notificationList = []\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '已清空所有通知',\r\n\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\thandleNotificationClick(notification) {\r\n\t\t\t\t// 标记为已读\r\n\t\t\t\tconst index = this.notificationList.findIndex(item => item.id === notification.id)\r\n\t\t\t\tif (index !== -1 && !this.notificationList[index].isRead) {\r\n\t\t\t\t\tthis.notificationList[index].isRead = true\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 根据通知类型跳转到不同页面\r\n\t\t\t\tswitch (notification.type) {\r\n\t\t\t\t\tcase 'comment':\r\n\t\t\t\t\t\t// 跳转到评论详情\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: `/pages/content/detail?id=${notification.id}&type=comment`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'like':\r\n\t\t\t\t\t\t// 跳转到点赞详情\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: `/pages/my/publish/index?highlight=${notification.id}`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'order':\r\n\t\t\t\t\t\t// 跳转到订单详情\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: `/pages/my/orders/index?id=${notification.id}`\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\tcase 'system':\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t// 显示通知详情\r\n\t\t\t\t\t\tuni.showModal({\r\n\t\t\t\t\t\t\ttitle: notification.title,\r\n\t\t\t\t\t\t\tcontent: notification.content,\r\n\t\t\t\t\t\t\tshowCancel: false,\r\n\t\t\t\t\t\t\tconfirmText: '知道了'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tasync onRefresh() {\r\n\t\t\t\tif (this.isRefreshing) return\r\n\t\t\t\tthis.isRefreshing = true\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve, 1000))\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 更新通知列表\r\n\t\t\t\t\tthis.notificationList = [\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tid: 9,\r\n\t\t\t\t\t\t\ttype: 'system',\r\n\t\t\t\t\t\t\ttitle: '新活动通知',\r\n\t\t\t\t\t\t\tcontent: '618年中大促即将开始，多款商品低至5折，先到先得！',\r\n\t\t\t\t\t\t\ttime: '刚刚',\r\n\t\t\t\t\t\t\tisRead: false\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t...this.notificationList\r\n\t\t\t\t\t]\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '刷新成功',\r\n\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t})\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('刷新失败:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '刷新失败',\r\n\t\t\t\t\t\ticon: 'error'\r\n\t\t\t\t\t})\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.isRefreshing = false\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tonRestore() {\r\n\t\t\t\tconsole.log('刷新复位')\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.notification-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\t\r\n\t.header {\r\n\t\tposition: fixed;\r\n\t\ttop: var(--window-top);\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 99;\r\n\t\tbackground-color: #ffffff;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.05);\r\n\t\tpadding: 0 30rpx;\r\n\t}\r\n\t\r\n\t.title-area {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: space-between;\r\n\t\theight: 88rpx;\r\n\t}\r\n\t\r\n\t.title {\r\n\t\tfont-size: 36rpx;\r\n\t\tfont-weight: bold;\r\n\t\tcolor: #333333;\r\n\t}\r\n\t\r\n\t.clear-btn {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding: 8rpx 16rpx;\r\n\t\tbackground-color: #f5f5f5;\r\n\t\tborder-radius: 24rpx;\r\n\t}\r\n\t\r\n\t.clear-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666666;\r\n\t\tmargin-left: 4rpx;\r\n\t}\r\n\t\r\n\t.header-placeholder {\r\n\t\theight: calc(var(--window-top) + 88rpx);\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\t\r\n\t.notification-content {\r\n\t\tflex: 1;\r\n\t\tbox-sizing: border-box;\r\n\t\toverflow-y: auto;\r\n\t\t-webkit-overflow-scrolling: touch;\r\n\t}\r\n\t\r\n\t.notification-item {\r\n\t\tdisplay: flex;\r\n\t\tpadding: 24rpx 30rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.notification-icon {\r\n\t\twidth: 80rpx;\r\n\t\theight: 80rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tmargin-right: 20rpx;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tflex-shrink: 0;\r\n\t}\r\n\t\r\n\t.notification-icon.system {\r\n\t\tbackground-color: #fc3e2b;\r\n\t}\r\n\t\r\n\t.notification-icon.comment {\r\n\t\tbackground-color: #007aff;\r\n\t}\r\n\t\r\n\t.notification-icon.like {\r\n\t\tbackground-color: #ff2d55;\r\n\t}\r\n\t\r\n\t.notification-icon.order {\r\n\t\tbackground-color: #4cd964;\r\n\t}\r\n\t\r\n\t.notification-content {\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.notification-top {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tmargin-bottom: 8rpx;\r\n\t}\r\n\t\r\n\t.notification-top .title {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 500;\r\n\t}\r\n\t\r\n\t.notification-top .time {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999999;\r\n\t}\r\n\t\r\n\t.notification-content .content {\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #666666;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\t\r\n\t.unread-dot {\r\n\t\tposition: absolute;\r\n\t\ttop: 24rpx;\r\n\t\tright: 30rpx;\r\n\t\twidth: 16rpx;\r\n\t\theight: 16rpx;\r\n\t\tborder-radius: 50%;\r\n\t\tbackground-color: #fc3e2b;\r\n\t}\r\n\t\r\n\t.empty-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t\tpadding-top: 200rpx;\r\n\t}\r\n\t\r\n\t.empty-image {\r\n\t\twidth: 200rpx;\r\n\t\theight: 200rpx;\r\n\t\tmargin-bottom: 30rpx;\r\n\t}\r\n\t\r\n\t.empty-text {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #999999;\r\n\t}\r\n\t\r\n\t.safe-area-bottom {\r\n\t\theight: 40rpx;\r\n\t}\r\n</style> ","import MiniProgramPage from 'E:/Myxiangmu/chonggou/juzitongcheng/pages/notification/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}