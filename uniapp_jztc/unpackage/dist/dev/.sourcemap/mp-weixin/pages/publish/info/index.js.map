{"version":3,"file":"index.js","sources":["pages/publish/info/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvcHVibGlzaC9pbmZvL2luZGV4LnZ1ZQ"],"sourcesContent":["<template>\r\n\t<view class=\"info-publish-container\">\r\n\t\t<!-- 自定义导航栏 -->\r\n\t\t<view class=\"nav-bar\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\r\n\t\t\t<view class=\"nav-content\" :style=\"{ height: navBarHeight + 'px' }\">\r\n\t\t\t\t<view class=\"back-btn\" @tap=\"handleBack\">\r\n\t\t\t\t\t<uni-icons type=\"left\" size=\"20\" color=\"#333333\"></uni-icons>\r\n\t\t\t\t</view>\r\n\t\t\t\t<text class=\"nav-title\">信息发布</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 占位元素 -->\r\n\t\t<view class=\"placeholder\" :style=\"{ height: `calc(${statusBarHeight}px + ${navBarHeight}px)` }\"></view>\r\n\t\t\r\n\t\t<!-- 表单内容 -->\r\n\t\t<scroll-view class=\"form-scroll\" scroll-y>\r\n\t\t\t<!-- 信息类型选择 -->\r\n\t\t\t<view class=\"form-section\">\r\n\t\t\t\t<view class=\"section-title\">信息类型</view>\r\n\t\t\t\t<view class=\"type-grid\">\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tv-for=\"(type, index) in infoTypes\" \r\n\t\t\t\t\t\t:key=\"index\"\r\n\t\t\t\t\t\tclass=\"type-item\"\r\n\t\t\t\t\t\t:class=\"{ active: formData.type === type.id.toString() }\"\r\n\t\t\t\t\t\t@tap=\"selectInfoType(type.id.toString())\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<image v-if=\"type.icon\" class=\"type-icon\" :src=\"type.icon\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t<uni-icons v-else type=\"info\" size=\"24\" :color=\"formData.type === type.id.toString() ? '#ffffff' : '#666666'\"></uni-icons>\r\n\t\t\t\t\t\t<text class=\"type-text\">{{ type.name }}</text>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 标题描述区域 -->\r\n\t\t\t<view class=\"form-section\">\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<input \r\n\t\t\t\t\t\tclass=\"title-input\" \r\n\t\t\t\t\t\tv-model=\"formData.title\" \r\n\t\t\t\t\t\tplaceholder=\"请输入信息标题\" \r\n\t\t\t\t\t\tmaxlength=\"30\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<text class=\"count-text\">{{formData.title.length}}/30</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"input-item\">\r\n\t\t\t\t\t<textarea \r\n\t\t\t\t\t\tclass=\"desc-input\" \r\n\t\t\t\t\t\tv-model=\"formData.description\" \r\n\t\t\t\t\t\tplaceholder=\"请详细描述您要发布的信息内容\" \r\n\t\t\t\t\t\tmaxlength=\"1000\"\r\n\t\t\t\t\t\tauto-height\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<text class=\"count-text\">{{formData.description.length}}/1000</text>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 图片上传区域 -->\r\n\t\t\t<view class=\"form-section\">\r\n\t\t\t\t<view class=\"section-title\">添加图片</view>\r\n\t\t\t\t<view class=\"upload-area\">\r\n\t\t\t\t\t<view class=\"upload-grid\">\r\n\t\t\t\t\t\t<view \r\n\t\t\t\t\t\t\tv-for=\"(item, index) in images\" \r\n\t\t\t\t\t\t\t:key=\"index\" \r\n\t\t\t\t\t\t\tclass=\"image-item\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<image class=\"preview-image\" :src=\"item\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t<view class=\"delete-btn\" @tap.stop=\"deleteImage(index)\">\r\n\t\t\t\t\t\t\t\t<uni-icons type=\"closeempty\" size=\"14\" color=\"#ffffff\"></uni-icons>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view class=\"upload-btn\" @tap=\"chooseImage\" v-if=\"images.length < 9\">\r\n\t\t\t\t\t\t\t<uni-icons type=\"camera\" size=\"24\" color=\"#999999\"></uni-icons>\r\n\t\t\t\t\t\t\t<text class=\"upload-text\">{{images.length}}/9</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 发布设置 -->\r\n\t\t\t<view class=\"form-section\" v-if=\"publishPackages.length > 0\">\r\n\t\t\t\t<view class=\"section-title\">选择展示套餐</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"option-cards\">\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tclass=\"option-card\" \r\n\t\t\t\t\t\t:class=\"{ active: formData.publishPackageId === item.id }\"\r\n\t\t\t\t\t\tv-for=\"item in publishPackages\"\r\n\t\t\t\t\t\t:key=\"'publish-'+item.id\"\r\n\t\t\t\t\t\t@tap=\"selectPublishPackage(item.id)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<view class=\"option-content\">\r\n\t\t\t\t\t\t\t<text class=\"option-title\">{{ item.title }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"option-price\">{{ item.price === 0 ? '免费' : item.price + '元' }}</view>\r\n\t\t\t\t\t\t<view class=\"check-icon\" v-if=\"formData.publishPackageId === item.id\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<view class=\"form-section\" v-if=\"topPackages.length > 0\">\r\n\t\t\t\t<view class=\"section-title\">选择置顶套餐</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"option-cards\">\r\n\t\t\t\t\t<view \r\n\t\t\t\t\t\tclass=\"option-card\" \r\n\t\t\t\t\t\t:class=\"{ active: formData.topPackageId === item.id }\"\r\n\t\t\t\t\t\tv-for=\"item in topPackages\"\r\n\t\t\t\t\t\t:key=\"'top-'+item.id\"\r\n\t\t\t\t\t\t@tap=\"selectTopPackage(item.id)\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<view class=\"option-content\">\r\n\t\t\t\t\t\t\t<text class=\"option-title\">{{ item.title }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"option-price\">{{ item.price === 0 ? '免费' : item.price + '元' }}</view>\r\n\t\t\t\t\t\t<view class=\"check-icon\" v-if=\"formData.topPackageId === item.id\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 底部安全区域 -->\r\n\t\t\t<view class=\"safe-area-bottom\"></view>\r\n\t\t</scroll-view>\r\n\t\t\r\n\t\t<!-- 底部操作栏 -->\r\n\t\t<view class=\"bottom-bar\">\r\n\t\t\t<view class=\"draft-btn\" @tap=\"saveDraft\">\r\n\t\t\t\t<text class=\"draft-text\">存草稿</text>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"publish-btn\" @tap=\"publishItem\">\r\n\t\t\t\t<text class=\"publish-text\">立即发布</text>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport deviceMixin from '@/mixins/device.js'\r\n\timport { createInfo, getInfoCategories, getPackageList } from '@/apis/content.js'\r\n\timport { API_BASE_URL } from '@/utils/constants.js'\r\n\timport { isLoggedIn } from '@/utils/auth.js'\r\n\timport { mapState, mapGetters } from 'vuex'\r\n\timport { requestWxPay } from '@/utils/pay.js'\r\n\timport { saveInfoDraft, getInfoDraft } from '@/utils/storage.js'\r\n\timport { category, publish } from '@/apis/index.js'\r\n\timport deviceInfo from '@/utils/device-info.js'\r\n\t\r\n\texport default {\r\n\t\tmixins: [deviceMixin],\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tstatusBarHeight: 0,\r\n\t\t\t\tnavBarHeight: 44,\r\n\t\t\t\timages: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t\tformData: {\r\n\t\t\t\t\ttype: '',\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tdescription: '',\r\n\t\t\t\t\tpublishPackageId: null, // 发布套餐ID\r\n\t\t\t\t\ttopPackageId: null // 置顶套餐ID，null表示不使用置顶\r\n\t\t\t\t},\r\n\t\t\t\tinfoTypes: [],\r\n\t\t\t\tpublishPackages: [], // 发布套餐列表\r\n\t\t\t\ttopPackages: [] // 置顶套餐列表\r\n\t\t\t}\r\n\t\t},\r\n\t\tcomputed: {\r\n\t\t\t...mapState('region', ['regionList']),\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\t// 检查登录状态\r\n\t\t\tif (!isLoggedIn()) {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t// 延迟跳转到登录页面\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\turl: '/pages/login/index'\r\n\t\t\t\t\t})\r\n\t\t\t\t}, 1500)\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 获取状态栏高度\r\n\t\t\tthis.statusBarHeight = deviceInfo.getStatusBarHeight();\r\n\t\t\t\r\n\t\t\t// 加载分类数据\r\n\t\t\tthis.loadCategories()\r\n\t\t\t\r\n\t\t\t// 加载套餐数据\r\n\t\t\tthis.loadPackages()\r\n\t\t\t\r\n\t\t\t// 确保地区数据已加载\r\n\t\t\tthis.ensureRegionDataLoaded()\r\n\t\t\t\r\n\t\t\t// 如果有草稿ID参数，加载草稿数据\r\n\t\t\tif (options.draftId) {\r\n\t\t\t\tthis.loadDraftData(options.draftId)\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\thandleBack() {\r\n\t\t\t\tuni.navigateBack()\r\n\t\t\t},\r\n\t\t\t// 加载分类数据\r\n\t\t\tasync loadCategories() {\r\n\t\t\t\tif (this.loading) return\r\n\t\t\t\tthis.loading = true\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst res = await getInfoCategories(1)\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log('分类数据:', res)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (res.code === 0 && res.data && res.data.list) {\r\n\t\t\t\t\t\tthis.infoTypes = res.data.list\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 设置默认选中第一个分类\r\n\t\t\t\t\t\tif (this.infoTypes.length > 0) {\r\n\t\t\t\t\t\t\tthis.formData.type = this.infoTypes[0].id.toString()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error('获取分类失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('加载分类失败:', error)\r\n\t\t\t\t\t// 使用默认分类数据\r\n\t\t\t\t\tthis.useDefaultCategories()\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '加载分类失败，请重试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.loading = false\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 使用默认分类数据\r\n\t\t\tuseDefaultCategories() {\r\n\t\t\t\t// 使用空数组而不是默认数据\r\n\t\t\t\tthis.infoTypes = [];\r\n\t\t\t\t\r\n\t\t\t\t// 重置类型选择\r\n\t\t\t\tthis.formData.type = '';\r\n\t\t\t\t\r\n\t\t\t\t// 显示更明确的错误提示\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '分类加载失败，请刷新重试',\r\n\t\t\t\t\ticon: 'none',\r\n\t\t\t\t\tduration: 2000\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thandlePreview() {\r\n\t\t\t\tuni.showToast({\r\n\t\t\t\t\ttitle: '预览功能开发中',\r\n\t\t\t\t\ticon: 'none'\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tselectInfoType(type) {\r\n\t\t\t\tthis.formData.type = type\r\n\t\t\t},\r\n\t\t\tasync chooseImage() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 选择图片\r\n\t\t\t\t\tconst res = await new Promise((resolve, reject) => {\r\n\t\t\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\t\t\tcount: 9 - this.images.length,\r\n\t\t\t\t\t\t\tsizeType: ['compressed'],\r\n\t\t\t\t\t\t\tsourceType: ['album', 'camera'],\r\n\t\t\t\t\t\t\tsuccess: resolve,\r\n\t\t\t\t\t\t\tfail: reject\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (res.tempFilePaths && res.tempFilePaths.length > 0) {\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: '上传中...',\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t// 上传所有选中的图片\r\n\t\t\t\t\t\t\tconst uploadPromises = res.tempFilePaths.map(async (filePath) => {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t// 调用上传接口\r\n\t\t\t\t\t\t\t\t\treturn await this.uploadFile(filePath)\r\n\t\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\t\tconsole.error('上传图片失败:', error)\r\n\t\t\t\t\t\t\t\t\treturn null\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 等待所有图片上传完成\r\n\t\t\t\t\t\t\tconst uploadResults = await Promise.all(uploadPromises)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 过滤掉上传失败的图片\r\n\t\t\t\t\t\t\tconst successUrls = uploadResults.filter(url => url !== null)\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 更新图片列表\r\n\t\t\t\t\t\t\tthis.images = [...this.images, ...successUrls]\r\n\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\tconsole.error('处理上传图片时出错:', error)\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle: '上传图片失败',\r\n\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} finally {\r\n\t\t\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('选择图片失败:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '选择图片失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 上传文件到服务器\r\n\t\t\tasync uploadFile(filePath) {\r\n\t\t\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\t\t// 获取token\r\n\t\t\t\t\tconst token = uni.getStorageSync('token')\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!token) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn reject(new Error('请先登录'))\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl: API_BASE_URL + '/wx/upload/image',\r\n\t\t\t\t\t\tfilePath: filePath,\r\n\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'Authorization': 'Bearer ' + token\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (uploadRes) => {\r\n\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\tconst data = JSON.parse(uploadRes.data)\r\n\t\t\t\t\t\t\t\tconsole.log('上传响应:', data)\r\n\t\t\t\t\t\t\t\tif (data.code === 0 && data.data) {\r\n\t\t\t\t\t\t\t\t\t// 返回图片的URL\r\n\t\t\t\t\t\t\t\t\tresolve(data.data.url)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treject(new Error(data.message || '上传失败'))\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t} catch (error) {\r\n\t\t\t\t\t\t\t\tconsole.error('解析上传响应失败:', error)\r\n\t\t\t\t\t\t\t\treject(error)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tfail: (err) => {\r\n\t\t\t\t\t\t\tconsole.error('上传请求失败:', err)\r\n\t\t\t\t\t\t\treject(err)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tdeleteImage(index) {\r\n\t\t\t\tthis.images.splice(index, 1)\r\n\t\t\t},\r\n\t\t\tselectPublishPackage(packageId) {\r\n\t\t\t\tthis.formData.publishPackageId = packageId\r\n\t\t\t},\r\n\t\t\tselectTopPackage(packageId) {\r\n\t\t\t\tthis.formData.topPackageId = packageId\r\n\t\t\t},\r\n\t\t\tsaveDraft() {\r\n\t\t\t\tif (!this.formData.title && !this.formData.description) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请填写标题或描述',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 构建草稿数据\r\n\t\t\t\t\tconst draftData = {\r\n\t\t\t\t\t\t...this.formData,\r\n\t\t\t\t\t\timages: this.images\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 保存草稿\r\n\t\t\t\t\tconst draftId = saveInfoDraft(draftData)\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (draftId) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '草稿保存成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 延迟返回上一页\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error('保存失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error('保存草稿失败', e)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '保存草稿失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tasync publishItem() {\r\n\t\t\t\t// 检查登录状态\r\n\t\t\t\tif (!isLoggedIn()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请先登录',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl: '/pages/login/index'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}, 1500)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 表单验证\r\n\t\t\t\tif (!this.validateForm()) return\r\n\t\t\t\t\r\n\t\t\t\t// 使用变量跟踪loading状态\r\n\t\t\t\tlet loadingShown = false;\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 显示加载提示\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '正在发布...',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\tloadingShown = true;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 构建富文本内容\r\n\t\t\t\t\tlet content = '';\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 添加文本内容，分段落处理\r\n\t\t\t\t\tconst textParagraphs = this.formData.description.split('\\n').filter(p => p.trim());\r\n\t\t\t\t\ttextParagraphs.forEach(paragraph => {\r\n\t\t\t\t\t\tcontent += `<p>${paragraph}</p>`;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 添加图片内容\r\n\t\t\t\t\tif (this.images.length > 0) {\r\n\t\t\t\t\t\tthis.images.forEach(imgUrl => {\r\n\t\t\t\t\t\t\tcontent += `<p><img src=\"${imgUrl}\"></p>`;\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 获取当前选择的地区ID\r\n\t\t\t\t\tlet regionId = this.getRegionId();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 准备提交的数据\r\n\t\t\t\t\tconst submitData = {\r\n\t\t\t\t\t\tcategoryId: this.formData.type ? parseInt(this.formData.type) : 0,\r\n\t\t\t\t\t\ttitle: this.formData.title,\r\n\t\t\t\t\t\tcontent: content,\r\n\t\t\t\t\t\tpublishPackageId: this.formData.publishPackageId,\r\n\t\t\t\t\t\ttopPackageId: this.formData.topPackageId,\r\n\t\t\t\t\t\tisTopRequest: this.formData.topPackageId !== null,\r\n\t\t\t\t\t\ttopDays: 0, // 现在通过topPackageId来处理\r\n\t\t\t\t\t\tregionId: regionId,\r\n\t\t\t\t\t\timages: this.images\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log('提交数据:', submitData);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 调用接口发布信息\r\n\t\t\t\t\tconst res = await createInfo(submitData);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 请求完成后隐藏loading\r\n\t\t\t\t\tif (loadingShown) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tloadingShown = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (res.code === 0) {\r\n\t\t\t\t\t\t// 获取订单号\r\n\t\t\t\t\t\tconst orderNo = res.data.orderNo;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 检查是否需要支付\r\n\t\t\t\t\t\tif (orderNo) {\r\n\t\t\t\t\t\t\t// 获取套餐价格\r\n\t\t\t\t\t\t\tconst publishPackage = this.publishPackages.find(p => p.id === this.formData.publishPackageId);\r\n\t\t\t\t\t\t\tconst topPackage = this.formData.topPackageId ? this.topPackages.find(p => p.id === this.formData.topPackageId) : null;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 计算总价\r\n\t\t\t\t\t\t\tconst publishPrice = publishPackage ? publishPackage.price : 0;\r\n\t\t\t\t\t\t\tconst topPrice = topPackage ? topPackage.price : 0;\r\n\t\t\t\t\t\t\tconst totalPrice = publishPrice + topPrice;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// 只有当总价大于0时才调用支付\r\n\t\t\t\t\t\t\tif (totalPrice > 0) {\r\n\t\t\t\t\t\t\t\ttry {\r\n\t\t\t\t\t\t\t\t\t// 支付商品描述\r\n\t\t\t\t\t\t\t\t\tconst body = topPackage \r\n\t\t\t\t\t\t\t\t\t\t? `${publishPackage.title}+${topPackage.title}`\r\n\t\t\t\t\t\t\t\t\t\t: publishPackage.title;\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// 调用支付接口\r\n\t\t\t\t\t\t\t\t\tconst payResult = await requestWxPay({\r\n\t\t\t\t\t\t\t\t\t\tbody: body,\r\n\t\t\t\t\t\t\t\t\t\torderNo: orderNo,\r\n\t\t\t\t\t\t\t\t\t\ttotalFee: totalPrice\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (payResult.success) {\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: '支付成功',\r\n\t\t\t\t\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\t\ttitle: payResult.message || '支付已取消',\r\n\t\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} catch (payError) {\r\n\t\t\t\t\t\t\t\t\tconsole.error('支付过程出错:', payError);\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: payError.message || '支付失败',\r\n\t\t\t\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '发布成功',\r\n\t\t\t\t\t\t\ticon: 'success'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 延迟返回上一页\r\n\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\tuni.navigateBack()\r\n\t\t\t\t\t\t}, 1500)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error(res.message || '发布失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\t// 确保发生异常时也会隐藏loading\r\n\t\t\t\t\tif (loadingShown) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\tloadingShown = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.error('发布信息失败:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: error.message || '发布失败，请重试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} finally {\r\n\t\t\t\t\t// 最后一道防线，确保无论如何都会隐藏loading\r\n\t\t\t\t\tif (loadingShown) {\r\n\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tvalidateForm() {\r\n\t\t\t\t// 类型验证\r\n\t\t\t\tif (!this.formData.type) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择信息类型',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 标题验证\r\n\t\t\t\tif (!this.formData.title.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请填写信息标题',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 描述验证\r\n\t\t\t\tif (!this.formData.description.trim()) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请填写信息描述',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// 发布套餐验证（只有在有发布套餐时才验证）\r\n\t\t\t\tif (this.publishPackages.length > 0 && !this.formData.publishPackageId) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '请选择发布套餐',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\t\t\t// 确保区域数据已加载\r\n\t\t\tensureRegionDataLoaded() {\r\n\t\t\t\t// 检查vuex store中是否已有区域数据\r\n\t\t\t\tif (this.$store && \r\n\t\t\t\t\tthis.$store.state.region && \r\n\t\t\t\t\t(!this.$store.state.region.regionList || this.$store.state.region.regionList.length === 0)) {\r\n\t\t\t\t\t// 如果没有区域数据，则触发加载\r\n\t\t\t\t\tthis.$store.dispatch('region/getRegionList').catch(error => {\r\n\t\t\t\t\t\tconsole.error('加载地区数据失败:', error)\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetRegionId() {\r\n\t\t\t\t// 获取当前选择的地区ID\r\n\t\t\t\tlet regionId = 0;\r\n\t\t\t\tconst currentLocation = uni.getStorageSync('currentLocation');\r\n\t\t\t\t\r\n\t\t\t\t// 从Store中查找当前位置对应的地区ID\r\n\t\t\t\tif (this.regionList && this.regionList.length > 0) {\r\n\t\t\t\t\tconst currentRegion = this.regionList.find(region => region.name === currentLocation);\r\n\t\t\t\t\tif (currentRegion) {\r\n\t\t\t\t\t\tregionId = currentRegion.id;\r\n\t\t\t\t\t\tconsole.log('找到当前地区ID:', regionId, '地区名称:', currentLocation);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tconsole.log('未找到当前地区ID，使用默认ID 0, 当前地区名称:', currentLocation);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn regionId;\r\n\t\t\t},\r\n\t\t\t// 加载套餐数据\r\n\t\t\tasync loadPackages() {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\ttitle: '加载中...',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst res = await getPackageList()\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (res.code === 0 && res.data) {\r\n\t\t\t\t\t\t// 获取套餐数据并按sortOrder排序\r\n\t\t\t\t\t\tlet topPackages = res.data.topPackages || []\r\n\t\t\t\t\t\tlet publishPackages = res.data.publishPackages || []\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 获取套餐总开关状态\r\n\t\t\t\t\t\tconst topEnabled = res.data.topEnabled !== undefined ? res.data.topEnabled : true\r\n\t\t\t\t\t\tconst publishEnabled = res.data.publishEnabled !== undefined ? res.data.publishEnabled : true\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 对置顶套餐按sortOrder排序\r\n\t\t\t\t\t\tif (topPackages.length > 0) {\r\n\t\t\t\t\t\t\ttopPackages = topPackages.sort((a, b) => {\r\n\t\t\t\t\t\t\t\t// 如果没有sortOrder字段或相同，则按id排序\r\n\t\t\t\t\t\t\t\tif (a.sortOrder === b.sortOrder || a.sortOrder === undefined || b.sortOrder === undefined) {\r\n\t\t\t\t\t\t\t\t\treturn a.id - b.id\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn a.sortOrder - b.sortOrder\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 对发布套餐按sortOrder排序\r\n\t\t\t\t\t\tif (publishPackages.length > 0) {\r\n\t\t\t\t\t\t\tpublishPackages = publishPackages.sort((a, b) => {\r\n\t\t\t\t\t\t\t\t// 如果没有sortOrder字段或相同，则按id排序\r\n\t\t\t\t\t\t\t\tif (a.sortOrder === b.sortOrder || a.sortOrder === undefined || b.sortOrder === undefined) {\r\n\t\t\t\t\t\t\t\t\treturn a.id - b.id\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn a.sortOrder - b.sortOrder\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 根据总开关状态决定是否显示套餐\r\n\t\t\t\t\t\tthis.topPackages = topEnabled ? topPackages : []\r\n\t\t\t\t\t\tthis.publishPackages = publishEnabled ? publishPackages : []\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 如果有发布套餐，默认选中第一个\r\n\t\t\t\t\t\tif (this.publishPackages.length > 0) {\r\n\t\t\t\t\t\t\tthis.formData.publishPackageId = this.publishPackages[0].id\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t// 如果发布套餐被禁用，需要重置 publishPackageId\r\n\t\t\t\t\t\t\tthis.formData.publishPackageId = null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// 如果置顶套餐被禁用，重置 topPackageId\r\n\t\t\t\t\t\tif (!topEnabled) {\r\n\t\t\t\t\t\t\tthis.formData.topPackageId = null\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrow new Error('获取套餐数据失败')\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (error) {\r\n\t\t\t\t\tconsole.error('加载套餐数据失败:', error)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '加载套餐失败，请重试',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 加载草稿数据\r\n\t\t\tloadDraftData(draftId) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst draftData = getInfoDraft(Number(draftId))\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (!draftData) {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\ttitle: '草稿不存在',\r\n\t\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\treturn\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 填充表单数据\r\n\t\t\t\t\tif (draftData.type) {\r\n\t\t\t\t\t\tthis.formData.type = draftData.type\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (draftData.title) {\r\n\t\t\t\t\t\tthis.formData.title = draftData.title\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (draftData.description) {\r\n\t\t\t\t\t\tthis.formData.description = draftData.description\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (draftData.publishPackageId) {\r\n\t\t\t\t\t\tthis.formData.publishPackageId = draftData.publishPackageId\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (draftData.topPackageId) {\r\n\t\t\t\t\t\tthis.formData.topPackageId = draftData.topPackageId\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// 设置图片\r\n\t\t\t\t\tif (draftData.images && draftData.images.length > 0) {\r\n\t\t\t\t\t\tthis.images = draftData.images\r\n\t\t\t\t\t}\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.error('加载草稿失败', e)\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle: '加载草稿失败',\r\n\t\t\t\t\t\ticon: 'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.info-publish-container {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\theight: 100vh;\r\n\t\tbackground-color: #f5f5f5;\r\n\t}\r\n\t\r\n\t.nav-bar {\r\n\t\tbackground-color: #ffffff;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tz-index: 99;\r\n\t\tbox-shadow: 0 2rpx 8rpx rgba(0, 0, 0, 0.04);\r\n\t}\r\n\t\r\n\t.nav-content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.back-btn {\r\n\t\twidth: 88rpx;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.nav-title {\r\n\t\tposition: absolute;\r\n\t\tleft: 50%;\r\n\t\ttransform: translateX(-50%);\r\n\t\tfont-size: 34rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333333;\r\n\t}\r\n\t\r\n\t.placeholder {\r\n\t\twidth: 100%;\r\n\t}\r\n\t\r\n\t.form-scroll {\r\n\t\tflex: 1;\r\n\t\toverflow: hidden;\r\n\t}\r\n\t\r\n\t.form-section {\r\n\t\tbackground-color: #ffffff;\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tpadding: 20rpx 30rpx;\r\n\t}\r\n\t\r\n\t.section-title {\r\n\t\tfont-size: 30rpx;\r\n\t\tfont-weight: 500;\r\n\t\tcolor: #333333;\r\n\t\tmargin-bottom: 20rpx;\r\n\t}\r\n\t\r\n\t.type-grid {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tmargin: 0 -10rpx;\r\n\t}\r\n\t\r\n\t.type-item {\r\n\t\twidth: calc(25% - 20rpx);\r\n\t\theight: 120rpx;\r\n\t\tmargin: 10rpx;\r\n\t\tbackground-color: #f8f8f8;\r\n\t\tborder-radius: 8rpx;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.type-item.active {\r\n\t\tbackground: linear-gradient(135deg, #1e90ff, #4169e1);\r\n\t}\r\n\t\r\n\t.type-icon {\r\n\t\twidth: 48rpx;\r\n\t\theight: 48rpx;\r\n\t}\r\n\t\r\n\t.type-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #666666;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\t\r\n\t.type-item.active .type-text {\r\n\t\tcolor: #ffffff;\r\n\t}\r\n\t\r\n\t.input-item {\r\n\t\tmargin-bottom: 20rpx;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.input-item:last-child {\r\n\t\tmargin-bottom: 0;\r\n\t}\r\n\t\r\n\t.title-input {\r\n\t\twidth: 100%;\r\n\t\theight: 80rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #333333;\r\n\t}\r\n\t\r\n\t.desc-input {\r\n\t\twidth: 100%;\r\n\t\tmin-height: 200rpx;\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 1.5;\r\n\t}\r\n\t\r\n\t.count-text {\r\n\t\tposition: absolute;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999999;\r\n\t}\r\n\t\r\n\t.upload-area {\r\n\t\twidth: 100%;\r\n\t}\r\n\t\r\n\t.upload-grid {\r\n\t\tdisplay: flex;\r\n\t\tflex-wrap: wrap;\r\n\t\tmargin: 0 -10rpx;\r\n\t}\r\n\t\r\n\t.image-item, .upload-btn {\r\n\t\twidth: calc(33.33% - 20rpx);\r\n\t\theight: 200rpx;\r\n\t\tmargin: 10rpx;\r\n\t\tborder-radius: 8rpx;\r\n\t\toverflow: hidden;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.preview-image {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t}\r\n\t\r\n\t.delete-btn {\r\n\t\tposition: absolute;\r\n\t\ttop: 10rpx;\r\n\t\tright: 10rpx;\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground-color: rgba(0, 0, 0, 0.5);\r\n\t\tborder-radius: 50%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.upload-btn {\r\n\t\tbackground-color: #f8f8f8;\r\n\t\tborder: 1rpx dashed #dddddd;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.upload-text {\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #999999;\r\n\t\tmargin-top: 10rpx;\r\n\t}\r\n\t\r\n\t.option-cards {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tgap: 20rpx;\r\n\t}\r\n\t\r\n\t.option-card {\r\n\t\tdisplay: flex;\r\n\t\tjustify-content: space-between;\r\n\t\talign-items: center;\r\n\t\tpadding: 30rpx;\r\n\t\tbackground-color: #f8f8f8;\r\n\t\tborder-radius: 16rpx;\r\n\t\tborder: 2rpx solid transparent;\r\n\t\tposition: relative;\r\n\t}\r\n\t\r\n\t.option-card.active {\r\n\t\tborder-color: #1e90ff;\r\n\t\tbackground-color: #f0f8ff;\r\n\t}\r\n\t\r\n\t.check-icon {\r\n\t\tposition: absolute;\r\n\t\tbottom: 0;\r\n\t\tright: 0;\r\n\t\twidth: 40rpx;\r\n\t\theight: 40rpx;\r\n\t\tbackground-color: #1e90ff;\r\n\t\tclip-path: polygon(0 100%, 100% 100%, 100% 0);\r\n\t}\r\n\t\r\n\t.check-icon::after {\r\n\t\tcontent: '✓';\r\n\t\tposition: absolute;\r\n\t\tbottom: 2rpx;\r\n\t\tright: 6rpx;\r\n\t\tcolor: #ffffff;\r\n\t\tfont-size: 20rpx;\r\n\t\tfont-weight: bold;\r\n\t}\r\n\t\r\n\t.option-content {\r\n\t\tflex: 1;\r\n\t}\r\n\t\r\n\t.option-title {\r\n\t\tfont-size: 28rpx;\r\n\t\tcolor: #333333;\r\n\t\tline-height: 1.4;\r\n\t}\r\n\t\r\n\t.option-price {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #1e90ff;\r\n\t\tfont-weight: 500;\r\n\t\tmargin-right: 10rpx;\r\n\t}\r\n\t\r\n\t.hot-icon {\r\n\t\tcolor: #ff4500;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.ad-price {\r\n\t\tcolor: #ff8c00;\r\n\t\tfont-weight: 500;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\t\r\n\t.safe-area-bottom {\r\n\t\theight: 180rpx;\r\n\t}\r\n\t\r\n\t.bottom-bar {\r\n\t\tposition: fixed;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\theight: 100rpx;\r\n\t\tbackground-color: #ffffff;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tpadding-bottom: env(safe-area-inset-bottom);\r\n\t\tbox-shadow: 0 -2rpx 8rpx rgba(0, 0, 0, 0.04);\r\n\t\tz-index: 99;\r\n\t}\r\n\t\r\n\t.draft-btn, .publish-btn {\r\n\t\tflex: 1;\r\n\t\theight: 100%;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\t\r\n\t.draft-text {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #666666;\r\n\t}\r\n\t\r\n\t.publish-btn {\r\n\t\tbackground: linear-gradient(to right, #1e90ff, #4169e1);\r\n\t}\r\n\t\r\n\t.publish-text {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #ffffff;\r\n\t\tfont-weight: 500;\r\n\t}\r\n</style> ","import MiniProgramPage from 'E:/Myxiangmu/chonggou/juzitongcheng/pages/publish/info/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["deviceMixin","mapState","isLoggedIn","uni","deviceInfo","getInfoCategories","API_BASE_URL","saveInfoDraft","createInfo","requestWxPay","getPackageList","getInfoDraft"],"mappings":";;;;;;;;;AAuJC,MAAK,YAAU;AAAA,EACd,QAAQ,CAACA,cAAAA,WAAW;AAAA,EACpB,OAAO;AACN,WAAO;AAAA,MACN,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,QAAQ,CAAE;AAAA,MACV,SAAS;AAAA,MACT,UAAU;AAAA,QACT,MAAM;AAAA,QACN,OAAO;AAAA,QACP,aAAa;AAAA,QACb,kBAAkB;AAAA;AAAA,QAClB,cAAc;AAAA;AAAA,MACd;AAAA,MACD,WAAW,CAAE;AAAA,MACb,iBAAiB,CAAE;AAAA;AAAA,MACnB,aAAa;;IACd;AAAA,EACA;AAAA,EACD,UAAU;AAAA,IACT,GAAGC,uBAAS,UAAU,CAAC,YAAY,CAAC;AAAA,EACpC;AAAA,EACD,OAAO,SAAS;AAEf,QAAI,CAACC,WAAU,WAAA,GAAI;AAClBC,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,OACV;AAGD,iBAAW,MAAM;AAChBA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAK;AAAA,SACL;AAAA,MACD,GAAE,IAAI;AACP;AAAA,IACD;AAGA,SAAK,kBAAkBC,4BAAW;AAGlC,SAAK,eAAe;AAGpB,SAAK,aAAa;AAGlB,SAAK,uBAAuB;AAG5B,QAAI,QAAQ,SAAS;AACpB,WAAK,cAAc,QAAQ,OAAO;AAAA,IACnC;AAAA,EACA;AAAA,EACD,SAAS;AAAA,IACR,aAAa;AACZD,oBAAAA,MAAI,aAAa;AAAA,IACjB;AAAA;AAAA,IAED,MAAM,iBAAiB;AACtB,UAAI,KAAK;AAAS;AAClB,WAAK,UAAU;AAEf,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAED,cAAM,MAAM,MAAME,aAAiB,kBAAC,CAAC;AAErCF,sBAAAA,MAAY,MAAA,OAAA,uCAAA,SAAS,GAAG;AAExB,YAAI,IAAI,SAAS,KAAK,IAAI,QAAQ,IAAI,KAAK,MAAM;AAChD,eAAK,YAAY,IAAI,KAAK;AAG1B,cAAI,KAAK,UAAU,SAAS,GAAG;AAC9B,iBAAK,SAAS,OAAO,KAAK,UAAU,CAAC,EAAE,GAAG,SAAS;AAAA,UACpD;AAAA,eACM;AACN,gBAAM,IAAI,MAAM,QAAQ;AAAA,QACzB;AAAA,MACC,SAAO,OAAO;AACfA,sBAAAA,4DAAc,WAAW,KAAK;AAE9B,aAAK,qBAAqB;AAC1BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF,UAAU;AACT,aAAK,UAAU;AACfA,sBAAAA,MAAI,YAAY;AAAA,MACjB;AAAA,IACA;AAAA;AAAA,IAED,uBAAuB;AAEtB,WAAK,YAAY;AAGjB,WAAK,SAAS,OAAO;AAGrBA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,QACN,UAAU;AAAA,MACX,CAAC;AAAA,IACD;AAAA,IACD,gBAAgB;AACfA,oBAAAA,MAAI,UAAU;AAAA,QACb,OAAO;AAAA,QACP,MAAM;AAAA,OACN;AAAA,IACD;AAAA,IACD,eAAe,MAAM;AACpB,WAAK,SAAS,OAAO;AAAA,IACrB;AAAA,IACD,MAAM,cAAc;AACnB,UAAI;AAEH,cAAM,MAAM,MAAM,IAAI,QAAQ,CAAC,SAAS,WAAW;AAClDA,wBAAAA,MAAI,YAAY;AAAA,YACf,OAAO,IAAI,KAAK,OAAO;AAAA,YACvB,UAAU,CAAC,YAAY;AAAA,YACvB,YAAY,CAAC,SAAS,QAAQ;AAAA,YAC9B,SAAS;AAAA,YACT,MAAM;AAAA,WACN;AAAA,SACD;AAED,YAAI,IAAI,iBAAiB,IAAI,cAAc,SAAS,GAAG;AACtDA,wBAAAA,MAAI,YAAY;AAAA,YACf,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AAED,cAAI;AAEH,kBAAM,iBAAiB,IAAI,cAAc,IAAI,OAAO,aAAa;AAChE,kBAAI;AAEH,uBAAO,MAAM,KAAK,WAAW,QAAQ;AAAA,cACpC,SAAO,OAAO;AACfA,8BAAAA,MAAA,MAAA,SAAA,uCAAc,WAAW,KAAK;AAC9B,uBAAO;AAAA,cACR;AAAA,aACA;AAGD,kBAAM,gBAAgB,MAAM,QAAQ,IAAI,cAAc;AAGtD,kBAAM,cAAc,cAAc,OAAO,SAAO,QAAQ,IAAI;AAG5D,iBAAK,SAAS,CAAC,GAAG,KAAK,QAAQ,GAAG,WAAW;AAAA,UAC5C,SAAO,OAAO;AACfA,0BAAAA,MAAA,MAAA,SAAA,uCAAc,cAAc,KAAK;AACjCA,0BAAAA,MAAI,UAAU;AAAA,cACb,OAAO;AAAA,cACP,MAAM;AAAA,aACN;AAAA,UACF,UAAU;AACTA,0BAAAA,MAAI,YAAY;AAAA,UACjB;AAAA,QACD;AAAA,MACC,SAAO,OAAO;AACfA,sBAAAA,4DAAc,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF;AAAA,IACA;AAAA;AAAA,IAGD,MAAM,WAAW,UAAU;AAC1B,aAAO,IAAI,QAAQ,CAAC,SAAS,WAAW;AAEvC,cAAM,QAAQA,cAAAA,MAAI,eAAe,OAAO;AAExC,YAAI,CAAC,OAAO;AACXA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AACD,iBAAO,OAAO,IAAI,MAAM,MAAM,CAAC;AAAA,QAChC;AAEAA,sBAAAA,MAAI,WAAW;AAAA,UACd,KAAKG,gBAAa,eAAE;AAAA,UACpB;AAAA,UACA,MAAM;AAAA,UACN,QAAQ;AAAA,YACP,iBAAiB,YAAY;AAAA,UAC7B;AAAA,UACD,SAAS,CAAC,cAAc;AACvB,gBAAI;AACH,oBAAM,OAAO,KAAK,MAAM,UAAU,IAAI;AACtCH,4BAAAA,MAAY,MAAA,OAAA,uCAAA,SAAS,IAAI;AACzB,kBAAI,KAAK,SAAS,KAAK,KAAK,MAAM;AAEjC,wBAAQ,KAAK,KAAK,GAAG;AAAA,qBACf;AACN,uBAAO,IAAI,MAAM,KAAK,WAAW,MAAM,CAAC;AAAA,cACzC;AAAA,YACC,SAAO,OAAO;AACfA,4BAAAA,MAAc,MAAA,SAAA,uCAAA,aAAa,KAAK;AAChC,qBAAO,KAAK;AAAA,YACb;AAAA,UACA;AAAA,UACD,MAAM,CAAC,QAAQ;AACdA,0BAAAA,MAAA,MAAA,SAAA,uCAAc,WAAW,GAAG;AAC5B,mBAAO,GAAG;AAAA,UACX;AAAA,SACA;AAAA,OACD;AAAA,IACD;AAAA,IACD,YAAY,OAAO;AAClB,WAAK,OAAO,OAAO,OAAO,CAAC;AAAA,IAC3B;AAAA,IACD,qBAAqB,WAAW;AAC/B,WAAK,SAAS,mBAAmB;AAAA,IACjC;AAAA,IACD,iBAAiB,WAAW;AAC3B,WAAK,SAAS,eAAe;AAAA,IAC7B;AAAA,IACD,YAAY;AACX,UAAI,CAAC,KAAK,SAAS,SAAS,CAAC,KAAK,SAAS,aAAa;AACvDA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD;AAAA,MACD;AAEA,UAAI;AAEH,cAAM,YAAY;AAAA,UACjB,GAAG,KAAK;AAAA,UACR,QAAQ,KAAK;AAAA,QACd;AAGA,cAAM,UAAUI,cAAa,cAAC,SAAS;AAEvC,YAAI,SAAS;AACZJ,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AAGD,qBAAW,MAAM;AAChBA,0BAAAA,MAAI,aAAa;AAAA,UACjB,GAAE,IAAI;AAAA,eACD;AACN,gBAAM,IAAI,MAAM,MAAM;AAAA,QACvB;AAAA,MACD,SAAS,GAAG;AACXA,sBAAAA,MAAA,MAAA,SAAA,uCAAc,UAAU,CAAC;AACzBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF;AAAA,IACA;AAAA,IACD,MAAM,cAAc;AAEnB,UAAI,CAACD,WAAU,WAAA,GAAI;AAClBC,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAED,mBAAW,MAAM;AAChBA,wBAAAA,MAAI,WAAW;AAAA,YACd,KAAK;AAAA,WACL;AAAA,QACD,GAAE,IAAI;AACP;AAAA,MACD;AAGA,UAAI,CAAC,KAAK,aAAY;AAAI;AAG1B,UAAI,eAAe;AAEnB,UAAI;AAEHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,UACP,MAAM;AAAA,QACP,CAAC;AACD,uBAAe;AAGf,YAAI,UAAU;AAGd,cAAM,iBAAiB,KAAK,SAAS,YAAY,MAAM,IAAI,EAAE,OAAO,OAAK,EAAE,KAAM,CAAA;AACjF,uBAAe,QAAQ,eAAa;AACnC,qBAAW,MAAM,SAAS;AAAA,QAC3B,CAAC;AAGD,YAAI,KAAK,OAAO,SAAS,GAAG;AAC3B,eAAK,OAAO,QAAQ,YAAU;AAC7B,uBAAW,gBAAgB,MAAM;AAAA,UAClC,CAAC;AAAA,QACF;AAGA,YAAI,WAAW,KAAK;AAGpB,cAAM,aAAa;AAAA,UAClB,YAAY,KAAK,SAAS,OAAO,SAAS,KAAK,SAAS,IAAI,IAAI;AAAA,UAChE,OAAO,KAAK,SAAS;AAAA,UACrB;AAAA,UACA,kBAAkB,KAAK,SAAS;AAAA,UAChC,cAAc,KAAK,SAAS;AAAA,UAC5B,cAAc,KAAK,SAAS,iBAAiB;AAAA,UAC7C,SAAS;AAAA;AAAA,UACT;AAAA,UACA,QAAQ,KAAK;AAAA,QACd;AAEAA,sBAAA,MAAA,MAAA,OAAA,uCAAY,SAAS,UAAU;AAG/B,cAAM,MAAM,MAAMK,wBAAW,UAAU;AAGvC,YAAI,cAAc;AACjBL,wBAAG,MAAC,YAAW;AACf,yBAAe;AAAA,QAChB;AAEA,YAAI,IAAI,SAAS,GAAG;AAEnB,gBAAM,UAAU,IAAI,KAAK;AAGzB,cAAI,SAAS;AAEZ,kBAAM,iBAAiB,KAAK,gBAAgB,KAAK,OAAK,EAAE,OAAO,KAAK,SAAS,gBAAgB;AAC7F,kBAAM,aAAa,KAAK,SAAS,eAAe,KAAK,YAAY,KAAK,OAAK,EAAE,OAAO,KAAK,SAAS,YAAY,IAAI;AAGlH,kBAAM,eAAe,iBAAiB,eAAe,QAAQ;AAC7D,kBAAM,WAAW,aAAa,WAAW,QAAQ;AACjD,kBAAM,aAAa,eAAe;AAGlC,gBAAI,aAAa,GAAG;AACnB,kBAAI;AAEH,sBAAM,OAAO,aACV,GAAG,eAAe,KAAK,IAAI,WAAW,KAAK,KAC3C,eAAe;AAGlB,sBAAM,YAAY,MAAMM,uBAAa;AAAA,kBACpC;AAAA,kBACA;AAAA,kBACA,UAAU;AAAA,gBACX,CAAC;AAED,oBAAI,UAAU,SAAS;AACtBN,gCAAAA,MAAI,UAAU;AAAA,oBACb,OAAO;AAAA,oBACP,MAAM;AAAA,kBACP,CAAC;AAAA,uBACK;AACNA,gCAAAA,MAAI,UAAU;AAAA,oBACb,OAAO,UAAU,WAAW;AAAA,oBAC5B,MAAM;AAAA,kBACP,CAAC;AAAA,gBACF;AAAA,cACD,SAAS,UAAU;AAClBA,8BAAc,MAAA,MAAA,SAAA,uCAAA,WAAW,QAAQ;AACjCA,8BAAAA,MAAI,UAAU;AAAA,kBACb,OAAO,SAAS,WAAW;AAAA,kBAC3B,MAAM;AAAA,gBACP,CAAC;AAAA,cACF;AAAA,YACD;AAAA,UACD;AAEAA,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AAGD,qBAAW,MAAM;AAChBA,0BAAAA,MAAI,aAAa;AAAA,UACjB,GAAE,IAAI;AAAA,eACD;AACN,gBAAM,IAAI,MAAM,IAAI,WAAW,MAAM;AAAA,QACtC;AAAA,MACC,SAAO,OAAO;AAEf,YAAI,cAAc;AACjBA,wBAAG,MAAC,YAAW;AACf,yBAAe;AAAA,QAChB;AAEAA,sBAAAA,4DAAc,WAAW,KAAK;AAC9BA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO,MAAM,WAAW;AAAA,UACxB,MAAM;AAAA,SACN;AAAA,MACF,UAAU;AAET,YAAI,cAAc;AACjBA,wBAAG,MAAC,YAAW;AAAA,QAChB;AAAA,MACD;AAAA,IACA;AAAA,IACD,eAAe;AAEd,UAAI,CAAC,KAAK,SAAS,MAAM;AACxBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD,eAAO;AAAA,MACR;AAGA,UAAI,CAAC,KAAK,SAAS,MAAM,KAAI,GAAI;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD,eAAO;AAAA,MACR;AAGA,UAAI,CAAC,KAAK,SAAS,YAAY,KAAI,GAAI;AACtCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD,eAAO;AAAA,MACR;AAGA,UAAI,KAAK,gBAAgB,SAAS,KAAK,CAAC,KAAK,SAAS,kBAAkB;AACvEA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AACD,eAAO;AAAA,MACR;AAEA,aAAO;AAAA,IACP;AAAA;AAAA,IAED,yBAAyB;AAExB,UAAI,KAAK,UACR,KAAK,OAAO,MAAM,WACjB,CAAC,KAAK,OAAO,MAAM,OAAO,cAAc,KAAK,OAAO,MAAM,OAAO,WAAW,WAAW,IAAI;AAE5F,aAAK,OAAO,SAAS,sBAAsB,EAAE,MAAM,WAAS;AAC3DA,wBAAAA,4DAAc,aAAa,KAAK;AAAA,SAChC;AAAA,MACF;AAAA,IACA;AAAA,IACD,cAAc;AAEb,UAAI,WAAW;AACf,YAAM,kBAAkBA,cAAAA,MAAI,eAAe,iBAAiB;AAG5D,UAAI,KAAK,cAAc,KAAK,WAAW,SAAS,GAAG;AAClD,cAAM,gBAAgB,KAAK,WAAW,KAAK,YAAU,OAAO,SAAS,eAAe;AACpF,YAAI,eAAe;AAClB,qBAAW,cAAc;AACzBA,kFAAY,aAAa,UAAU,SAAS,eAAe;AAAA,eACrD;AACNA,kFAAY,+BAA+B,eAAe;AAAA,QAC3D;AAAA,MACD;AAEA,aAAO;AAAA,IACP;AAAA;AAAA,IAED,MAAM,eAAe;AACpB,UAAI;AACHA,sBAAAA,MAAI,YAAY;AAAA,UACf,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAED,cAAM,MAAM,MAAMO,4BAAe;AAEjC,YAAI,IAAI,SAAS,KAAK,IAAI,MAAM;AAE/B,cAAI,cAAc,IAAI,KAAK,eAAe,CAAC;AAC3C,cAAI,kBAAkB,IAAI,KAAK,mBAAmB,CAAC;AAGnD,gBAAM,aAAa,IAAI,KAAK,eAAe,SAAY,IAAI,KAAK,aAAa;AAC7E,gBAAM,iBAAiB,IAAI,KAAK,mBAAmB,SAAY,IAAI,KAAK,iBAAiB;AAGzF,cAAI,YAAY,SAAS,GAAG;AAC3B,0BAAc,YAAY,KAAK,CAAC,GAAG,MAAM;AAExC,kBAAI,EAAE,cAAc,EAAE,aAAa,EAAE,cAAc,UAAa,EAAE,cAAc,QAAW;AAC1F,uBAAO,EAAE,KAAK,EAAE;AAAA,cACjB;AACA,qBAAO,EAAE,YAAY,EAAE;AAAA,aACvB;AAAA,UACF;AAGA,cAAI,gBAAgB,SAAS,GAAG;AAC/B,8BAAkB,gBAAgB,KAAK,CAAC,GAAG,MAAM;AAEhD,kBAAI,EAAE,cAAc,EAAE,aAAa,EAAE,cAAc,UAAa,EAAE,cAAc,QAAW;AAC1F,uBAAO,EAAE,KAAK,EAAE;AAAA,cACjB;AACA,qBAAO,EAAE,YAAY,EAAE;AAAA,aACvB;AAAA,UACF;AAGA,eAAK,cAAc,aAAa,cAAc,CAAC;AAC/C,eAAK,kBAAkB,iBAAiB,kBAAkB,CAAC;AAG3D,cAAI,KAAK,gBAAgB,SAAS,GAAG;AACpC,iBAAK,SAAS,mBAAmB,KAAK,gBAAgB,CAAC,EAAE;AAAA,iBACnD;AAEN,iBAAK,SAAS,mBAAmB;AAAA,UAClC;AAGA,cAAI,CAAC,YAAY;AAChB,iBAAK,SAAS,eAAe;AAAA,UAC9B;AAAA,eACM;AACN,gBAAM,IAAI,MAAM,UAAU;AAAA,QAC3B;AAAA,MACC,SAAO,OAAO;AACfP,sBAAAA,MAAA,MAAA,SAAA,uCAAc,aAAa,KAAK;AAChCA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF,UAAU;AACTA,sBAAAA,MAAI,YAAY;AAAA,MACjB;AAAA,IACA;AAAA;AAAA,IAED,cAAc,SAAS;AACtB,UAAI;AACH,cAAM,YAAYQ,cAAAA,aAAa,OAAO,OAAO,CAAC;AAE9C,YAAI,CAAC,WAAW;AACfR,wBAAAA,MAAI,UAAU;AAAA,YACb,OAAO;AAAA,YACP,MAAM;AAAA,WACN;AACD;AAAA,QACD;AAGA,YAAI,UAAU,MAAM;AACnB,eAAK,SAAS,OAAO,UAAU;AAAA,QAChC;AAEA,YAAI,UAAU,OAAO;AACpB,eAAK,SAAS,QAAQ,UAAU;AAAA,QACjC;AAEA,YAAI,UAAU,aAAa;AAC1B,eAAK,SAAS,cAAc,UAAU;AAAA,QACvC;AAEA,YAAI,UAAU,kBAAkB;AAC/B,eAAK,SAAS,mBAAmB,UAAU;AAAA,QAC5C;AAEA,YAAI,UAAU,cAAc;AAC3B,eAAK,SAAS,eAAe,UAAU;AAAA,QACxC;AAGA,YAAI,UAAU,UAAU,UAAU,OAAO,SAAS,GAAG;AACpD,eAAK,SAAS,UAAU;AAAA,QACzB;AAAA,MACD,SAAS,GAAG;AACXA,sBAAAA,MAAA,MAAA,SAAA,uCAAc,UAAU,CAAC;AACzBA,sBAAAA,MAAI,UAAU;AAAA,UACb,OAAO;AAAA,UACP,MAAM;AAAA,SACN;AAAA,MACF;AAAA,IACD;AAAA,EACD;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC7vBD,GAAG,WAAW,eAAe;"}