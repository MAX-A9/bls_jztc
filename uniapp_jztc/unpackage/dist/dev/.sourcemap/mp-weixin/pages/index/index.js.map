{"version":3,"file":"index.js","sources":["pages/index/index.vue","D:/HBuilderX/plugins/uniapp-cli-vite/uniPage:/cGFnZXMvaW5kZXgvaW5kZXgudnVl"],"sourcesContent":["<template>\n\t<view class=\"container\">\n\t\t<!-- 骨架屏，在页面加载时显示 -->\n\t\t<view class=\"skeleton-screen\" v-if=\"pageLoading\">\n\t\t\t<view class=\"skeleton-header\">\n\t\t\t\t<view class=\"skeleton-nav\"></view>\n\t\t\t\t<view class=\"skeleton-search\"></view>\n\t\t\t</view>\n\t\t\t<view class=\"skeleton-content\">\n\t\t\t\t<view class=\"skeleton-item\" v-for=\"i in 4\" :key=\"i\"></view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 固定顶部区域 -->\n\t\t<view class=\"fixed-header\">\n\t\t\t<!-- 渐变背景区域 -->\n\t\t\t<view class=\"gradient-bg\">\n\t\t\t\t<!-- 自定义状态栏 -->\n\t\t\t\t<view class=\"custom-nav\" :style=\"{ paddingTop: statusBarHeight + 'px' }\">\n\t\t\t\t\t<view class=\"nav-content\" :style=\"{ height: navBarHeight + 'px' }\">\n\t\t\t\t\t\t<view class=\"nav-logo\" :style=\"{ height: isIOS ? '28px' : '32px' }\">\n\t\t\t\t\t\t\t<image :src=\"logoUrl\" mode=\"heightFix\" class=\"logo-img\" />\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"nav-center\">\n\t\t\t\t\t\t\t<view class=\"nav-location\" @tap=\"navigateToLocationSelect\">\n\t\t\t\t\t\t\t\t<text class=\"location-text\">{{ currentLocation || '定位中...' }}</text>\n\t\t\t\t\t\t\t\t<uni-icons type=\"bottom\" size=\"12\" color=\"#ffffff\"></uni-icons>\n\t\t\t\t\t\t\t</view>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view class=\"nav-right\"></view>\n\t\t\t\t\t</view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 搜索框/菜单导航切换区域 -->\n\t\t\t\t<view class=\"menu-wrapper\">\n\t\t\t\t\t<!-- 搜索框，当未滚动到指定位置时显示 -->\n\t\t\t\t\t<view class=\"search-box\" v-show=\"!showFixedMenu\">\n\t\t\t\t\t\t<view class=\"search-input\">\n\t\t\t\t\t\t\t<uni-icons type=\"search\" size=\"16\" color=\"#666666\"></uni-icons>\n\t\t\t\t\t\t\t<input \n\t\t\t\t\t\t\t\ttype=\"text\" \n\t\t\t\t\t\t\t\tplaceholder=\"搜索\" \n\t\t\t\t\t\t\t\tplaceholder-class=\"placeholder\"\n\t\t\t\t\t\t\t\tconfirm-type=\"search\"\n\t\t\t\t\t\t\t\t@confirm=\"handleSearch\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</view>\n\t\t\t\t\t\n\t\t\t\t\t<!-- 菜单导航，当滚动到内容区域时显示 -->\n\t\t\t\t\t<scroll-view \n\t\t\t\t\t\tclass=\"nav-menu fixed-nav-menu scroll-view-container\"\n\t\t\t\t\t\tscroll-x=\"true\" \n\t\t\t\t\t\t:enhanced=\"true\"\n\t\t\t\t\t\t:class=\"{ 'menu-show': showFixedMenu }\"\n\t\t\t\t\t\tv-show=\"showFixedMenu\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tclass=\"menu-item\" \n\t\t\t\t\t\t\tv-for=\"(item, index) in menuList\" \n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t:class=\"{ active: currentMenu === index }\"\n\t\t\t\t\t\t\t@click=\"switchMenu(index)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<text class=\"fixed-menu-text\">{{ item.name }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"menuLoading\" class=\"menu-loading\">\n\t\t\t\t\t\t\t<text class=\"loading-text\">加载中...</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t\t\n\t\t<!-- 使用scroll-view包裹可滚动内容 -->\n\t\t<scroll-view \n\t\t\tclass=\"scroll-content scroll-view-container\" \n\t\t\tscroll-y=\"true\"\n\t\t\t:style=\"{ paddingTop: headerHeight + 'px' }\"\n\t\t\t:enhanced=\"true\"\n\t\t\t:bounces=\"true\"\n\t\t\t@scroll=\"handleScroll\"\n\t\t\t:scroll-top=\"scrollTop\"\n\t\t\tscroll-with-animation\n\t\t\tref=\"scrollView\"\n\t\t\t@scrolltolower=\"handleScrollToLower\"\n\t\t\t@refresherrefresh=\"handleRefresh\"\n\t\t\trefresher-enabled\n\t\t\t:refresher-triggered=\"refreshing\"\n\t\t>\n\t\t\t<!-- 页面内容区域 -->\n\t\t\t<view class=\"page-content\">\n\t\t\t\t<!-- 功能区域 -->\n\t\t\t\t<function-area ref=\"functionArea\"></function-area>\n\t\t\t\t\n\t\t\t\t<!-- 活动区域 -->\n\t\t\t\t<activity-area ref=\"activityArea\"></activity-area>\n\t\t\t\t\n\t\t\t\t<!-- 轮播图 -->\n\t\t\t\t<swiper-banner ref=\"swiperBanner\"></swiper-banner>\n\t\t\t\t\n\t\t\t\t<!-- 菜单导航 -->\n\t\t\t\t<view class=\"category-menu\" id=\"category-menu\">\n\t\t\t\t\t<scroll-view \n\t\t\t\t\t\tclass=\"nav-menu scroll-view-container\" \n\t\t\t\t\t\tscroll-x=\"true\" \n\t\t\t\t\t\t:enhanced=\"true\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<view \n\t\t\t\t\t\t\tclass=\"menu-item\" \n\t\t\t\t\t\t\tv-for=\"(item, index) in menuList\" \n\t\t\t\t\t\t\t:key=\"index\"\n\t\t\t\t\t\t\t:class=\"{ active: currentMenu === index }\"\n\t\t\t\t\t\t\t@click=\"switchMenu(index)\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<text class=\"menu-text\">{{ item.name }}</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t\t<view v-if=\"menuLoading\" class=\"menu-loading\">\n\t\t\t\t\t\t\t<text class=\"loading-text\">加载中...</text>\n\t\t\t\t\t\t</view>\n\t\t\t\t\t</scroll-view>\n\t\t\t\t</view>\n\t\t\t\t\n\t\t\t\t<!-- 内容列表 -->\n\t\t\t\t<view class=\"content-area\" id=\"content-area\">\n\t\t\t\t\t<content-list ref=\"contentList\"></content-list>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</scroll-view>\n\t\t\n\t\t<!-- 返回顶部按钮 -->\n\t\t<view \n\t\t\tclass=\"back-to-top\" \n\t\t\tv-show=\"showBackToTop\"\n\t\t\t@tap=\"scrollToTop\"\n\t\t>\n\t\t\t<uni-icons type=\"top\" size=\"24\" color=\"#ffffff\"></uni-icons>\n\t\t</view>\n\t\t\n\t\t<!-- 添加 TabBar 组件 -->\n\t\t<tab-bar @tabChange=\"handleTabChange\" @publish=\"handlePublish\"></tab-bar>\n\t\t\n\t\t<!-- 位置选择引导弹窗 -->\n\t\t<view class=\"location-guide-mask\" v-if=\"showLocationGuide\" @tap=\"closeLocationGuide\">\n\t\t\t<view class=\"location-guide-content\" @tap.stop>\n\t\t\t\t<view class=\"guide-header\">\n\t\t\t\t\t<text class=\"guide-title\">选择所在地区</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"guide-body\">\n\t\t\t\t\t<text class=\"guide-text\">请选择您所在的地区以获取更精准的服务</text>\n\t\t\t\t\t<text class=\"guide-current\">当前：{{ currentLocation }}</text>\n\t\t\t\t</view>\n\t\t\t\t<view class=\"guide-footer\">\n\t\t\t\t\t<button class=\"guide-btn guide-btn-confirm\" @tap=\"goToLocationSelectFromGuide\">去选择</button>\n\t\t\t\t</view>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\timport deviceMixin from '@/mixins/device.js'\n\timport shareMixin from '@/mixins/share.js'\n\timport FunctionArea from '@/components/function-area/index.vue'\n\timport SwiperBanner from '@/components/swiper-banner/index.vue'\n\timport ContentList from '@/components/content-list/index.vue'\n\timport ActivityArea from '@/components/activity-area/index.vue'\n\timport TabBar from '@/components/tab-bar/index.vue'\n\timport { get } from '@/utils/request.js'\n\timport { settings } from '@/apis/index.js'\n\t\n\texport default {\n\t\tcomponents: {\n\t\t\tFunctionArea,\n\t\t\tSwiperBanner,\n\t\t\tContentList,\n\t\t\tActivityArea,\n\t\t\tTabBar\n\t\t},\n\t\tmixins: [deviceMixin, shareMixin],\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\ttabIndex: 0,\n\t\t\t\tcurrentLocation: '',\n\t\t\t\tisLocating: false,\n\t\t\t\tmenuList: [], // 改为空数组，通过API获取\n\t\t\t\tmenuLoading: false, // 添加加载状态\n\t\t\t\tcurrentMenu: 0,\n\t\t\t\theaderHeight: 0,\n\t\t\t\tshowFixedMenu: false, // 是否显示固定菜单\n\t\t\t\tmenuTop: 0, // 菜单导航的顶部位置\n\t\t\t\tcontentTop: 0, // 内容区域顶部位置\n\t\t\t\tshowBackToTop: false, // 是否显示返回顶部按钮\n\t\t\t\tscrollTop: 0, // 用于控制滚动位置\n\t\t\t\toldScrollTop: 0, // 添加这个变量用于强制更新 scroll-top\n\t\t\t\tshowLocationGuide: false, // 是否显示位置引导弹窗\n\t\t\t\tpageLoading: true, // 页面加载状态\n\t\t\t\trefreshing: false, // 添加下拉刷新状态\n\t\t\t\tlogoUrl: '', // 默认logo地址\n\t\t\t\tcontentListInitialized: false, // 标记内容列表是否已初始化\n\t\t\t\tisHomePage: true, // 标记为首页，用于分享功能\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\t// 设置页面加载超时处理\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (this.pageLoading) {\n\t\t\t\t\tthis.pageLoading = false;\n\t\t\t\t\tconsole.log('页面加载超时，强制显示页面');\n\t\t\t\t}\n\t\t\t}, 3000);\n\t\t\t\n\t\t\t// 优先初始化位置，这是必须的\n\t\t\tthis.initLocation();\n\t\t\t\n\t\t\t// 使用延迟加载策略\n\t\t\tthis.staggeredLoading();\n\t\t},\n\t\tmounted() {\n\t\t\tthis.calculateHeaderHeight()\n\t\t\t// 延迟获取位置信息，确保页面完全渲染\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis.getMenuPosition()\n\t\t\t}, 300)\n\t\t},\n\t\tonReady() {\n\t\t\t// 页面渲染完成后重新计算位置\n\t\t\tthis.getMenuPosition()\n\t\t},\n\t\tonResize() {\n\t\t\t// 屏幕尺寸变化时重新计算位置\n\t\t\tthis.calculateHeaderHeight()\n\t\t\tthis.getMenuPosition()\n\t\t},\n\t\tonShow() {\n\t\t\t// 设置当前页面的导航索引\n\t\t\tthis.tabIndex = 0;\n\t\t\t\n\t\t\t// 获取并更新最新的位置信息\n\t\t\tconst savedLocation = uni.getStorageSync('currentLocation');\n\t\t\tif (savedLocation) {\n\t\t\t\tthis.currentLocation = savedLocation;\n\t\t\t\tconsole.log('页面显示时更新位置信息:', savedLocation);\n\t\t\t}\n\t\t\t\n\t\t\t// 初始化内容列表组件（如果尚未初始化）\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tif (this.$refs.contentList && !this.contentListInitialized) {\n\t\t\t\t\tconsole.log('页面显示时，初始化内容列表组件');\n\t\t\t\t\tthis.$refs.contentList.init();\n\t\t\t\t\tthis.contentListInitialized = true;\n\t\t\t\t} else if (this.$refs.contentList) {\n\t\t\t\t\t// 已初始化过的情况下，不重复完整初始化\n\t\t\t\t\tconsole.log('内容列表已初始化，使用已有数据');\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\t// 检查是否是首次打开应用\n\t\t\tconst isFirstLaunch = !uni.getStorageSync('notFirstLaunch');\n\t\t\tif (isFirstLaunch) {\n\t\t\t\t// 标记已非首次启动\n\t\t\t\tuni.setStorageSync('notFirstLaunch', true);\n\t\t\t\t// 延迟显示引导弹窗，确保界面已加载完成\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.showLocationGuide = true;\n\t\t\t\t}, 1000);\n\t\t\t}\n\t\t\t\n\t\t\t// 显示分享菜单\n\t\t\tthis.showShareMenu();\n\t\t},\n\t\tonNavigationBarButtonTap(e) {\n\t\t\tif (e.index === 0) {\n\t\t\t\tthis.navigateToLocationSelect()\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\t// 添加一个分阶段加载的方法\n\t\t\tstaggeredLoading() {\n\t\t\t\t// 第一阶段：必要数据（分类菜单）\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.fetchMenuCategories();\n\t\t\t\t}, 200);\n\t\t\t\t\n\t\t\t\t// 第二阶段：次要数据（基础设置）\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.fetchBaseSettings();\n\t\t\t\t}, 800);\n\t\t\t\t\n\t\t\t\t// 第三阶段：可见区域内的组件（延迟到页面可见后）\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.initVisibleComponents();\n\t\t\t\t}, 1500);\n\t\t\t},\n\t\t\t\n\t\t\t// 初始化可见区域内的组件\n\t\t\tinitVisibleComponents() {\n\t\t\t\t// 先初始化功能区域\n\t\t\t\tif (this.$refs.functionArea) {\n\t\t\t\t\tthis.$refs.functionArea.loadMiniProgramList();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 再初始化轮播图\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this.$refs.swiperBanner) {\n\t\t\t\t\t\tthis.$refs.swiperBanner.fetchBannerData();\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t\t\n\t\t\t\t// 最后初始化活动区域\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this.$refs.activityArea) {\n\t\t\t\t\t\tthis.$refs.activityArea.fetchActivityData();\n\t\t\t\t\t}\n\t\t\t\t}, 600);\n\t\t\t},\n\t\t\t\n\t\t\t// 获取菜单分类数据\n\t\t\tfetchMenuCategories() {\n\t\t\t\tthis.menuLoading = true;\n\t\t\t\t\n\t\t\t\t// 添加默认推荐选项\n\t\t\t\tconst defaultMenu = {\n\t\t\t\t\tid: 0,\n\t\t\t\t\tname: '推荐'\n\t\t\t\t};\n\t\t\t\t\n\t\t\t\t// 添加超时处理\n\t\t\t\tconst fetchTimeout = setTimeout(() => {\n\t\t\t\t\tif (this.menuLoading) {\n\t\t\t\t\t\t// 超时后使用默认菜单并关闭加载状态\n\t\t\t\t\t\tthis.useDefaultMenu();\n\t\t\t\t\t\tthis.menuLoading = false;\n\t\t\t\t\t\tthis.pageLoading = false;\n\t\t\t\t\t\tconsole.log('获取菜单分类超时，使用默认值');\n\t\t\t\t\t}\n\t\t\t\t}, 3000);\n\t\t\t\t\n\t\t\t\t// 调用接口获取分类数据\n\t\t\t\tget('/wx/client/content/categories', { type: 1 })\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tclearTimeout(fetchTimeout);\n\t\t\t\t\t\tif (res.code === 0) {\n\t\t\t\t\t\t\t// 处理返回数据\n\t\t\t\t\t\t\tconst categoryList = res.data.list || [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// 将推荐选项添加到列表最前面\n\t\t\t\t\t\t\tthis.menuList = [defaultMenu, ...categoryList];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tconsole.log('成功获取菜单分类:', this.menuList);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('获取菜单分类失败:', res.message || '未知错误');\n\t\t\t\t\t\t\t// 加载失败时使用默认菜单\n\t\t\t\t\t\t\tthis.useDefaultMenu();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tclearTimeout(fetchTimeout);\n\t\t\t\t\t\tconsole.error('请求菜单分类接口出错:', err);\n\t\t\t\t\t\t// 加载失败时使用默认菜单\n\t\t\t\t\t\tthis.useDefaultMenu();\n\t\t\t\t\t})\n\t\t\t\t\t.finally(() => {\n\t\t\t\t\t\tclearTimeout(fetchTimeout);\n\t\t\t\t\t\tthis.menuLoading = false;\n\t\t\t\t\t\tthis.pageLoading = false;\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t\n\t\t\t// 接口失败时使用默认菜单\n\t\t\tuseDefaultMenu() {\n\t\t\t\tthis.menuList = [];\n\t\t\t},\n\t\t\t\n\t\t\t// 初始化位置信息\n\t\t\tinitLocation() {\n\t\t\t\t// 优先使用本地存储的位置信息\n\t\t\t\tconst savedLocation = uni.getStorageSync('currentLocation');\n\t\t\t\tif (savedLocation) {\n\t\t\t\t\tthis.currentLocation = savedLocation;\n\t\t\t\t\tconsole.log('使用本地存储的位置信息:', savedLocation);\n\t\t\t\t\t\n\t\t\t\t\t// 检查是否有关联的地区ID\n\t\t\t\t\tconst locationId = uni.getStorageSync('currentLocationId');\n\t\t\t\t\tif (locationId) {\n\t\t\t\t\t\tconsole.log('使用已保存的地区ID:', locationId);\n\t\t\t\t\t\t// 通知其他组件位置已变更\n\t\t\t\t\t\tuni.$emit('locationChanged', { regionId: locationId });\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 仅在未初始化时才调用内容列表初始化方法\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tif (this.$refs.contentList && !this.contentListInitialized) {\n\t\t\t\t\t\t\t\tconsole.log('位置初始化后，调用内容列表初始化方法');\n\t\t\t\t\t\t\t\tthis.$refs.contentList.init();\n\t\t\t\t\t\t\t\tthis.contentListInitialized = true; // 标记为已初始化\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 如果没有本地存储的位置，则使用默认位置\n\t\t\t\tthis.useDefaultLocation();\n\t\t\t},\n\t\t\t\n\t\t\t// 使用默认位置\n\t\t\tuseDefaultLocation() {\n\t\t\t\t// 检查是否已有存储的位置信息\n\t\t\t\tconst savedLocation = uni.getStorageSync('currentLocation');\n\t\t\t\tif (savedLocation) {\n\t\t\t\t\tthis.currentLocation = savedLocation;\n\t\t\t\t\tconsole.log('使用已保存的位置:', savedLocation);\n\t\t\t\t\t\n\t\t\t\t\t// 检查是否有关联的地区ID\n\t\t\t\t\tconst locationId = uni.getStorageSync('currentLocationId');\n\t\t\t\t\tif (locationId) {\n\t\t\t\t\t\tconsole.log('使用已保存的地区ID:', locationId);\n\t\t\t\t\t\t// 通知其他组件位置已变更\n\t\t\t\t\t\tuni.$emit('locationChanged', { regionId: locationId });\n\t\t\t\t\t\t\n\t\t\t\t\t\t// 仅在未初始化时才调用内容列表初始化方法\n\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\tif (this.$refs.contentList && !this.contentListInitialized) {\n\t\t\t\t\t\t\t\tconsole.log('使用已保存位置后，调用内容列表初始化方法');\n\t\t\t\t\t\t\t\tthis.$refs.contentList.init();\n\t\t\t\t\t\t\t\tthis.contentListInitialized = true; // 标记为已初始化\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 尝试从store中获取地区列表\n\t\t\t\tconst store = this.$store;\n\t\t\t\tif (store && store.state.region && store.state.region.regionList.length > 0) {\n\t\t\t\t\t// 使用第一个地区作为默认位置\n\t\t\t\t\tconst firstRegion = store.state.region.regionList[0];\n\t\t\t\t\tthis.currentLocation = firstRegion.name;\n\t\t\t\t\t\n\t\t\t\t\t// 保存区域ID到本地存储\n\t\t\t\t\tconsole.log('从store中设置默认地区ID:', firstRegion.id);\n\t\t\t\t\tuni.setStorageSync('currentLocationId', firstRegion.id);\n\t\t\t\t\tuni.setStorageSync('currentLocation', firstRegion.name);\n\t\t\t\t\t\n\t\t\t\t\t// 触发位置更改事件\n\t\t\t\t\tuni.$emit('locationChanged', { regionId: firstRegion.id });\n\t\t\t\t\t\n\t\t\t\t\t// 仅在未初始化时才调用内容列表初始化方法\n\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\tif (this.$refs.contentList && !this.contentListInitialized) {\n\t\t\t\t\t\t\tconsole.log('设置默认位置后，调用内容列表初始化方法');\n\t\t\t\t\t\t\tthis.$refs.contentList.init();\n\t\t\t\t\t\t\tthis.contentListInitialized = true; // 标记为已初始化\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tconsole.log('设置默认位置:', firstRegion.name, '来自', firstRegion.location);\n\t\t\t\t} else {\n\t\t\t\t\t// 如果没有地区列表，先使用默认值，同时发起获取地区列表的请求\n\t\t\t\t\tthis.currentLocation = '请选择地区';\n\t\t\t\t\tif (store && store.dispatch) {\n\t\t\t\t\t\tstore.dispatch('region/getRegionList').then(() => {\n\t\t\t\t\t\t\t// 获取到地区列表后更新位置\n\t\t\t\t\t\t\tif (store.state.region.regionList.length > 0) {\n\t\t\t\t\t\t\t\tconst firstRegion = store.state.region.regionList[0];\n\t\t\t\t\t\t\t\tthis.currentLocation = firstRegion.name;\n\t\t\t\t\t\t\t\tuni.setStorageSync('currentLocation', this.currentLocation);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 保存区域ID到本地存储\n\t\t\t\t\t\t\t\tconsole.log('异步获取后设置地区ID:', firstRegion.id);\n\t\t\t\t\t\t\t\tuni.setStorageSync('currentLocationId', firstRegion.id);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 触发位置更改事件\n\t\t\t\t\t\t\t\tuni.$emit('locationChanged', { regionId: firstRegion.id });\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 仅在未初始化时才调用内容列表初始化方法\n\t\t\t\t\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\t\t\t\t\tif (this.$refs.contentList && !this.contentListInitialized) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('异步获取位置后，调用内容列表初始化方法');\n\t\t\t\t\t\t\t\t\t\tthis.$refs.contentList.init();\n\t\t\t\t\t\t\t\t\t\tthis.contentListInitialized = true; // 标记为已初始化\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconsole.log('异步更新默认位置:', firstRegion.name);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}).catch(err => {\n\t\t\t\t\t\t\tconsole.error('获取地区列表失败:', err);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 保存到本地存储，仅当没有已保存的位置时\n\t\t\t\tif (!savedLocation) {\n\t\t\t\t\tuni.setStorageSync('currentLocation', this.currentLocation);\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 关闭位置引导弹窗\n\t\t\tcloseLocationGuide() {\n\t\t\t\tthis.showLocationGuide = false;\n\t\t\t},\n\t\t\t\n\t\t\t// 引导页面跳转到位置选择\n\t\t\tgoToLocationSelectFromGuide() {\n\t\t\t\tthis.showLocationGuide = false;\n\t\t\t\tthis.navigateToLocationSelect();\n\t\t\t},\n\t\t\t\n\t\t\t// 跳转到位置选择页面\n\t\t\tnavigateToLocationSelect() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '/pages/location/select/index',\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t// 选择位置后的回调\n\t\t\t\t\t\tlocationSelected: (data) => {\n\t\t\t\t\t\t\tif (data && data.name) {\n\t\t\t\t\t\t\t\t// 更新当前位置\n\t\t\t\t\t\t\t\tthis.currentLocation = data.name;\n\t\t\t\t\t\t\t\t// 保存位置到本地存储\n\t\t\t\t\t\t\t\tuni.setStorageSync('currentLocation', data.name);\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t// 保存区域ID到本地存储并触发位置更改事件\n\t\t\t\t\t\t\t\tif (data.id) {\n\t\t\t\t\t\t\t\t\t// 打印当前数据，确认ID存在\n\t\t\t\t\t\t\t\t\tconsole.log('位置选择数据:', data);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 先清除旧的区域ID\n\t\t\t\t\t\t\t\t\tuni.removeStorageSync('currentLocationId');\n\t\t\t\t\t\t\t\t\t// 保存区域ID到本地存储\n\t\t\t\t\t\t\t\t\tuni.setStorageSync('currentLocationId', data.id);\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 强制刷新内容列表\n\t\t\t\t\t\t\t\t\tif (this.$refs.contentList) {\n\t\t\t\t\t\t\t\t\t\tconsole.log('直接调用内容列表组件方法更新区域ID:', data.id);\n\t\t\t\t\t\t\t\t\t\tthis.$refs.contentList.regionId = data.id;\n\t\t\t\t\t\t\t\t\t\tthis.$refs.contentList.resetAndLoad();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t// 触发位置更改事件\n\t\t\t\t\t\t\t\t\tconsole.log('发送locationChanged事件，regionId:', data.id);\n\t\t\t\t\t\t\t\t\tuni.$emit('locationChanged', { regionId: data.id });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\tconsole.log('用户选择了新位置:', data.name, 'ID:', data.id);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tswitchMenu(index) {\n\t\t\t\t// 防止菜单未加载完成时点击\n\t\t\t\tif (this.menuLoading || !this.menuList.length) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif (this.currentMenu !== index) {\n\t\t\t\t\t// 更新当前选中的菜单\n\t\t\t\t\tthis.currentMenu = index;\n\t\t\t\t\t\n\t\t\t\t\t// 获取选中分类的ID\n\t\t\t\t\tconst selectedCategory = this.menuList[index];\n\t\t\t\t\tconst categoryId = selectedCategory ? selectedCategory.id : '';\n\t\t\t\t\t\n\t\t\t\t\t// 通知内容列表组件更新分类\n\t\t\t\t\tif (this.$refs.contentList) {\n\t\t\t\t\t\tthis.$refs.contentList.handleCategoryChange(categoryId);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tcalculateHeaderHeight() {\n\t\t\t\tconst query = uni.createSelectorQuery().in(this)\n\t\t\t\tquery.select('.fixed-header').boundingClientRect(data => {\n\t\t\t\t\tthis.headerHeight = data.height\n\t\t\t\t}).exec()\n\t\t\t},\n\t\t\thandleSearch(e) {\n\t\t\t\tconst keyword = e.detail.value\n\t\t\t\tconsole.log('搜索关键词:', keyword)\n\t\t\t\t// 这里添加搜索处理逻辑\n\t\t\t},\n\t\t\t// 获取菜单导航的位置\n\t\t\tgetMenuPosition() {\n\t\t\t\tconst query = uni.createSelectorQuery().in(this)\n\t\t\t\t\n\t\t\t\t// 获取固定头部高度\n\t\t\t\tquery.select('.fixed-header').boundingClientRect(data => {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tthis.headerHeight = data.height\n\t\t\t\t\t}\n\t\t\t\t}).exec()\n\t\t\t\t\n\t\t\t\t// 获取分类菜单位置\n\t\t\t\tquery.select('#category-menu').boundingClientRect(data => {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\tthis.menuTop = data.top\n\t\t\t\t\t}\n\t\t\t\t}).exec()\n\t\t\t\t\n\t\t\t\t// 获取内容列表区域的位置\n\t\t\t\tquery.select('#content-area').boundingClientRect(data => {\n\t\t\t\t\tif (data) {\n\t\t\t\t\t\t// 内容区域的绝对位置减去头部高度，得到滚动时需要的相对位置\n\t\t\t\t\t\tthis.contentTop = data.top - this.headerHeight\n\t\t\t\t\t\tconsole.log('内容区域位置:', this.contentTop)\n\t\t\t\t\t}\n\t\t\t\t}).exec()\n\t\t\t},\n\t\t\t// 处理滚动事件\n\t\t\thandleScroll(e) {\n\t\t\t\tconst scrollTop = e.detail.scrollTop\n\t\t\t\tthis.oldScrollTop = scrollTop // 记录当前滚动位置\n\t\t\t\t\n\t\t\t\t// 当滚动超过一定距离时显示返回顶部按钮\n\t\t\t\tthis.showBackToTop = scrollTop > 500\n\t\t\t\t\n\t\t\t\t// 内容区域位置存在且有效时才进行比较\n\t\t\t\tif (this.contentTop && this.contentTop > 0) {\n\t\t\t\t\t// 更新固定菜单显示状态 - 改为滚动到内容区域时显示\n\t\t\t\t\tthis.showFixedMenu = scrollTop >= this.contentTop\n\t\t\t\t} else {\n\t\t\t\t\t// 防止位置计算错误时的降级处理\n\t\t\t\t\tthis.showFixedMenu = scrollTop >= this.menuTop\n\t\t\t\t}\n\t\t\t},\n\t\t\t\n\t\t\t// 返回顶部\n\t\t\tscrollToTop() {\n\t\t\t\t// 先将 scrollTop 设置为 1\n\t\t\t\tthis.scrollTop = 1\n\t\t\t\t\n\t\t\t\t// 使用 nextTick 确保视图更新后再设置为 0\n\t\t\t\tthis.$nextTick(() => {\n\t\t\t\t\tthis.scrollTop = 0\n\t\t\t\t})\n\t\t\t},\n\t\t\t// 处理底部导航切换\n\t\t\thandleTabChange(index) {\n\t\t\t\tconsole.log('切换到标签:', index)\n\t\t\t\t// 这里可以添加导航逻辑\n\t\t\t},\n\t\t\t// 处理发布按钮点击\n\t\t\thandlePublish() {\n\t\t\t\tconsole.log('点击发布按钮')\n\t\t\t\t// 这里可以添加发布逻辑\n\t\t\t},\n\t\t\t// 处理下拉刷新\n\t\t\thandleRefresh() {\n\t\t\t\tthis.refreshing = true;\n\t\t\t\t// 刷新菜单分类\n\t\t\t\tthis.fetchMenuCategories();\n\t\t\t\t\n\t\t\t\t// 刷新功能区域\n\t\t\t\tif (this.$refs.functionArea) {\n\t\t\t\t\tthis.$refs.functionArea.loadMiniProgramList();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 刷新活动区域\n\t\t\t\tif (this.$refs.activityArea) {\n\t\t\t\t\tthis.$refs.activityArea.fetchActivityData();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 刷新轮播图\n\t\t\t\tif (this.$refs.swiperBanner) {\n\t\t\t\t\tthis.$refs.swiperBanner.fetchBannerData();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 刷新内容列表（如果存在）\n\t\t\t\tif (this.$refs.contentList) {\n\t\t\t\t\tthis.$refs.contentList.resetAndLoad();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t// 刷新分享数据\n\t\t\t\tthis.initShareData();\n\t\t\t\t\n\t\t\t\t// 设置超时自动关闭刷新状态\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tif (this.refreshing) {\n\t\t\t\t\t\tthis.refreshing = false;\n\t\t\t\t\t\tconsole.log('刷新状态超时自动关闭');\n\t\t\t\t\t}\n\t\t\t\t}, 3000);\n\t\t\t},\n\t\t\t// 处理上拉加载更多\n\t\t\thandleScrollToLower() {\n\t\t\t\tconsole.log('触发上拉加载更多');\n\t\t\t\t// 调用内容列表组件的加载更多方法\n\t\t\t\tif (this.$refs.contentList) {\n\t\t\t\t\tthis.$refs.contentList.loadMore();\n\t\t\t\t}\n\t\t\t},\n\t\t\t// 获取小程序基础设置\n\t\t\tfetchBaseSettings() {\n\t\t\t\tsettings.getBaseSettings()\n\t\t\t\t\t.then(res => {\n\t\t\t\t\t\tif (res.code === 0 && res.data) {\n\t\t\t\t\t\t\t// 只更新logo字段\n\t\t\t\t\t\t\tif (res.data.logo) {\n\t\t\t\t\t\t\t\tthis.logoUrl = res.data.logo;\n\t\t\t\t\t\t\t\tconsole.log('成功获取小程序Logo:', this.logoUrl);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.error('获取小程序基础设置失败:', res.message || '未知错误');\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch(err => {\n\t\t\t\t\t\tconsole.error('请求小程序基础设置接口出错:', err);\n\t\t\t\t\t});\n\t\t\t},\n\t\t\t// 显示分享菜单，包括分享朋友圈\n\t\t\tshowShareMenu() {\n\t\t\t\t// 先更新分享数据\n\t\t\t\tthis.initShareData();\n\t\t\t\t\n\t\t\t\t// 显示分享菜单\n\t\t\t\tuni.showShareMenu({\n\t\t\t\t\twithShareTicket: true,\n\t\t\t\t\tmenus: ['shareAppMessage', 'shareTimeline']\n\t\t\t\t});\n\t\t\t},\n\t\t}\n\t}\n</script>\n\n<style>\n\t.container {\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tbackground-color: #ffffff;\n\t\tposition: relative;\n\t\tpadding-bottom: 100rpx;\n\t}\n\t\n\t.scroll-content {\n\t\theight: 100vh;\n\t\tbox-sizing: border-box;\n\t\tpadding-bottom: env(safe-area-inset-bottom);\n\t}\n\t\n\t.fixed-header {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tz-index: 100;\n\t\tbackground-color: #ffffff;\n\t}\n\t\n\t.gradient-bg {\n\t\tbackground: linear-gradient(180deg, #fc3e2b 0%, #fa7154 70%);\n\t\tborder-bottom-left-radius: 40rpx;\n\t\tborder-bottom-right-radius: 40rpx;\n\t}\n\t\n\t/* 自定义导航栏样式 */\n\t.custom-nav {\n\t\twidth: 100%;\n\t}\n\t\n\t.nav-content {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\t\tpadding: 0 30rpx;\n\t}\n\t\n\t.nav-logo {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\t\n\t.logo-img {\n\t\theight: 100%;\n\t}\n\t\n\t.nav-center {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t}\n\t\n\t.nav-right {\n\t\tflex: 1;\n\t}\n\t\n\t.nav-location {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tpadding: 4rpx 20rpx;\n\t\tbackground-color: rgba(255, 255, 255, 0.1);\n\t\tborder-radius: 24rpx;\n\t}\n\t\n\t.location-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tmargin-right: 6rpx;\n\t}\n\t\n\t/* 搜索框样式 */\n\t.menu-wrapper {\n\t\tpadding: 20rpx 30rpx;\n\t}\n\t\n\t.search-box {\n\t\twidth: 100%;\n\t}\n\t\n\t.search-input {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tbackground-color: rgba(255, 255, 255, 0.9);\n\t\tpadding: 0 24rpx;\n\t\tborder-radius: 36rpx;\n\t\theight: 72rpx;\n\t}\n\t\n\t.search-input input {\n\t\tflex: 1;\n\t\tmargin-left: 16rpx;\n\t\tfont-size: 28rpx;\n\t\theight: 100%;\n\t}\n\t\n\t.placeholder {\n\t\tcolor: #999999;\n\t\tfont-size: 28rpx;\n\t}\n\t\n\t/* 新增分类菜单样式 */\n\t.category-menu {\n\t\tbackground-color: #ffffff;\n\t\tpadding: 20rpx 0;\n\t\tmargin-top: 20rpx;\n\t\twidth: 100%;\n\t\toverflow: hidden;\n\t}\n\t\n\t.nav-menu {\n\t\twidth: 100%;\n\t\twhite-space: nowrap;\n\t\tpadding: 0 30rpx;\n\t\tbox-sizing: border-box;\n\t\tpadding-right: 40rpx;\n\t}\n\t\n\t.menu-item {\n\t\tpadding: 12rpx 24rpx;\n\t\theight: 100%;\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t\tfont-size: 30rpx;\n\t\twhite-space: nowrap;\n\t\tposition: relative;\n\t}\n\t\n\t.menu-item:last-child {\n\t\tmargin-right: 10rpx;\n\t}\n\t\n\t.menu-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333333;\n\t\tline-height: 40rpx;\n\t\tfont-weight: 400;\n\t}\n\t\n\t.menu-item.active .menu-text {\n\t\tcolor: #fc3e2b;\n\t\tfont-weight: 700;\n\t}\n\t\n\t.menu-item.active::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\twidth: 40rpx;\n\t\theight: 4rpx;\n\t\tbackground-color: #fc3e2b;\n\t\tborder-radius: 2rpx;\n\t}\n\t\n\t/* 添加内容区域样式 */\n\t.page-content {\n\t\tpadding-top: 0;\n\t\tbackground-color: #ffffff;\n\t\tmin-height: 100vh;\n\t}\n\t\n\t/* 固定菜单样式 */\n\t.fixed-nav-menu {\n\t\twidth: 100%;\n\t\twhite-space: nowrap;\n\t\tpadding: 0 20rpx;\n\t\tbox-sizing: border-box;\n\t\ttransform: translateY(-100%);\n\t\topacity: 0;\n\t\ttransition: all 0.25s ease-out;\n\t}\n\t\n\t.fixed-nav-menu.menu-show {\n\t\ttransform: translateY(0);\n\t\topacity: 1;\n\t}\n\t\n\t.fixed-nav-menu .menu-item {\n\t\tdisplay: inline-block;\n\t\tpadding: 12rpx 24rpx;\n\t\tposition: relative;\n\t}\n\t\n\t.fixed-menu-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #ffffff;\n\t\tline-height: 40rpx;\n\t\tfont-weight: 400;\n\t}\n\t\n\t.fixed-nav-menu .menu-item.active .fixed-menu-text {\n\t\tfont-weight: 700;\n\t}\n\t\n\t.fixed-nav-menu .menu-item.active::after {\n\t\tcontent: '';\n\t\tposition: absolute;\n\t\tbottom: 0;\n\t\tleft: 50%;\n\t\ttransform: translateX(-50%);\n\t\twidth: 40rpx;\n\t\theight: 4rpx;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 2rpx;\n\t}\n\t\n\t/* 返回顶部按钮样式 */\n\t.back-to-top {\n\t\tposition: fixed;\n\t\tleft: 30rpx;\n\t\tbottom: 180rpx;\n\t\twidth: 80rpx;\n\t\theight: 80rpx;\n\t\tbackground: #fa7154;\n\t\tborder-radius: 50%;\n\t\tbox-shadow: 0 2rpx 10rpx rgba(0, 0, 0, 0.1);\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tz-index: 99;\n\t}\n\t\n\t/* 图标容器样式 */\n\t.back-to-top .uni-icons {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t/* 确保图标本身居中 */\n\t.back-to-top :deep(.uni-icons__icon) {\n\t\tmargin: auto;\n\t}\n\t\n\t/* 菜单加载状态样式 */\n\t.menu-loading {\n\t\tdisplay: inline-flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\tpadding: 0 30rpx;\n\t\theight: 100%;\n\t}\n\t\n\t.loading-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #999999;\n\t}\n\t\n\t.fixed-nav-menu .loading-text {\n\t\tcolor: #ffffff;\n\t}\n\t\n\t/* 位置引导弹窗样式 */\n\t.location-guide-mask {\n\t\tposition: fixed;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\tright: 0;\n\t\tbottom: 0;\n\t\tbackground-color: rgba(0, 0, 0, 0.6);\n\t\tz-index: 999;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t}\n\t\n\t.location-guide-content {\n\t\twidth: 80%;\n\t\tmax-width: 600rpx;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 16rpx;\n\t\toverflow: hidden;\n\t\tbox-shadow: 0 8rpx 24rpx rgba(0, 0, 0, 0.15);\n\t}\n\t\n\t.guide-header {\n\t\tpadding: 30rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\talign-items: center;\n\t\tborder-bottom: 1px solid #f5f5f5;\n\t}\n\t\n\t.guide-title {\n\t\tfont-size: 32rpx;\n\t\tfont-weight: bold;\n\t\tcolor: #333;\n\t}\n\t\n\t.guide-body {\n\t\tpadding: 40rpx 30rpx;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\talign-items: center;\n\t}\n\t\n\t.guide-text {\n\t\tfont-size: 28rpx;\n\t\tcolor: #333;\n\t\ttext-align: center;\n\t\tline-height: 1.5;\n\t\tmargin-bottom: 20rpx;\n\t}\n\t\n\t.guide-current {\n\t\tfont-size: 26rpx;\n\t\tcolor: #666;\n\t\tmargin-top: 20rpx;\n\t\tpadding: 10rpx 24rpx;\n\t\tbackground-color: #f8f8f8;\n\t\tborder-radius: 24rpx;\n\t}\n\t\n\t.guide-footer {\n\t\tpadding: 30rpx;\n\t\tdisplay: flex;\n\t\tjustify-content: center;\n\t\tborder-top: 1px solid #f5f5f5;\n\t}\n\t\n\t.guide-btn {\n\t\twidth: 70%;\n\t\theight: 80rpx;\n\t\tline-height: 80rpx;\n\t\ttext-align: center;\n\t\tborder-radius: 40rpx;\n\t\tfont-size: 28rpx;\n\t\tmargin: 0;\n\t}\n\t\n\t.guide-btn-confirm {\n\t\tbackground-color: #fc3e2b;\n\t\tcolor: #ffffff;\n\t}\n\t\n\t/* 骨架屏样式 */\n\t.skeleton-screen {\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100vh;\n\t\tbackground-color: #f8f8f8;\n\t\tz-index: 999;\n\t\tpadding: 0 30rpx;\n\t\tbox-sizing: border-box;\n\t}\n\t\n\t.skeleton-header {\n\t\tpadding-top: var(--status-bar-height);\n\t}\n\t\n\t.skeleton-nav {\n\t\theight: 44px;\n\t\tbackground-color: #e0e0e0;\n\t\tborder-radius: 8rpx;\n\t\tmargin: 20rpx 0;\n\t\tanimation: skeleton-loading 1.5s infinite ease-in-out;\n\t}\n\t\n\t.skeleton-search {\n\t\theight: 72rpx;\n\t\tbackground-color: #e0e0e0;\n\t\tborder-radius: 36rpx;\n\t\tmargin: 20rpx 0;\n\t\tanimation: skeleton-loading 1.5s infinite ease-in-out;\n\t}\n\t\n\t.skeleton-content {\n\t\tmargin-top: 40rpx;\n\t}\n\t\n\t.skeleton-item {\n\t\theight: 200rpx;\n\t\tbackground-color: #e0e0e0;\n\t\tborder-radius: 12rpx;\n\t\tmargin-bottom: 30rpx;\n\t\tanimation: skeleton-loading 1.5s infinite ease-in-out;\n\t}\n\t\n\t@keyframes skeleton-loading {\n\t\t0% {\n\t\t\topacity: 0.7;\n\t\t}\n\t\t50% {\n\t\t\topacity: 0.4;\n\t\t}\n\t\t100% {\n\t\t\topacity: 0.7;\n\t\t}\n\t}\n</style>\n","import MiniProgramPage from 'E:/Myxiangmu/chonggou/juzitongcheng/pages/index/index.vue'\nwx.createPage(MiniProgramPage)"],"names":["deviceMixin","shareMixin","uni","get","settings"],"mappings":"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"}