{"version":3,"file":"message.js","sources":["apis/message.js"],"sourcesContent":["/**\r\n * 消息相关API\r\n */\r\nimport { request } from '@/utils/request.js';\r\n\r\n/**\r\n * 获取会话列表\r\n * @param {Object} params - 请求参数\r\n * @param {Number} params.page - 页码，默认1\r\n * @param {Number} params.size - 每页条数，默认20\r\n * @returns {Promise} 返回Promise对象\r\n */\r\nexport function getConversationList(params = {}) {\r\n  return request({\r\n    url: '/wx/client/conversation/list',\r\n    method: 'GET',\r\n    data: {\r\n      page: params.page || 1,\r\n      size: params.size || 20,\r\n      ...params\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 清除所有未读消息\r\n * @returns {Promise} 返回Promise对象\r\n */\r\nexport function clearAllUnread() {\r\n  return request({\r\n    url: '/wx/client/conversation/clear-unread',\r\n    method: 'POST'\r\n  });\r\n}\r\n\r\n/**\r\n * 清除指定会话的未读消息\r\n * @param {String} sessionId - 会话ID\r\n * @returns {Promise} 返回Promise对象\r\n */\r\nexport function clearSessionUnread(sessionId) {\r\n  return request({\r\n    url: '/wx/client/conversation/clear-session-unread',\r\n    method: 'POST',\r\n    data: { sessionId }\r\n  });\r\n}\r\n\r\n/**\r\n * 发送私信\r\n * @param {Object} params - 请求参数\r\n * @param {String} params.content - 消息内容\r\n * @param {Number} params.receiverId - 接收者ID\r\n * @returns {Promise} 返回Promise对象\r\n */\r\nexport function sendMessage(params) {\r\n  return request({\r\n    url: '/wx/client/message/send',\r\n    method: 'POST',\r\n    data: params\r\n  });\r\n}\r\n\r\n/**\r\n * 获取消息列表\r\n * @param {Object} params - 请求参数\r\n * @param {Number} params.targetId - 目标用户ID\r\n * @param {Number} params.page - 页码，默认1\r\n * @param {Number} params.size - 每页条数，默认20\r\n * @returns {Promise} 返回Promise对象\r\n */\r\nexport function getMessageList(params = {}) {\r\n  return request({\r\n    url: '/wx/client/message/list',\r\n    method: 'GET',\r\n    data: {\r\n      targetId: params.targetId,\r\n      page: params.page || 1,\r\n      size: params.size || 20\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * 创建会话\r\n * @param {Object} params - 请求参数\r\n * @param {Number} params.targetId - 目标用户ID\r\n * @returns {Promise} 返回Promise对象\r\n */\r\nexport function createConversation(params) {\r\n  return request({\r\n    url: '/wx/client/conversation/create',\r\n    method: 'POST',\r\n    data: params\r\n  });\r\n}\r\n\r\n/**\r\n * 标记消息为已读\r\n * @param {Object} params - 请求参数\r\n * @param {Number} params.targetId - 目标用户ID\r\n * @returns {Promise} 返回Promise对象\r\n */\r\nexport function markMessageRead(params) {\r\n  return request({\r\n    url: '/wx/client/message/read',\r\n    method: 'POST',\r\n    data: params\r\n  });\r\n}\r\n\r\n/**\r\n * 删除会话\r\n * @param {String} conversationId - 会话ID\r\n * @returns {Promise} 返回Promise对象\r\n */\r\nexport function deleteConversation(conversationId) {\r\n  return request({\r\n    url: '/wx/client/conversation/delete',\r\n    method: 'POST',\r\n    data: { id: conversationId }\r\n  });\r\n}\r\n\r\n/**\r\n * 获取未读消息数量\r\n * @returns {Promise} 返回Promise对象，包含未读消息数量\r\n */\r\nexport function getUnreadCount() {\r\n  return request({\r\n    url: '/wx/client/message/unread/count',\r\n    method: 'GET'\r\n  });\r\n} "],"names":["request"],"mappings":";;AAYO,SAAS,oBAAoB,SAAS,IAAI;AAC/C,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACJ,MAAM,OAAO,QAAQ;AAAA,MACrB,MAAM,OAAO,QAAQ;AAAA,MACrB,GAAG;AAAA,IACJ;AAAA,EACL,CAAG;AACH;AAMO,SAAS,iBAAiB;AAC/B,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,EACZ,CAAG;AACH;AAOO,SAAS,mBAAmB,WAAW;AAC5C,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM,EAAE,UAAW;AAAA,EACvB,CAAG;AACH;AASO,SAAS,YAAY,QAAQ;AAClC,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,EACV,CAAG;AACH;AAUO,SAAS,eAAe,SAAS,IAAI;AAC1C,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,MACJ,UAAU,OAAO;AAAA,MACjB,MAAM,OAAO,QAAQ;AAAA,MACrB,MAAM,OAAO,QAAQ;AAAA,IACtB;AAAA,EACL,CAAG;AACH;AAQO,SAAS,mBAAmB,QAAQ;AACzC,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,EACV,CAAG;AACH;AAQO,SAAS,gBAAgB,QAAQ;AACtC,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM;AAAA,EACV,CAAG;AACH;AAOO,SAAS,mBAAmB,gBAAgB;AACjD,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,IACR,MAAM,EAAE,IAAI,eAAgB;AAAA,EAChC,CAAG;AACH;AAMO,SAAS,iBAAiB;AAC/B,SAAOA,sBAAQ;AAAA,IACb,KAAK;AAAA,IACL,QAAQ;AAAA,EACZ,CAAG;AACH;;;;;;;;;;;;;;;;;;;;"}