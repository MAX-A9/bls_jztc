"use strict";function e(e){if(!e)return Date.now();if("number"==typeof e)return e;if(e instanceof Date)return e.getTime();if("string"==typeof e){if(e=e.trim(),/^\d{4}-\d{1,2}-\d{1,2} \d{1,2}:\d{1,2}:\d{1,2}$/.test(e)){const t=e.replace(/-/g,"/"),n=new Date(t);if(!isNaN(n.getTime()))return n.getTime();const r=e.replace(" ","T"),o=new Date(r);if(!isNaN(o.getTime()))return o.getTime()}const t=new Date(e);if(!isNaN(t.getTime()))return t.getTime();const n=/^(\d{4})[/-](\d{1,2})[/-](\d{1,2})(?:[ T](\d{1,2}):(\d{1,2})(?::(\d{1,2}))?)?$/;if(n.test(e)){const t=e.match(n),r=parseInt(t[1],10),o=parseInt(t[2],10)-1,a=parseInt(t[3],10),i=t[4]?parseInt(t[4],10):0,s=t[5]?parseInt(t[5],10):0,f=t[6]?parseInt(t[6],10):0;return new Date(r,o,a,i,s,f).getTime()}}return console.warn("无法解析日期格式:",e),Date.now()}exports.formatTimeAgo=function(t,n="zh"){if(!t)return"";const r=e(t),o=(Date.now()-r)/1e3,a={zh:{second:"秒",minute:"分钟",hour:"小时",day:"天",week:"周",month:"个月",year:"年"},en:{second:"second",minute:"minute",hour:"hour",day:"day",week:"week",month:"month",year:"year"}},i=a[n]||a.zh,s="en"===n?"s":"";if(o<5)return"zh"===n?"刚刚":"just now";if(o<60)return`${Math.floor(o)}${i.second}${"en"===n&&Math.floor(o)>1?s:""}${"zh"===n?"前":" ago"}`;if(o<3600){const e=Math.floor(o/60);return`${e}${i.minute}${"en"===n&&e>1?s:""}${"zh"===n?"前":" ago"}`}if(o<86400){const e=Math.floor(o/3600);return`${e}${i.hour}${"en"===n&&e>1?s:""}${"zh"===n?"前":" ago"}`}if(o<604800){const e=Math.floor(o/86400);return`${e}${i.day}${"en"===n&&e>1?s:""}${"zh"===n?"前":" ago"}`}if(o<2592e3){const e=Math.floor(o/604800);return`${e}${i.week}${"en"===n&&e>1?s:""}${"zh"===n?"前":" ago"}`}if(o<31536e3){const e=Math.floor(o/2592e3);return`${e}${i.month}${"en"===n&&e>1?s:""}${"zh"===n?"前":" ago"}`}{const e=Math.floor(o/31536e3);return`${e}${i.year}${"en"===n&&e>1?s:""}${"zh"===n?"前":" ago"}`}},exports.getTimestamp=e;
