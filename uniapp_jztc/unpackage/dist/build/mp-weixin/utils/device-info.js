"use strict";const e=require("../common/vendor.js");let t=null,i=null,n=null,o=null;function r(){if(t)return t;try{if(e.index.canIUse("getWindowInfo"))return t=e.index.getWindowInfo(),t;const i=e.index.getSystemInfo({sync:!0});return t={windowWidth:i.windowWidth,windowHeight:i.windowHeight,screenWidth:i.screenWidth,screenHeight:i.screenHeight,statusBarHeight:i.statusBarHeight,safeArea:i.safeArea||{top:0,right:i.screenWidth,bottom:i.screenHeight,left:0},pixelRatio:i.pixelRatio},t}catch(i){return console.error("获取窗口信息失败:",i),{windowWidth:375,windowHeight:667,screenWidth:375,screenHeight:667,statusBarHeight:20,safeArea:{top:0,right:375,bottom:667,left:0},pixelRatio:2}}}function a(){if(i)return i;try{if(e.index.canIUse("getDeviceInfo"))return i=e.index.getDeviceInfo(),i;const t=e.index.getSystemInfo({sync:!0});return i={brand:t.brand,model:t.model,system:t.system,platform:t.platform,deviceId:t.deviceId,devicePixelRatio:t.pixelRatio,deviceOrientation:t.deviceOrientation,deviceType:t.deviceType},i}catch(t){return console.error("获取设备信息失败:",t),{brand:"",model:"",system:"",platform:"",deviceId:"",devicePixelRatio:2,deviceOrientation:"portrait",deviceType:"phone"}}}function d(){return r().statusBarHeight||20}function c(){const e=r(),t=e.safeArea||{};return{top:t.top||0,right:e.screenWidth-t.right||0,bottom:e.screenHeight-t.bottom||0,left:t.left||0}}const s={getWindowInfo:r,getDeviceInfo:a,getAppBaseInfo:function(){if(n)return n;try{if(e.index.canIUse("getAppBaseInfo"))return n=e.index.getAppBaseInfo(),n;const t=e.index.getSystemInfo({sync:!0});return n={SDKVersion:t.SDKVersion,appName:t.appName,appVersion:t.version,appLanguage:t.language,theme:t.theme,host:t.host},n}catch(t){return console.error("获取应用基础信息失败:",t),{SDKVersion:"",appName:"",appVersion:"",appLanguage:"zh-Hans",theme:"light"}}},getSystemSetting:function(){if(o)return o;try{if(e.index.canIUse("getSystemSetting"))return o=e.index.getSystemSetting(),o;const t=e.index.getSystemInfo({sync:!0});return o={bluetoothEnabled:t.bluetoothEnabled,locationEnabled:t.locationEnabled,wifiEnabled:t.wifiEnabled,deviceOrientation:t.deviceOrientation,locationAuthorized:t.locationAuthorized,microphoneAuthorized:t.microphoneAuthorized,cameraAuthorized:t.cameraAuthorized,notificationAuthorized:t.notificationAuthorized,notificationAlertAuthorized:t.notificationAlertAuthorized,notificationBadgeAuthorized:t.notificationBadgeAuthorized,notificationSoundAuthorized:t.notificationSoundAuthorized,bluetoothAuthorized:t.bluetoothAuthorized},o}catch(t){return console.error("获取系统设置信息失败:",t),{bluetoothEnabled:!1,locationEnabled:!1,wifiEnabled:!0,deviceOrientation:"portrait"}}},getStatusBarHeight:d,getNavigationBarHeight:function(){const e=d(),t=a();return e+("ios"===t.platform||/ios/i.test(t.system||"")?44:48)},getSafeAreaInsets:c,isIphoneX:function(){const e=a(),t=c();return("ios"===e.platform||/ios/i.test(e.system||""))&&t.bottom>0},rpx2px:function(e){return e/750*r().windowWidth},px2rpx:function(e){return 750*e/r().windowWidth}};exports.deviceInfo=s;
