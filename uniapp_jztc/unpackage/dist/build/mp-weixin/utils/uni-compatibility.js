"use strict";const e=require("../common/vendor.js");let n=null;function t(){if(n)return n;try{const t=e.index.getWindowInfo?e.index.getWindowInfo():{},i=e.index.getDeviceInfo?e.index.getDeviceInfo():{},o=e.index.getAppBaseInfo?e.index.getAppBaseInfo():{},s=e.index.getSystemSetting?e.index.getSystemSetting():{};return n={windowWidth:t.windowWidth,windowHeight:t.windowHeight,screenWidth:t.screenWidth,screenHeight:t.screenHeight,statusBarHeight:t.statusBarHeight,safeArea:t.safeArea,pixelRatio:t.pixelRatio,brand:i.brand,model:i.model,system:i.system,platform:i.platform,SDKVersion:o.SDKVersion,appName:o.appName,appVersion:o.appVersion,appLanguage:o.appLanguage,theme:o.theme,bluetoothEnabled:s.bluetoothEnabled,locationEnabled:s.locationEnabled,wifiEnabled:s.wifiEnabled,language:o.appLanguage,version:o.appVersion},n}catch(t){console.error("获取兼容系统信息失败:",t);try{const t=e.index.getSystemInfo({sync:!0});return n=t,t}catch(i){return console.error("获取系统信息兼容处理失败:",i),{windowWidth:375,windowHeight:667,screenWidth:375,screenHeight:667,statusBarHeight:20,pixelRatio:2,platform:"android",language:"zh-Hans"}}}}exports.initUniCompatibility=function(){e.index.getSystemInfoSync,e.index.getSystemInfoSync=function(){return console.warn("wx.getSystemInfoSync 已废弃，请使用 wx.getWindowInfo/wx.getDeviceInfo/wx.getAppBaseInfo 等代替"),t()},e.index.getSystemInfo,e.index.getSystemInfo=function(e){return e&&!0===e.sync?("function"==typeof e.success&&e.success(t()),t()):new Promise(((n,i)=>{try{const i=t();"function"==typeof(null==e?void 0:e.success)&&e.success(i),n(i)}catch(o){"function"==typeof(null==e?void 0:e.fail)&&e.fail(o),i(o)}finally{"function"==typeof(null==e?void 0:e.complete)&&e.complete()}}))},console.log("uni-app 兼容性适配已完成")};
