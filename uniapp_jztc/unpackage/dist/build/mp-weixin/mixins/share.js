"use strict";const t=require("../utils/share.js"),e={data:()=>({shareData:{title:"",path:"",imageUrl:""}}),onLoad(){this.initShareData()},methods:{async initShareData(){try{if(this.isContentPage){const e=this.contentData||this.detail||{},a=await t.getContentShareOptions(e);this.shareData={...a}}else if(this.isHomePage){const e=await t.getHomeShareOptions();this.shareData={...e}}else{const e=getCurrentPages(),a=e[e.length-1],s=`/${a.route}${this._getPageQuery(a)}`,i=await t.getDefaultShareOptions(s);this.shareData={...i}}}catch(e){console.error("初始化分享数据失败:",e)}},_getPageQuery(t){if(!t.options||0===Object.keys(t.options).length)return"";return`?${Object.keys(t.options).map((e=>`${e}=${encodeURIComponent(t.options[e])}`)).join("&")}`}},onShareAppMessage(){return{title:this.shareData.title,path:this.shareData.path,imageUrl:this.shareData.imageUrl}},onShareTimeline(){return{title:this.shareData.title,query:this.shareData.path.indexOf("?")>-1?this.shareData.path.split("?")[1]:"",imageUrl:this.shareData.imageUrl}}};exports.shareMixin=e;
