"use strict";const e=require("../../common/vendor.js"),i=require("../../apis/content.js"),t={name:"FunctionArea",data:()=>({scrollLeft:0,contentWidth:0,viewWidth:0,currentPage:0,isGlobalEnabled:!0,miniProgramList:[]}),created(){},mounted(){this.initScrollBar()},methods:{async loadMiniProgramList(){try{const e=await i.getMiniProgramList();0===e.code&&e.data?(this.isGlobalEnabled=e.data.isGlobalEnabled,this.isGlobalEnabled&&e.data.list&&(this.miniProgramList=e.data.list.filter((e=>e.isEnabled)).sort(((e,i)=>e.order-i.order)))):console.error("获取小程序列表失败:",e.message)}catch(e){console.error("加载小程序列表异常:",e)}},navigateToMiniProgram(i){e.index.navigateToMiniProgram({appId:i.appId,success(e){console.log("跳转成功",e)},fail(i){console.error("跳转失败",i),e.index.showToast({title:"跳转失败",icon:"none"})}})},initScrollBar(){e.index.createSelectorQuery().in(this).select(".scroll-row").boundingClientRect((e=>{e&&(this.viewWidth=e.width)})).exec()},handleScroll(e){const{scrollLeft:i,scrollWidth:t}=e.detail,o=t-this.viewWidth;this.currentPage=o>0?i/o:0}}};const o=e._export_sfc(t,[["render",function(i,t,o,r,a,n){return e.e({a:a.isGlobalEnabled},a.isGlobalEnabled?e.e({b:e.f(a.miniProgramList,((i,t,o)=>({a:i.logo,b:e.t(i.name),c:"mini-"+i.id,d:e.o((e=>n.navigateToMiniProgram(i)),"mini-"+i.id)}))),c:e.o(((...e)=>n.handleScroll&&n.handleScroll(...e))),d:a.miniProgramList.length>0},a.miniProgramList.length>0?{e:`translateX(${100*a.currentPage}%)`}:{}):{})}]]);wx.createComponent(o);
