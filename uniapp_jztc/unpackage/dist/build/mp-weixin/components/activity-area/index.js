"use strict";const t=require("../../common/vendor.js"),e=require("../../utils/request.js"),i={name:"ActivityArea",mixins:[require("../../mixins/device-adapter.js").deviceAdapter],data:()=>({activityList:[],isGlobalEnabled:!1,leftItems:[],rightItem:null}),created(){},methods:{async fetchActivityData(){try{const t=await e.get("/wx/activity-area/get");t&&0===t.code&&(this.isGlobalEnabled=t.data.isGlobalEnabled,this.isGlobalEnabled&&t.data.list&&(this.activityList=t.data.list,this.processActivityData()))}catch(t){console.error("获取活动区域数据失败",t)}},processActivityData(){this.leftItems=this.activityList.filter((t=>"topLeft"===t.position||"bottomLeft"===t.position)),this.rightItem=this.activityList.find((t=>"right"===t.position))},getPatternClass:t=>"topLeft"===t?"music":"bottomLeft"===t?"coupon":"right"===t?"video":"",handleItemClick(e){"page"===e.linkType&&e.linkUrl?t.index.navigateTo({url:"/"+e.linkUrl}):"webview"===e.linkType&&e.linkUrl?t.index.navigateTo({url:"/pages/webview/index?url="+encodeURIComponent(e.linkUrl)}):"miniprogram"===e.linkType&&e.linkUrl&&t.index.navigateToMiniProgram({appId:e.linkUrl,fail:i=>{console.error("小程序跳转失败",e.linkUrl,i),t.index.showToast({title:"跳转失败",icon:"none"})}})}}};const a=t._export_sfc(i,[["render",function(e,i,a,l,n,r){return t.e({a:n.isGlobalEnabled},n.isGlobalEnabled?t.e({b:t.f(n.leftItems,((e,i,a)=>({a:t.n(r.getPatternClass(e.position)),b:t.t(e.title),c:t.t(e.description),d:i,e:t.o((t=>r.handleItemClick(e)),i)}))),c:e.isSmallScreen?1:"",d:e.isSmallScreen?1:"",e:n.rightItem},n.rightItem?{f:t.t(n.rightItem.title),g:e.isSmallScreen?1:"",h:t.t(n.rightItem.description),i:e.isSmallScreen?1:"",j:t.o((t=>r.handleItemClick(n.rightItem)))}:{},{k:e.isSmallScreen?1:"",l:e.isLargeScreen?1:""}):{})}]]);wx.createComponent(a);
