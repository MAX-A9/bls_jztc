"use strict";const e=require("../../common/vendor.js"),t=require("../../common/assets.js"),i={data:()=>({isRefreshing:!1,notificationList:[{id:1,type:"system",title:"系统更新通知",content:"亲爱的用户，我们的应用已更新到最新版本，新增了多项实用功能，欢迎体验！",time:"今天 12:30",isRead:!1},{id:2,type:"comment",title:"评论通知",content:'用户"张先生"评论了您的闲置物品："这个价格很合理，我很感兴趣"',time:"今天 10:15",isRead:!0},{id:3,type:"like",title:"点赞通知",content:'您的闲置物品"iPhone 12 128G 蓝色"收到了3个新的点赞',time:"昨天 15:40",isRead:!1},{id:4,type:"order",title:"订单通知",content:"您的订单#20230615001已发货，预计3天内送达",time:"昨天 09:20",isRead:!0},{id:5,type:"system",title:"账号安全提醒",content:"您的账号于6月10日在新设备上登录，如非本人操作，请及时修改密码",time:"3天前",isRead:!0},{id:6,type:"comment",title:"评论通知",content:'用户"李女士"回复了您的评论："好的，那就这个价格成交"',time:"4天前",isRead:!0},{id:7,type:"like",title:"点赞通知",content:'您的闲置物品"九成新小米平板5 Pro"收到了5个新的点赞',time:"5天前",isRead:!0},{id:8,type:"order",title:"订单通知",content:"您的订单#20230608002已完成，感谢您的使用",time:"一周前",isRead:!0}]}),methods:{getIconByType:e=>({system:"notification-filled",comment:"chat-filled",like:"heart-filled",order:"cart-filled"}[e]||"notification-filled"),handleClearAll(){e.index.showModal({title:"提示",content:"确定要清空所有通知吗？",success:t=>{t.confirm&&(this.notificationList=[],e.index.showToast({title:"已清空所有通知",icon:"success"}))}})},handleNotificationClick(t){const i=this.notificationList.findIndex((e=>e.id===t.id));switch(-1===i||this.notificationList[i].isRead||(this.notificationList[i].isRead=!0),t.type){case"comment":e.index.navigateTo({url:`/pages/content/detail?id=${t.id}&type=comment`});break;case"like":e.index.navigateTo({url:`/pages/my/publish/index?highlight=${t.id}`});break;case"order":e.index.navigateTo({url:`/pages/my/orders/index?id=${t.id}`});break;default:e.index.showModal({title:t.title,content:t.content,showCancel:!1,confirmText:"知道了"})}},async onRefresh(){if(!this.isRefreshing){this.isRefreshing=!0;try{await new Promise((e=>setTimeout(e,1e3))),this.notificationList=[{id:9,type:"system",title:"新活动通知",content:"618年中大促即将开始，多款商品低至5折，先到先得！",time:"刚刚",isRead:!1},...this.notificationList],e.index.showToast({title:"刷新成功",icon:"success"})}catch(t){console.error("刷新失败:",t),e.index.showToast({title:"刷新失败",icon:"error"})}finally{this.isRefreshing=!1}}},onRestore(){console.log("刷新复位")}}};if(!Array){e.resolveComponent("uni-icons")()}Math;const n=e._export_sfc(i,[["render",function(i,n,o,s,a,c){return e.e({a:e.p({type:"trash",size:"16",color:"#666666"}),b:e.o(((...e)=>c.handleClearAll&&c.handleClearAll(...e))),c:0===a.notificationList.length},0===a.notificationList.length?{d:t._imports_0$6}:{e:e.f(a.notificationList,((t,i,n)=>e.e({a:"f06be568-1-"+n,b:e.p({type:c.getIconByType(t.type),size:"24",color:"#ffffff"}),c:e.n(t.type),d:e.t(t.title),e:e.t(t.time),f:e.t(t.content),g:!t.isRead},(t.isRead,{}),{h:i,i:e.o((e=>c.handleNotificationClick(t)),i)})))},{f:a.isRefreshing,g:e.o(((...e)=>c.onRefresh&&c.onRefresh(...e))),h:e.o(((...e)=>c.onRestore&&c.onRestore(...e)))})}]]);wx.createPage(n);
