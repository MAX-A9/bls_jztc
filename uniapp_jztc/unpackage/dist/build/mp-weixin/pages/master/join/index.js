"use strict";const e=require("../../../common/vendor.js"),a=require("../../../utils/device-info.js"),t=require("../../../common/assets.js"),i={data:()=>({statusBarHeight:0,navBarHeight:44,formData:{name:"",phone:"",idCard:"",region:["","",""],regionText:"",skills:[],experienceIndex:0,experience:"",introduction:"",idCardFront:"",idCardBack:"",qualification:"",agreement:!1},skillList:[{label:"家电维修",value:"appliance"},{label:"水电维修",value:"plumbing"},{label:"空调安装",value:"ac"},{label:"家具安装",value:"furniture"},{label:"管道疏通",value:"pipe"},{label:"电器安装",value:"electronics"},{label:"防水补漏",value:"waterproof"},{label:"开锁换锁",value:"lock"}],experienceOptions:["1年以下","1-3年","3-5年","5-10年","10年以上"]}),onLoad(){this.statusBarHeight=a.deviceInfo.getStatusBarHeight()},methods:{handleBack(){e.index.navigateBack()},handleRegionChange(e){this.formData.region=e.detail.value,this.formData.regionText=e.detail.value.join(" ")},toggleSkill(e){const a=this.formData.skills.indexOf(e);-1===a?this.formData.skills.push(e):this.formData.skills.splice(a,1)},handleExperienceChange(e){this.formData.experienceIndex=e.detail.value,this.formData.experience=this.experienceOptions[e.detail.value]},uploadImage(a){e.index.chooseImage({count:1,sizeType:["compressed"],sourceType:["album","camera"],success:e=>{this.formData[a]=e.tempFilePaths[0]}})},toggleAgreement(){this.formData.agreement=!this.formData.agreement},showAgreement(){e.index.showModal({title:"师傅入驻协议",content:"这里是师傅入驻协议的详细内容...",showCancel:!1})},handleSubmit(){return this.formData.name?this.formData.phone&&/^1\d{10}$/.test(this.formData.phone)?this.formData.idCard?this.formData.regionText?0===this.formData.skills.length?e.index.showToast({title:"请选择至少一项专业技能",icon:"none"}):this.formData.experience?this.formData.idCardFront?this.formData.idCardBack?(e.index.showLoading({title:"提交中..."}),void setTimeout((()=>{e.index.hideLoading(),e.index.showModal({title:"提交成功",content:"您的入驻申请已提交，我们将在1-3个工作日内审核，请留意短信通知",showCancel:!1,success:()=>{e.index.navigateBack()}})}),1500)):e.index.showToast({title:"请上传身份证反面照片",icon:"none"}):e.index.showToast({title:"请上传身份证正面照片",icon:"none"}):e.index.showToast({title:"请选择工作年限",icon:"none"}):e.index.showToast({title:"请选择所在城市",icon:"none"}):e.index.showToast({title:"请输入身份证号",icon:"none"}):e.index.showToast({title:"请输入正确的手机号",icon:"none"}):e.index.showToast({title:"请输入姓名",icon:"none"})}}};if(!Array){e.resolveComponent("uni-icons")()}Math;const o=e._export_sfc(i,[["render",function(a,i,o,n,r,l){return{a:e.p({type:"left",size:"20",color:"#333333"}),b:e.o(((...e)=>l.handleBack&&l.handleBack(...e))),c:r.navBarHeight+"px",d:r.statusBarHeight+"px",e:t._imports_0$5,f:r.formData.name,g:e.o((e=>r.formData.name=e.detail.value)),h:r.formData.phone,i:e.o((e=>r.formData.phone=e.detail.value)),j:r.formData.idCard,k:e.o((e=>r.formData.idCard=e.detail.value)),l:e.t(r.formData.regionText||"请选择所在城市"),m:e.o(((...e)=>l.handleRegionChange&&l.handleRegionChange(...e))),n:r.formData.region,o:e.p({type:"right",size:"16",color:"#999999"}),p:e.f(r.skillList,((a,t,i)=>({a:e.t(a.label),b:t,c:r.formData.skills.includes(a.value)?1:"",d:e.o((e=>l.toggleSkill(a.value)),t)}))),q:e.t(r.formData.experience||"请选择工作年限"),r:r.experienceOptions,s:e.o(((...e)=>l.handleExperienceChange&&l.handleExperienceChange(...e))),t:r.formData.experienceIndex,v:e.p({type:"right",size:"16",color:"#999999"}),w:r.formData.introduction,x:e.o((e=>r.formData.introduction=e.detail.value)),y:e.t(r.formData.introduction.length),z:r.formData.idCardFront||"/static/upload-id-front.png",A:e.o((e=>l.uploadImage("idCardFront"))),B:r.formData.idCardBack||"/static/upload-id-back.png",C:e.o((e=>l.uploadImage("idCardBack"))),D:r.formData.qualification||"/static/upload-qualification.png",E:e.o((e=>l.uploadImage("qualification"))),F:e.p({type:r.formData.agreement?"checkbox-filled":"circle",size:"20",color:r.formData.agreement?"#fc3e2b":"#999999"}),G:e.o(((...e)=>l.toggleAgreement&&l.toggleAgreement(...e))),H:e.o(((...e)=>l.showAgreement&&l.showAgreement(...e))),I:!r.formData.agreement,J:e.o(((...e)=>l.handleSubmit&&l.handleSubmit(...e))),K:`calc(${r.statusBarHeight}px + ${r.navBarHeight}px)`}}]]);wx.createPage(o);
